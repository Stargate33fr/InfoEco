2023-10-20 08:45:46.414 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 08:45:46.983 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 08:45:48.322 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 08:45:48.923 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 08:45:48.946 +02:00  DBG  Creating DbConnection.
2023-10-20 08:45:49.045 +02:00  DBG  Created DbConnection. (94ms).
2023-10-20 08:45:49.052 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 08:45:49.083 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:45:49.859 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:49.863 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:49.885 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (14ms).
2023-10-20 08:45:49.900 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 08:45:49.912 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (9ms).
2023-10-20 08:45:49.914 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (17ms).
2023-10-20 08:45:49.914 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:45:50.293 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.303 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 08:45:50.414 +02:00  INF  Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 08:45:50.415 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.418 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 08:45:50.420 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:45:50.707 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.707 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.708 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:45:50.709 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 08:45:50.709 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 08:45:50.710 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 08:45:50.710 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:45:50.711 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.711 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 08:45:50.759 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 08:45:50.759 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.759 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:45:50.783 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:45:50.784 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:45:50.784 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:45:50.784 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:45:50.784 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.785 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 08:45:50.835 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 08:45:50.839 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.842 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 08:45:50.843 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:45:50.843 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:45:50.859 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 08:45:50.860 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 08:45:50.862 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 08:45:50.863 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 08:45:50.867 +02:00  DBG  Hosting starting
2023-10-20 08:45:50.918 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 08:45:50.925 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 08:45:50.994 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 08:45:50.995 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 08:45:50.996 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 08:45:50.996 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 08:45:50.997 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 08:45:50.997 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 08:45:50.998 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 08:45:51.005 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 08:45:51.015 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 08:45:51.016 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 08:45:51.016 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 08:45:51.016 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 08:45:51.016 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 08:45:51.017 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 08:45:51.017 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 08:45:51.032 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 08:45:51.039 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 08:45:51.041 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 08:45:51.044 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 08:45:51.047 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 08:45:51.049 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 08:45:51.051 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 08:45:51.053 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 08:45:51.185 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 08:45:51.186 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 08:45:51.192 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 08:45:51.193 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 08:45:51.193 +02:00  INF  Hosting environment: Development
2023-10-20 08:45:51.193 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 08:45:51.193 +02:00  DBG  Hosting started
2023-10-20 08:45:51.243 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 08:45:51.279 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 08:45:51.335 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 08:45:51.336 +02:00  DBG  Request did not match any endpoints
2023-10-20 08:45:51.405 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 08:45:51.608 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 08:45:53.797 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 08:45:53.809 +02:00  DBG  Connection ID "18374686519936942096" disconnecting.
2023-10-20 08:45:53.811 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2570.3576ms
2023-10-20 08:45:53.813 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 08:45:53.831 +02:00  DBG  Connection ID "18230571306091282435" disconnecting.
2023-10-20 08:45:53.832 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 9.5234ms
2023-10-20 08:45:53.940 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 08:45:53.942 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 08:45:53.942 +02:00  DBG  Request did not match any endpoints
2023-10-20 08:45:53.945 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 08:45:54.339 +02:00  DBG  Connection ID "18230571297501347841" disconnecting.
2023-10-20 08:45:54.339 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 399.7521ms
2023-10-20 08:46:02.452 +02:00  INF  Request starting HTTP/1.1 GET https://localhost:44375/agenceImmobiliere/appartements/1 - -
2023-10-20 08:46:02.453 +02:00  DBG  No candidates found for the request path '/agenceImmobiliere/appartements/1'
2023-10-20 08:46:02.453 +02:00  DBG  Request did not match any endpoints
2023-10-20 08:46:02.639 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '19/10/2023 15:53:44', Current time: '20/10/2023 06:46:02'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 08:46:02.656 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '19/10/2023 15:53:44', Current time: '20/10/2023 06:46:02'.
2023-10-20 08:46:02.658 +02:00  DBG  The request path /agenceImmobiliere/appartements/1 does not match a supported file type
2023-10-20 08:46:02.659 +02:00  INF  Request finished HTTP/1.1 GET https://localhost:44375/agenceImmobiliere/appartements/1 - - - 404 - - 207.0274ms
2023-10-20 08:46:07.547 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 08:46:07.552 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 08:46:07.553 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 08:46:07.554 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 08:46:07.554 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 08:46:07.558 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 08:46:07.559 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 08:46:07.593 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 08:46:07.595 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 08:46:07.595 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 08:46:07.595 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 08:46:07.595 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 08:46:07.596 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 08:46:07.598 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 08:46:07.599 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 08:46:07.605 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 08:46:07.608 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 08:46:07.608 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 08:46:07.610 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 08:46:07.669 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 08:46:07.719 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 08:46:07.747 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 08:46:07.967 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 08:46:08.196 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 08:46:08.252 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:46:08.253 +02:00  DBG  Creating DbConnection.
2023-10-20 08:46:08.253 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 08:46:08.253 +02:00  DBG  Created DbCommand for 'ExecuteReader' (1ms).
2023-10-20 08:46:08.257 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (4ms).
2023-10-20 08:46:08.260 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:46:08.264 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:46:08.268 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 08:46:08.340 +02:00  INF  Executed DbCommand (75ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 08:46:08.387 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:46:08.443 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:46:08.444 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 103ms reading results.
2023-10-20 08:46:08.446 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:46:08.447 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:46:08.457 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 08:46:08.463 +02:00  INF  Information : POST https://localhost:44375/login from '::1:62634' responded 200 in 738,8759 ms
2023-10-20 08:46:08.501 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 828.2248ms.
2023-10-20 08:46:08.507 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 08:46:08.509 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 08:46:08.509 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 08:46:08.510 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 08:46:08.511 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 08:46:08.627 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 1027.1212ms
2023-10-20 08:46:08.628 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 08:46:08.629 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 08:46:08.632 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 08:46:08.634 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 08:46:08.635 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 1087.5708ms
2023-10-20 08:46:23.246 +02:00  INF  Request starting HTTP/1.1 GET https://localhost:44375/agenceImmobiliere/appartements/1 - -
2023-10-20 08:46:23.246 +02:00  DBG  No candidates found for the request path '/agenceImmobiliere/appartements/1'
2023-10-20 08:46:23.247 +02:00  DBG  Request did not match any endpoints
2023-10-20 08:46:23.258 +02:00  DBG  Successfully validated the token.
2023-10-20 08:46:23.260 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 08:46:23.261 +02:00  DBG  The request path /agenceImmobiliere/appartements/1 does not match a supported file type
2023-10-20 08:46:23.262 +02:00  INF  Request finished HTTP/1.1 GET https://localhost:44375/agenceImmobiliere/appartements/1 - - - 404 - - 16.0495ms
2023-10-20 08:47:39.307 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 08:47:39.307 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 08:47:39.307 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 08:47:39.307 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 08:47:39.308 +02:00  DBG  Successfully validated the token.
2023-10-20 08:47:39.308 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 08:47:39.324 +02:00  DBG  Authorization was successful.
2023-10-20 08:47:39.325 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 08:47:39.325 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 08:47:39.332 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 08:47:39.332 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 08:47:39.332 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 08:47:39.332 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 08:47:39.333 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 08:47:39.333 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 08:47:39.333 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 08:47:39.333 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 08:47:39.334 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 08:47:39.335 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 08:47:39.336 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 08:47:39.337 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 08:47:39.373 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 08:47:39.373 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 08:47:39.373 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 08:47:39.386 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 08:47:39.386 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 08:47:39.387 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 08:47:39.393 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 08:47:39.393 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 08:47:39.394 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 08:47:39.394 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 08:47:39.395 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 08:47:39.395 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 08:47:39.395 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 08:47:39.395 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 08:47:39.395 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 08:47:39.396 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 08:47:39.397 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 08:47:39.397 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 08:47:39.397 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 08:47:39.398 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 08:47:39.398 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 08:47:39.398 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 08:47:39.398 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 08:47:39.398 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 08:47:39.398 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 08:47:39.398 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 08:47:39.398 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 08:47:39.399 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 08:47:39.399 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 08:47:39.399 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 08:47:39.399 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 08:47:39.399 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 08:47:39.418 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 08:47:52.728 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 08:47:52.806 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 08:47:59.548 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 08:47:59.567 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 08:47:59.569 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 08:47:59.684 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Locataire AS l0 ON t.LocataireId == l0.Id
        ORDER BY t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 08:47:59.693 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:47:59.693 +02:00  DBG  Creating DbConnection.
2023-10-20 08:47:59.693 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 08:47:59.693 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:47:59.693 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:47:59.694 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:47:59.694 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:47:59.694 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 08:47:59.758 +02:00  INF  Executed DbCommand (64ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 08:47:59.779 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.811 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.813 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.861 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.861 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.886 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.887 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.887 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:47:59.887 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:47:59.887 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 129ms reading results.
2023-10-20 08:47:59.887 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:47:59.888 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:48:34.072 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:48:34.072 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:48:34.073 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:48:34.073 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:48:34.073 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:48:34.073 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 08:48:34.127 +02:00  INF  Executed DbCommand (54ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 08:48:34.128 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:48:34.128 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 08:48:34.128 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:48:34.128 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:48:34.132 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 08:48:34.137 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 08:48:34.170 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 08:48:34.179 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:48:34.179 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:48:34.180 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:48:34.180 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:48:34.180 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:48:34.180 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 08:48:34.242 +02:00  INF  Executed DbCommand (63ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 08:48:34.245 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:48:34.245 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 08:48:34.245 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:48:34.245 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:48:35.702 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 56369.1129ms
2023-10-20 08:48:35.916 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 08:48:36.496 +02:00  ERR  An unhandled exception has occurred while executing the request.AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> IReadOnlyCollection`1
System.Collections.Generic.List`1[[Infoeco.infrastructure.Entities.LocataireAppartementEntite, Infoeco.infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IReadOnlyCollection`1[[Infeco.Api.ViewModel.AppartementViewModel, Infeco.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
LocataireAppartementEntite -> AppartementViewModel
Infoeco.infrastructure.Entities.LocataireAppartementEntite -> Infeco.Api.ViewModel.AppartementViewModel
   at lambda_method296(Closure, LocataireAppartementEntite, AppartementViewModel, ResolutionContext)
   at lambda_method295(Closure, Object, IReadOnlyCollection`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method295(Closure, Object, IReadOnlyCollection`1, ResolutionContext)
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 31
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 08:48:36.512 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 08:48:36.512 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 08:48:36.512 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:48:36.512 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 500 - text/plain;+charset=utf-8 57205.6387ms
2023-10-20 08:48:39.295 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 08:48:39.295 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 08:48:39.295 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 08:48:39.295 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 08:48:39.296 +02:00  DBG  Successfully validated the token.
2023-10-20 08:48:39.296 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 08:48:39.297 +02:00  DBG  Authorization was successful.
2023-10-20 08:48:39.298 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 08:48:39.298 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 08:48:39.298 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 08:48:39.298 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 08:48:39.298 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 08:48:39.298 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 08:48:39.298 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 08:48:39.298 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 08:48:39.299 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 08:48:39.299 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 08:48:39.299 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 08:48:39.299 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 08:48:39.300 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 08:48:39.300 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 08:48:39.300 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 08:48:39.301 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 08:48:39.301 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 08:48:39.301 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 08:48:39.301 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 08:48:39.302 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 08:48:39.302 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 08:48:39.302 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 08:48:39.302 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 08:48:39.302 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 08:48:39.302 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 08:48:39.302 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 08:48:39.302 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 08:48:39.302 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 08:48:39.317 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 08:48:41.810 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 08:48:41.811 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 08:50:31.661 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:50:31.661 +02:00  DBG  Creating DbConnection.
2023-10-20 08:50:31.661 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 08:50:31.661 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:50:31.662 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:50:31.662 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:50:31.662 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:50:31.662 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 08:50:31.712 +02:00  INF  Executed DbCommand (51ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 08:50:31.713 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.714 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.714 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.714 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.714 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.714 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.715 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.715 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 08:50:31.715 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:50:31.715 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 08:50:31.715 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:50:31.715 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 08:50:54.470 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 08:50:54.470 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:50:54.470 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 08:50:54.470 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 08:50:54.470 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:50:54.470 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 08:50:54.518 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 08:50:54.518 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:50:54.519 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 08:50:54.519 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 08:50:54.519 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:16:50.893 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 11:16:51.194 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 11:16:51.679 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 11:16:52.178 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:16:52.188 +02:00  DBG  Creating DbConnection.
2023-10-20 11:16:52.246 +02:00  DBG  Created DbConnection. (55ms).
2023-10-20 11:16:52.250 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 11:16:52.268 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:16:52.864 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:52.865 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:52.876 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (7ms).
2023-10-20 11:16:52.882 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:16:52.890 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 11:16:52.891 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (10ms).
2023-10-20 11:16:52.891 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:16:53.277 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.283 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:16:53.370 +02:00  INF  Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:16:53.371 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.373 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 11:16:53.375 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:16:53.656 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.656 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.656 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:16:53.657 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:16:53.657 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:16:53.657 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:16:53.657 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:16:53.657 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.658 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:16:53.707 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:16:53.707 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.707 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:16:53.722 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:16:53.722 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:16:53.722 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:16:53.722 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:16:53.723 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.723 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:16:53.770 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:16:53.775 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.777 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 11:16:53.777 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:16:53.777 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:16:53.787 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 11:16:53.789 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:16:53.790 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:16:53.791 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:16:53.794 +02:00  DBG  Hosting starting
2023-10-20 11:16:53.831 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 11:16:53.836 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 11:16:53.843 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 11:16:53.844 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 11:16:53.844 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 11:16:53.844 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 11:16:53.844 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 11:16:53.845 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 11:16:53.845 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 11:16:53.849 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 11:16:53.853 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 11:16:53.854 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 11:16:53.854 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 11:16:53.854 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 11:16:53.854 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 11:16:53.854 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 11:16:53.854 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 11:16:53.861 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 11:16:53.864 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:16:53.865 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 11:16:53.866 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:16:53.868 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 11:16:53.869 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 11:16:53.871 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 11:16:53.872 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 11:16:53.966 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 11:16:53.966 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 11:16:53.966 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 11:16:53.967 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 11:16:53.967 +02:00  INF  Hosting environment: Development
2023-10-20 11:16:53.967 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 11:16:53.967 +02:00  DBG  Hosting started
2023-10-20 11:16:54.010 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 11:16:54.048 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 11:16:54.110 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 11:16:54.110 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:16:54.167 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:16:54.335 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 11:16:56.524 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 11:16:56.536 +02:00  DBG  Connection ID "18230571306091282437" disconnecting.
2023-10-20 11:16:56.539 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2530.1525ms
2023-10-20 11:16:56.539 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 11:16:56.555 +02:00  DBG  Connection ID "18374686519936942098" disconnecting.
2023-10-20 11:16:56.556 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.6537ms
2023-10-20 11:16:56.652 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 11:16:56.656 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 11:16:56.656 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:16:56.659 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:16:56.911 +02:00  DBG  Connection ID "18302628887244308518" disconnecting.
2023-10-20 11:16:56.911 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 253.9153ms
2023-10-20 11:18:51.769 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 11:18:51.772 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 11:18:51.773 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 11:18:51.774 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:18:51.776 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:18:51.782 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:18:51.783 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:18:51.816 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 11:18:51.817 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:18:51.817 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:18:51.818 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:18:51.818 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:18:51.818 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:18:51.820 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 11:18:51.822 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 11:18:51.829 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:18:51.832 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:18:51.832 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:18:51.834 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:18:51.897 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:18:51.942 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 11:18:51.997 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:18:52.161 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 11:18:52.337 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:18:52.379 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:18:52.379 +02:00  DBG  Creating DbConnection.
2023-10-20 11:18:52.379 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:18:52.379 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:18:52.382 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 11:18:52.385 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:18:52.387 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:18:52.390 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 11:18:52.455 +02:00  INF  Executed DbCommand (67ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 11:18:52.493 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:18:52.529 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:18:52.530 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 74ms reading results.
2023-10-20 11:18:52.532 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:18:52.533 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:18:52.541 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 11:18:52.544 +02:00  INF  Information : POST https://localhost:44375/login from '::1:58605' responded 200 in 598,7941 ms
2023-10-20 11:18:52.679 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 778.529ms.
2023-10-20 11:18:52.685 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:18:52.687 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:18:52.687 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:18:52.689 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:18:52.690 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 11:18:52.774 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 953.3469ms
2023-10-20 11:18:52.775 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:18:52.776 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:18:52.779 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:18:52.780 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 11:18:52.781 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 1011.5154ms
2023-10-20 11:19:12.824 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:19:12.825 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:19:12.825 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:19:12.826 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:19:12.907 +02:00  DBG  Successfully validated the token.
2023-10-20 11:19:12.910 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:19:12.919 +02:00  DBG  Authorization was successful.
2023-10-20 11:19:12.919 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:19:12.919 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:19:12.930 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:19:12.930 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:19:12.931 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:19:12.931 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:19:12.931 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:19:12.931 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:19:12.931 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:19:12.932 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:19:12.933 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:19:12.935 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:19:12.936 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:19:12.937 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:19:12.981 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:19:12.981 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:19:12.981 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:19:12.994 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:19:12.995 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:19:12.995 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:19:13.002 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:19:13.003 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:19:13.004 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:19:13.005 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:19:13.005 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:19:13.005 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:19:13.006 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:19:13.007 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:19:13.007 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:19:13.008 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:19:13.009 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:19:13.009 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:19:13.010 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:19:13.010 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:19:13.010 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:19:13.010 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:19:13.010 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:19:13.011 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:19:13.011 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:19:13.011 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:19:13.011 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:19:13.012 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:19:13.012 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:19:13.012 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:19:13.013 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:19:13.013 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:19:13.029 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:19:15.409 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:19:15.483 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:19:25.835 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)'
2023-10-20 11:19:25.852 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 11:19:25.855 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 11:19:25.921 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM LocataireAppartement AS l
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 11:19:25.926 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:19:25.926 +02:00  DBG  Creating DbConnection.
2023-10-20 11:19:25.926 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:19:25.926 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:19:25.926 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:19:25.927 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:19:25.927 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:19:25.927 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:19:25.979 +02:00  INF  Executed DbCommand (52ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:19:26.002 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.029 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.031 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.066 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.066 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.083 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.083 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.083 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:19:26.084 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:19:26.084 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 104ms reading results.
2023-10-20 11:19:26.084 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:19:26.084 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:28:05.763 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 11:28:06.111 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 11:28:06.827 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 11:28:07.253 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:28:07.268 +02:00  DBG  Creating DbConnection.
2023-10-20 11:28:07.338 +02:00  DBG  Created DbConnection. (67ms).
2023-10-20 11:28:07.344 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 11:28:07.369 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:07.952 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:07.954 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:07.968 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (8ms).
2023-10-20 11:28:07.977 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:28:07.985 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (5ms).
2023-10-20 11:28:07.987 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (12ms).
2023-10-20 11:28:07.987 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:08.366 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.374 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:28:08.468 +02:00  INF  Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:28:08.469 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.471 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 11:28:08.472 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:08.755 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.755 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.756 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:28:08.756 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:28:08.757 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:28:08.757 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:28:08.757 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:08.757 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.757 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:28:08.804 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:28:08.805 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.805 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:28:08.827 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:28:08.827 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:28:08.827 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:28:08.827 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:08.827 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.828 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:28:08.876 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:28:08.882 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.884 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 6ms reading results.
2023-10-20 11:28:08.884 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:08.884 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:28:08.900 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 11:28:08.902 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:28:08.904 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:08.906 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 11:28:08.909 +02:00  DBG  Hosting starting
2023-10-20 11:28:08.951 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 11:28:08.957 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 11:28:08.966 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 11:28:08.967 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 11:28:08.967 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 11:28:08.967 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 11:28:08.968 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 11:28:08.968 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 11:28:08.968 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 11:28:08.973 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 11:28:08.978 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 11:28:08.978 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 11:28:08.978 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 11:28:08.978 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 11:28:08.979 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 11:28:08.979 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 11:28:08.979 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 11:28:08.986 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 11:28:08.989 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:28:08.990 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 11:28:08.992 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:28:08.994 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 11:28:08.995 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 11:28:08.997 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 11:28:08.998 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 11:28:09.094 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 11:28:09.094 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 11:28:09.094 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 11:28:09.095 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 11:28:09.095 +02:00  INF  Hosting environment: Development
2023-10-20 11:28:09.095 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 11:28:09.095 +02:00  DBG  Hosting started
2023-10-20 11:28:09.141 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 11:28:09.178 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 11:28:09.235 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 11:28:09.235 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:28:09.287 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:28:09.439 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 11:28:11.624 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 11:28:11.645 +02:00  DBG  Connection ID "17365880181931114511" disconnecting.
2023-10-20 11:28:11.646 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 11:28:11.647 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2507.7551ms
2023-10-20 11:28:11.663 +02:00  DBG  Connection ID "18230571336156053530" disconnecting.
2023-10-20 11:28:11.664 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 8.9139ms
2023-10-20 11:28:11.753 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 11:28:11.756 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 11:28:11.756 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:28:11.759 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:28:12.096 +02:00  DBG  Connection ID "18230571318976184325" disconnecting.
2023-10-20 11:28:12.096 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 342.7826ms
2023-10-20 11:28:14.457 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:28:14.462 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:28:14.463 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:28:14.463 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:28:14.673 +02:00  DBG  Successfully validated the token.
2023-10-20 11:28:14.676 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:28:14.686 +02:00  DBG  Authorization was successful.
2023-10-20 11:28:14.689 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:28:14.691 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:28:14.737 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:28:14.739 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:28:14.740 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:28:14.741 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:28:14.741 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:28:14.741 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:28:14.745 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:28:14.746 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:28:14.755 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:28:14.760 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:28:14.762 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:28:14.762 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:28:14.945 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:28:14.946 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:28:14.946 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:28:14.966 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:28:14.970 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:28:14.972 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:28:14.982 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:28:14.983 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:28:14.984 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:28:14.985 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:28:14.985 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:28:14.986 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:28:14.986 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:28:14.987 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:28:14.987 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:28:14.988 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:28:14.989 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:28:14.989 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:28:14.991 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:28:14.991 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:28:14.991 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:28:14.991 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:28:14.992 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:28:14.992 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:28:14.992 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:28:14.992 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:28:14.992 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:28:14.994 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:28:14.994 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:28:14.995 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:28:14.995 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:28:14.995 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:28:15.183 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:28:18.726 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:28:18.768 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:28:23.003 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)'
2023-10-20 11:28:23.143 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 11:28:23.146 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 11:28:23.453 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM LocataireAppartement AS l
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 11:28:23.500 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:28:23.501 +02:00  DBG  Creating DbConnection.
2023-10-20 11:28:23.501 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:28:23.501 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:28:23.504 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 11:28:23.508 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:28:23.510 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:23.513 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:28:23.582 +02:00  INF  Executed DbCommand (71ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:28:23.683 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.738 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.741 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.784 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.784 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.808 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.808 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.808 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:28:23.812 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:23.812 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 229ms reading results.
2023-10-20 11:28:23.815 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:28:23.816 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:32:23.150 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 11:32:23.565 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 11:32:24.311 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 11:32:24.806 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:32:24.818 +02:00  DBG  Creating DbConnection.
2023-10-20 11:32:24.882 +02:00  DBG  Created DbConnection. (59ms).
2023-10-20 11:32:24.886 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 11:32:24.907 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:32:25.452 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:25.455 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:25.467 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (8ms).
2023-10-20 11:32:25.475 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:32:25.482 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (5ms).
2023-10-20 11:32:25.484 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (11ms).
2023-10-20 11:32:25.484 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:32:25.836 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:25.843 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:32:25.944 +02:00  INF  Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:32:25.945 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:25.948 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 11:32:25.950 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:32:26.231 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.231 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.232 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:32:26.232 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:32:26.232 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:32:26.233 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:32:26.233 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:32:26.233 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.233 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:32:26.278 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:32:26.278 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.278 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:32:26.304 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:32:26.304 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:32:26.304 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:32:26.304 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:32:26.304 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.305 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:32:26.355 +02:00  INF  Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:32:26.360 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.363 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 6ms reading results.
2023-10-20 11:32:26.363 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:32:26.363 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:32:26.376 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 11:32:26.378 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:32:26.381 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:32:26.382 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 11:32:26.387 +02:00  DBG  Hosting starting
2023-10-20 11:32:26.426 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 11:32:26.432 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 11:32:26.441 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 11:32:26.441 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 11:32:26.442 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 11:32:26.442 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 11:32:26.442 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 11:32:26.443 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 11:32:26.443 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 11:32:26.448 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 11:32:26.453 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 11:32:26.453 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 11:32:26.453 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 11:32:26.453 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 11:32:26.453 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 11:32:26.453 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 11:32:26.454 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 11:32:26.461 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 11:32:26.464 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:32:26.465 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 11:32:26.467 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:32:26.469 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 11:32:26.470 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 11:32:26.472 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 11:32:26.473 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 11:32:26.564 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 11:32:26.564 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 11:32:26.564 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 11:32:26.565 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 11:32:26.565 +02:00  INF  Hosting environment: Development
2023-10-20 11:32:26.565 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 11:32:26.565 +02:00  DBG  Hosting started
2023-10-20 11:32:26.609 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 11:32:26.647 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 11:32:26.707 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 11:32:26.707 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:32:26.760 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:32:26.905 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 11:32:29.079 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 11:32:29.096 +02:00  DBG  Connection ID "18230571318976184327" disconnecting.
2023-10-20 11:32:29.097 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 11:32:29.099 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2491.5116ms
2023-10-20 11:32:29.106 +02:00  DBG  Connection ID "18302628908719144967" disconnecting.
2023-10-20 11:32:29.107 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 8.0840ms
2023-10-20 11:32:29.212 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 11:32:29.215 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 11:32:29.215 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:32:29.217 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:32:29.512 +02:00  DBG  Connection ID "17437937775969042435" disconnecting.
2023-10-20 11:32:29.512 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 299.6053ms
2023-10-20 11:32:45.877 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:32:45.883 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:32:45.885 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:32:45.886 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:32:46.175 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 09:28:52', Current time: '20/10/2023 09:32:46'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 11:32:46.202 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 09:28:52', Current time: '20/10/2023 09:32:46'.
2023-10-20 11:32:46.220 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 11:32:46.235 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 11:32:46.237 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 401 - - 359.7268ms
2023-10-20 11:32:59.351 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 11:32:59.351 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 11:32:59.351 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 11:32:59.351 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:32:59.351 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:32:59.367 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:32:59.369 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:32:59.414 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 11:32:59.417 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:32:59.417 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:32:59.417 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:32:59.417 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:32:59.418 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:32:59.420 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 11:32:59.422 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 11:32:59.431 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:32:59.435 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:32:59.435 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:32:59.438 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:32:59.504 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:32:59.553 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 11:32:59.591 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:32:59.840 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 11:33:00.115 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:33:00.164 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:33:00.165 +02:00  DBG  Creating DbConnection.
2023-10-20 11:33:00.165 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:33:00.165 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:33:00.168 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 11:33:00.171 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:33:00.173 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:00.177 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 11:33:00.246 +02:00  INF  Executed DbCommand (72ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 11:33:00.296 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:00.381 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:00.383 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 136ms reading results.
2023-10-20 11:33:00.388 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:00.390 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 11:33:00.407 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 11:33:00.413 +02:00  INF  Information : POST https://localhost:44375/login from '::1:59734' responded 200 in 854,0313 ms
2023-10-20 11:33:00.474 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 965.0202ms.
2023-10-20 11:33:00.482 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:33:00.484 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:33:00.484 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:33:00.486 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:33:00.487 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 11:33:00.596 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 1173.5963ms
2023-10-20 11:33:00.597 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:33:00.598 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:33:00.602 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:33:00.603 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 11:33:00.604 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 1252.9483ms
2023-10-20 11:33:16.255 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:33:16.255 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:33:16.256 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:33:16.256 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:33:16.272 +02:00  DBG  Successfully validated the token.
2023-10-20 11:33:16.276 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:33:16.279 +02:00  DBG  Authorization was successful.
2023-10-20 11:33:16.280 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:33:16.280 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:33:16.292 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:33:16.292 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:33:16.292 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:33:16.292 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:33:16.293 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:33:16.293 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:33:16.293 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:33:16.294 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:33:16.295 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:33:16.297 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:33:16.299 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:33:16.299 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:33:16.343 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:33:16.343 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:33:16.343 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:33:16.355 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:33:16.355 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:33:16.356 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:33:16.363 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:33:16.364 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:33:16.365 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:33:16.367 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:33:16.367 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:33:16.367 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:33:16.368 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:33:16.368 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:33:16.368 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:33:16.370 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:33:16.370 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:33:16.370 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:33:16.371 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:33:16.372 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:33:16.372 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:33:16.372 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:33:16.372 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:33:16.372 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:33:16.372 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:33:16.372 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:33:16.372 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:33:16.373 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:33:16.374 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:33:16.374 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:33:16.374 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:33:16.374 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:33:16.394 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:33:16.399 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:33:16.483 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:33:18.676 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)'
2023-10-20 11:33:18.695 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 11:33:18.698 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 11:33:18.791 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM LocataireAppartement AS l
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 11:33:18.796 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:33:18.796 +02:00  DBG  Creating DbConnection.
2023-10-20 11:33:18.796 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:33:18.796 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:33:18.796 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:33:18.797 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:33:18.797 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:18.797 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:33:18.848 +02:00  INF  Executed DbCommand (50ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:33:18.880 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.919 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.922 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.961 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.961 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.982 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.982 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.982 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:33:18.983 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:18.983 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 135ms reading results.
2023-10-20 11:33:18.983 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:18.983 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:33:28.060 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 11:33:28.072 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 11:33:28.119 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:33:28.129 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:33:28.129 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:33:28.129 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:33:28.129 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:33:28.129 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:28.129 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:33:28.176 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:33:28.178 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:28.178 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 11:33:28.179 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:33:28.179 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:33:32.638 +02:00  INF  Handled AppartementsResponse
2023-10-20 11:33:32.639 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche from '::1:59734' responded 200 in 16238,4516 ms
2023-10-20 11:33:32.642 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16246.7226ms.
2023-10-20 11:33:32.643 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:33:32.643 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:33:32.643 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:33:32.644 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:33:32.644 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 11:33:32.676 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 16383.2668ms
2023-10-20 11:33:32.676 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:33:32.676 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:33:32.677 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:33:32.677 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:33:32.677 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 200 254 application/json;+charset=utf-8 16421.9541ms
2023-10-20 11:34:10.394 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/Appartements application/json 150
2023-10-20 11:34:10.394 +02:00  DBG  1 candidate(s) found for the request path '/Appartements'
2023-10-20 11:34:10.394 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api)' with route pattern 'appartements' is valid for the request path '/Appartements'
2023-10-20 11:34:10.394 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api)'
2023-10-20 11:34:10.394 +02:00  DBG  Successfully validated the token.
2023-10-20 11:34:10.394 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:34:10.395 +02:00  DBG  Authorization was successful.
2023-10-20 11:34:10.395 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:34:10.395 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api)'
2023-10-20 11:34:10.399 +02:00  INF  Route matched with {action = "CreerUnAppartement", controller = "Appartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.ResponseCreation]] CreerUnAppartementAsync(Infeco.Api.Commands.Appartements.CreerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AppartementController (Infeco.Api).
2023-10-20 11:34:10.399 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:34:10.399 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:34:10.399 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:34:10.399 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:34:10.399 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:34:10.399 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:34:10.400 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:34:10.400 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.CreerAppartementCommand' ...
2023-10-20 11:34:10.400 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.CreerAppartementCommand' using the name '' in request data ...
2023-10-20 11:34:10.401 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:34:10.401 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:34:10.415 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.CreerAppartementCommand'.
2023-10-20 11:34:10.415 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.CreerAppartementCommand'.
2023-10-20 11:34:10.415 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Appartements.CreerAppartementCommand' ...
2023-10-20 11:34:10.422 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Appartements.CreerAppartementCommand'.
2023-10-20 11:34:10.423 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:34:10.423 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:34:10.423 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:34:10.423 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:34:10.456 +02:00  INF  Executing action method Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:34:10.532 +02:00  INF  Handling CreerAppartementCommand
2023-10-20 11:34:10.533 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:34:10.578 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.AppartementEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:34:10.590 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:34:10.594 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:34:10.597 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:34:10.608 +02:00  DBG  The unchanged property 'AppartementEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-20 11:34:10.618 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-20 11:34:10.710 +02:00  DBG  Creating DbConnection.
2023-10-20 11:34:10.710 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:34:10.710 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:34:10.710 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:10.712 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:34:10.713 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:34:10.713 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:34:10.713 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = DateTime), @p7='?' (DbType = Double), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Appartement" ("Adresse", "AgenceImmobiliereId", "ComplementAdresse", "CreeLe", "DepotDeGarantie", "Loyer", "ModifieLe", "NombreDeMetre2", "PrixDesCharges", "TypeAppartementId", "VilleId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2023-10-20 11:34:10.787 +02:00  INF  Executed DbCommand (74ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = DateTime), @p7='?' (DbType = Double), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Appartement" ("Adresse", "AgenceImmobiliereId", "ComplementAdresse", "CreeLe", "DepotDeGarantie", "Loyer", "ModifieLe", "NombreDeMetre2", "PrixDesCharges", "TypeAppartementId", "VilleId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2023-10-20 11:34:10.798 +02:00  DBG  The foreign key property 'AppartementEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-20 11:34:10.806 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:10.806 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 19ms reading results.
2023-10-20 11:34:10.808 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:10.808 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:34:10.822 +02:00  DBG  An entity of type 'AppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:34:10.825 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-20 11:34:10.829 +02:00  INF  Handled Unit
2023-10-20 11:34:10.829 +02:00  INF  Information : POST https://localhost:44375/Appartements from '::1:59734' responded 200 in 296,7226 ms
2023-10-20 11:34:10.833 +02:00  INF  Executed action method Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 376.969ms.
2023-10-20 11:34:10.833 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:34:10.833 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:34:10.833 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:34:10.833 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:34:10.833 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.ViewModel.ResponseCreation'.
2023-10-20 11:34:10.836 +02:00  INF  Executed action Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api) in 436.9323ms
2023-10-20 11:34:10.836 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AppartementController.CreerUnAppartementAsync (Infeco.Api)'
2023-10-20 11:34:10.836 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:34:10.837 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:34:10.837 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:34:10.837 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/Appartements application/json 150 - 200 9 application/json;+charset=utf-8 443.0933ms
2023-10-20 11:34:29.047 +02:00  INF  Request starting HTTP/1.1 GET https://localhost:44375/Appartements/12 - -
2023-10-20 11:34:29.048 +02:00  DBG  1 candidate(s) found for the request path '/Appartements/12'
2023-10-20 11:34:29.048 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)' with route pattern 'appartements/{id}' is valid for the request path '/Appartements/12'
2023-10-20 11:34:29.048 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:34:29.048 +02:00  DBG  Successfully validated the token.
2023-10-20 11:34:29.048 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:34:29.049 +02:00  DBG  Authorization was successful.
2023-10-20 11:34:29.049 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:34:29.049 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:34:29.052 +02:00  INF  Route matched with {action = "ObtenirAppartementParId", controller = "Appartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.AppartementViewModel]] ObtenirAppartementParIdAsync(Int32, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AppartementController (Infeco.Api).
2023-10-20 11:34:29.053 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:34:29.053 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:34:29.053 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:34:29.053 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:34:29.053 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:34:29.053 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:34:29.053 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:34:29.053 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-20 11:34:29.053 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-20 11:34:29.054 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:34:29.054 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:34:29.054 +02:00  DBG  Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-20 11:34:29.054 +02:00  DBG  Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-20 11:34:29.054 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:34:29.055 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:34:29.055 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:34:29.055 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:34:29.072 +02:00  INF  Executing action method Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:34:29.075 +02:00  INF  Handling ObtenirAppartementParIdQuery
2023-10-20 11:34:29.076 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:34:29.081 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-20 11:34:29.083 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 11:34:29.084 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 11:34:29.100 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:34:29.101 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:34:29.101 +02:00  DBG  Creating DbConnection.
2023-10-20 11:34:29.101 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:34:29.102 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:34:29.102 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:34:29.102 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:34:29.102 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:29.102 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:34:29.150 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:34:29.153 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:29.153 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 3ms reading results.
2023-10-20 11:34:29.153 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:29.153 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:34:29.160 +02:00  INF  Handled DetailAppartementResponse
2023-10-20 11:34:29.160 +02:00  INF  Information : GET https://localhost:44375/Appartements/12 from '::1:59734' responded 200 in 85,1758 ms
2023-10-20 11:34:29.162 +02:00  INF  Executed action method Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 89.5129ms.
2023-10-20 11:34:29.162 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:34:29.162 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:34:29.162 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:34:29.162 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:34:29.162 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Appartements.DetailAppartementResponse'.
2023-10-20 11:34:29.169 +02:00  INF  Executed action Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api) in 116.1484ms
2023-10-20 11:34:29.169 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:34:29.169 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:34:29.169 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:34:29.169 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:34:29.169 +02:00  INF  Request finished HTTP/1.1 GET https://localhost:44375/Appartements/12 - - - 200 303 application/json;+charset=utf-8 122.6478ms
2023-10-20 11:34:51.223 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/locataires application/json 235
2023-10-20 11:34:51.223 +02:00  DBG  1 candidate(s) found for the request path '/locataires'
2023-10-20 11:34:51.223 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)' with route pattern 'Locataires' is valid for the request path '/locataires'
2023-10-20 11:34:51.223 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-20 11:34:51.254 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 13:36:43', Current time: '20/10/2023 09:34:51'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 11:34:51.255 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 13:36:43', Current time: '20/10/2023 09:34:51'.
2023-10-20 11:34:51.255 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 11:34:51.256 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 11:34:51.257 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/locataires application/json 235 - 401 - - 34.1546ms
2023-10-20 11:34:59.076 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/locataires application/json 235
2023-10-20 11:34:59.076 +02:00  DBG  1 candidate(s) found for the request path '/locataires'
2023-10-20 11:34:59.077 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)' with route pattern 'Locataires' is valid for the request path '/locataires'
2023-10-20 11:34:59.077 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-20 11:34:59.077 +02:00  DBG  Successfully validated the token.
2023-10-20 11:34:59.077 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:34:59.077 +02:00  DBG  Authorization was successful.
2023-10-20 11:34:59.078 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:34:59.078 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-20 11:34:59.086 +02:00  INF  Route matched with {action = "CreerUnLocataire", controller = "Locataire"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.ResponseCreation]] CreerUnLocataireAsync(Infeco.Api.Commands.Locataire.CreerLocataireCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireController (Infeco.Api).
2023-10-20 11:34:59.086 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:34:59.086 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:34:59.086 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:34:59.086 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:34:59.086 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:34:59.086 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireController (Infeco.Api)
2023-10-20 11:34:59.087 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireController (Infeco.Api)
2023-10-20 11:34:59.087 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand' ...
2023-10-20 11:34:59.088 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand' using the name '' in request data ...
2023-10-20 11:34:59.088 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:34:59.088 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:34:59.103 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand'.
2023-10-20 11:34:59.103 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand'.
2023-10-20 11:34:59.103 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand' ...
2023-10-20 11:34:59.108 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand'.
2023-10-20 11:34:59.109 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:34:59.109 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:34:59.109 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:34:59.109 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:34:59.130 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:34:59.144 +02:00  INF  Handling CreerLocataireCommand
2023-10-20 11:34:59.144 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:34:59.153 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:34:59.156 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:34:59.156 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:34:59.156 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:34:59.158 +02:00  DBG  The unchanged property 'LocataireEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-20 11:34:59.163 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-20 11:34:59.166 +02:00  DBG  Creating DbConnection.
2023-10-20 11:34:59.166 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:34:59.166 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:34:59.166 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:59.166 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:34:59.166 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:34:59.166 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:34:59.167 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Locataire" ("CreeLe", "DateNaissance", "IBAN", "Mail", "ModifieLe", "Nom", "Prenom", "Telephone")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2023-10-20 11:34:59.225 +02:00  INF  Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Locataire" ("CreeLe", "DateNaissance", "IBAN", "Mail", "ModifieLe", "Nom", "Prenom", "Telephone")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2023-10-20 11:34:59.227 +02:00  DBG  The foreign key property 'LocataireEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-20 11:34:59.227 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:59.227 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 11:34:59.227 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:34:59.227 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:34:59.229 +02:00  DBG  An entity of type 'LocataireEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:34:59.229 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-20 11:34:59.230 +02:00  INF  Handled Unit
2023-10-20 11:34:59.230 +02:00  INF  Information : POST https://localhost:44375/locataires from '::1:59734' responded 200 in 86,3270 ms
2023-10-20 11:34:59.231 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.6947ms.
2023-10-20 11:34:59.231 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:34:59.231 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:34:59.231 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:34:59.231 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:34:59.231 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.ViewModel.ResponseCreation'.
2023-10-20 11:34:59.232 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api) in 145.2742ms
2023-10-20 11:34:59.232 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-20 11:34:59.232 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:34:59.232 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:34:59.232 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:34:59.232 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/locataires application/json 235 - 200 8 application/json;+charset=utf-8 156.0766ms
2023-10-20 11:35:23.599 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-20 11:35:23.600 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-20 11:35:23.600 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-20 11:35:23.600 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:35:23.634 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 13:36:43', Current time: '20/10/2023 09:35:23'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 11:35:23.634 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 13:36:43', Current time: '20/10/2023 09:35:23'.
2023-10-20 11:35:23.634 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 11:35:23.634 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 11:35:23.635 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 401 - - 35.9000ms
2023-10-20 11:35:31.225 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-20 11:35:31.227 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-20 11:35:31.227 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-20 11:35:31.227 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:35:31.228 +02:00  DBG  Successfully validated the token.
2023-10-20 11:35:31.228 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:35:31.228 +02:00  DBG  Authorization was successful.
2023-10-20 11:35:31.228 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:35:31.228 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:35:31.233 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-20 11:35:31.233 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:35:31.233 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:35:31.233 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:35:31.234 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:35:31.234 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:35:31.234 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-20 11:35:31.234 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-20 11:35:31.234 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-20 11:35:31.234 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-20 11:35:31.234 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:35:31.234 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:35:31.240 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-20 11:35:31.241 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-20 11:35:31.241 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-20 11:35:31.243 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-20 11:35:31.244 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:35:31.244 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:35:31.244 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:35:31.244 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:35:31.261 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:35:31.266 +02:00  INF  Handling AssignerAppartementCommand
2023-10-20 11:35:31.267 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:35:31.272 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:35:31.272 +02:00  DBG  Creating DbConnection.
2023-10-20 11:35:31.272 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:35:31.272 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:35:31.272 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:35:31.272 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:35:31.272 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:35:31.273 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:35:31.318 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:35:31.318 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:35:31.318 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:35:31.318 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:35:31.318 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:35:33.150 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 1916.5927ms
2023-10-20 11:35:33.420 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:35:34.096 +02:00  ERR  An unhandled exception has occurred while executing the request.System.Exception: L'appartement avec l'id 13 n'existe pas
   at Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommandHandler.ExecuteCommandeAsync(AssignerAppartementCommand commande, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Commands\LocataireAppartement\AssignerAppartementCommandHandler.cs:line 29
   at Infeco.Api.Infrastructure.MediatR.CommandHandlerBase`1.Handle(TCommande commande, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\CommandHandlerBase.cs:line 41
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync(AssignerAppartementCommand command, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 43
   at lambda_method461(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 11:35:34.109 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:35:34.109 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:35:34.109 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:35:34.110 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 500 - text/plain;+charset=utf-8 2884.9200ms
2023-10-20 11:36:00.813 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-20 11:36:00.813 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-20 11:36:00.813 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-20 11:36:00.813 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:36:00.813 +02:00  DBG  Successfully validated the token.
2023-10-20 11:36:00.813 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:36:00.813 +02:00  DBG  Authorization was successful.
2023-10-20 11:36:00.813 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:36:00.813 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:36:00.814 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-20 11:36:00.814 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:36:00.814 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:36:00.814 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:36:00.814 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:36:00.814 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:36:00.814 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-20 11:36:00.814 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-20 11:36:00.814 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-20 11:36:00.814 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-20 11:36:00.814 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:36:00.814 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:36:00.815 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-20 11:36:00.815 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-20 11:36:00.815 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-20 11:36:00.815 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-20 11:36:00.815 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:36:00.815 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:36:00.815 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:36:00.815 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:36:00.833 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:36:00.835 +02:00  INF  Handling AssignerAppartementCommand
2023-10-20 11:36:00.836 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:36:00.844 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:36:00.847 +02:00  DBG  Creating DbConnection.
2023-10-20 11:36:00.847 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:36:00.847 +02:00  DBG  Created DbCommand for 'ExecuteReader' (3ms).
2023-10-20 11:36:00.847 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 11:36:00.847 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:00.847 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.847 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:36:00.893 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:36:00.893 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.894 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:36:00.894 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.894 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:00.896 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-20 11:36:00.901 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:36:00.902 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:36:00.903 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:00.903 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:00.903 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:00.903 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.903 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-20 11:36:00.948 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-20 11:36:00.949 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:00.949 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.949 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:36:00.949 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.949 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:00.955 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .FirstOrDefault(u => u.LocataireId == __locataireAppartement_LocataireId_0 && u.AppartementId == __locataireAppartement_AppartementId_1)'
2023-10-20 11:36:00.959 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
        SELECT TOP(1) l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe
        FROM LocataireAppartement AS l
        WHERE (l.LocataireId == @__locataireAppartement_LocataireId_0) && (l.AppartementId == @__locataireAppartement_AppartementId_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-10-20 11:36:00.962 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:36:00.962 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:00.962 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:00.962 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:00.963 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:00.963 +02:00  DBG  Executing DbCommand [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-20 11:36:01.008 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-20 11:36:01.009 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:01.009 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:36:01.009 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:01.009 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:01.012 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireAppartementEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:01.016 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:01.017 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:01.018 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:36:01.018 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:36:01.022 +02:00  DBG  The unchanged property 'LocataireAppartementEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-20 11:36:01.027 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-20 11:36:01.030 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:01.031 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:01.031 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:36:01.031 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:01.031 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:01.031 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-20 11:36:01.084 +02:00  INF  Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-20 11:36:01.085 +02:00  DBG  The foreign key property 'LocataireAppartementEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-20 11:36:01.087 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:01.087 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 11:36:01.087 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:01.087 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:01.088 +02:00  DBG  An entity of type 'LocataireAppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:01.088 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-20 11:36:01.088 +02:00  INF  Handled Unit
2023-10-20 11:36:01.088 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement/assignerAppartement from '::1:59734' responded 200 in 253,3497 ms
2023-10-20 11:36:01.089 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 255.5667ms.
2023-10-20 11:36:01.089 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:36:01.089 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:36:01.089 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:36:01.089 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:36:01.089 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.ViewModel.ResponseCreation'.
2023-10-20 11:36:01.090 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 275.68ms
2023-10-20 11:36:01.090 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-20 11:36:01.090 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:36:01.090 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:01.090 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:01.090 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 200 9 application/json;+charset=utf-8 277.5645ms
2023-10-20 11:36:04.921 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:36:04.921 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:36:04.922 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:36:04.922 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:36:04.922 +02:00  DBG  Successfully validated the token.
2023-10-20 11:36:04.922 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:36:04.922 +02:00  DBG  Authorization was successful.
2023-10-20 11:36:04.922 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:36:04.922 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:36:04.922 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:36:04.922 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:36:04.922 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:36:04.922 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:36:04.922 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:36:04.922 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:36:04.922 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:36:04.922 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:36:04.923 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:36:04.923 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:36:04.923 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:36:04.923 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:36:04.923 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:36:04.923 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:36:04.923 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:36:04.923 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:36:04.924 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:36:04.924 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:36:04.924 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:36:04.924 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:36:04.924 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:36:04.943 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:36:04.945 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:36:04.945 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:36:06.986 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:36:06.986 +02:00  DBG  Creating DbConnection.
2023-10-20 11:36:06.986 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:36:06.986 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:06.986 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:06.986 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:06.986 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:06.986 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:36:07.032 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:36:07.032 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.032 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.032 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.032 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:36:07.033 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:07.033 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 11:36:07.033 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:07.033 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:13.056 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:36:13.056 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:13.056 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:36:13.056 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:13.056 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:13.056 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:36:13.101 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:36:13.101 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:13.101 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:36:13.101 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:36:13.101 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:15.793 +02:00  INF  Handled AppartementsResponse
2023-10-20 11:36:15.793 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche from '::1:59734' responded 200 in 10848,2074 ms
2023-10-20 11:36:15.793 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10850.0054ms.
2023-10-20 11:36:15.794 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:36:15.794 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:36:15.794 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:36:15.794 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:36:15.794 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 11:36:15.795 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 10872.5002ms
2023-10-20 11:36:15.795 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:36:15.796 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:36:15.796 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:36:15.796 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:36:15.796 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 200 485 application/json;+charset=utf-8 10874.4097ms
2023-10-20 11:37:07.886 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:37:07.886 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:37:07.886 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:37:07.886 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:37:07.886 +02:00  DBG  Successfully validated the token.
2023-10-20 11:37:07.886 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:37:07.886 +02:00  DBG  Authorization was successful.
2023-10-20 11:37:07.886 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:37:07.886 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:37:07.887 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:37:07.887 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:37:07.887 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:37:07.887 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:37:07.887 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:37:07.887 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:37:07.887 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:37:07.887 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:37:07.887 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:37:07.887 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:37:07.887 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:37:07.887 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:37:07.887 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:37:07.887 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:37:07.887 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:37:07.887 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:37:07.887 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:37:07.888 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:37:07.888 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:37:07.888 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:37:07.888 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:37:07.888 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:37:07.888 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:37:07.889 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:37:07.889 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:37:07.889 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:37:07.905 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:37:07.906 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:37:07.910 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:37:11.579 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:37:11.580 +02:00  DBG  Creating DbConnection.
2023-10-20 11:37:11.580 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:37:11.580 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:37:11.580 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:37:11.580 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:37:11.580 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:11.580 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:37:11.626 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:37:11.626 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.626 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.626 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.626 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.626 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.627 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.627 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.627 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.627 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.627 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.627 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.628 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.628 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:37:11.628 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:11.628 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 11:37:11.628 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:11.628 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:37:11.631 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:37:11.631 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:37:11.631 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:37:11.631 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:37:11.631 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:11.631 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:37:11.676 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:37:11.677 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:11.677 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:37:11.677 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:11.677 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:37:11.677 +02:00  INF  Handled AppartementsResponse
2023-10-20 11:37:11.677 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche from '::1:59734' responded 200 in 3770,8156 ms
2023-10-20 11:37:11.677 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3771.8591ms.
2023-10-20 11:37:11.677 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:37:11.678 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:37:11.678 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:37:11.678 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:37:11.678 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 11:37:11.679 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 3791.8136ms
2023-10-20 11:37:11.679 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:37:11.679 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:37:11.679 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:37:11.679 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:37:11.679 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 200 485 application/json;+charset=utf-8 3793.6386ms
2023-10-20 11:37:47.261 +02:00  INF  Request starting HTTP/1.1 PUT https://localhost:44375/Appartements/12 application/json 171
2023-10-20 11:37:47.261 +02:00  DBG  1 candidate(s) found for the request path '/Appartements/12'
2023-10-20 11:37:47.262 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)' with route pattern 'appartements/{id:int}' is valid for the request path '/Appartements/12'
2023-10-20 11:37:47.262 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:37:47.292 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '15/10/2023 16:59:51', Current time: '20/10/2023 09:37:47'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 11:37:47.293 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '15/10/2023 16:59:51', Current time: '20/10/2023 09:37:47'.
2023-10-20 11:37:47.293 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 11:37:47.293 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 11:37:47.294 +02:00  INF  Request finished HTTP/1.1 PUT https://localhost:44375/Appartements/12 application/json 171 - 401 - - 32.4726ms
2023-10-20 11:37:54.159 +02:00  INF  Request starting HTTP/1.1 PUT https://localhost:44375/Appartements/12 application/json 171
2023-10-20 11:37:54.159 +02:00  DBG  1 candidate(s) found for the request path '/Appartements/12'
2023-10-20 11:37:54.160 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)' with route pattern 'appartements/{id:int}' is valid for the request path '/Appartements/12'
2023-10-20 11:37:54.160 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:37:54.160 +02:00  DBG  Successfully validated the token.
2023-10-20 11:37:54.160 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:37:54.161 +02:00  DBG  Authorization was successful.
2023-10-20 11:37:54.161 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:37:54.161 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:37:54.165 +02:00  INF  Route matched with {action = "ModifierUnAppartement", controller = "Appartement"}. Executing controller action with signature System.Threading.Tasks.Task ModifierUnAppartementAsync(Int32, Infeco.Api.Commands.Appartements.ModifierAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AppartementController (Infeco.Api).
2023-10-20 11:37:54.165 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:37:54.165 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:37:54.165 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:37:54.165 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:37:54.165 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:37:54.165 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:37:54.165 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:37:54.165 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-20 11:37:54.165 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-20 11:37:54.165 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:37:54.165 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:37:54.165 +02:00  DBG  Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-20 11:37:54.165 +02:00  DBG  Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-20 11:37:54.165 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand' ...
2023-10-20 11:37:54.165 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand' using the name '' in request data ...
2023-10-20 11:37:54.165 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:37:54.165 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:37:54.170 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand'.
2023-10-20 11:37:54.170 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand'.
2023-10-20 11:37:54.170 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand' ...
2023-10-20 11:37:54.172 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand'.
2023-10-20 11:37:54.172 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:37:54.172 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:37:54.172 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:37:54.172 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:37:54.193 +02:00  INF  Executing action method Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:37:54.199 +02:00  INF  Handling ModifierAppartementCommand
2023-10-20 11:37:54.200 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:37:57.719 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:37:57.720 +02:00  DBG  Creating DbConnection.
2023-10-20 11:37:57.720 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:37:57.720 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:37:57.720 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:37:57.720 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:37:58.146 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:58.147 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:37:58.194 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:37:58.194 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:58.195 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:37:58.195 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:37:58.195 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:38:33.366 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:38:33.367 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:38:33.367 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:38:33.368 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-20 11:38:33.372 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:38:33.372 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:33.372 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:38:33.372 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:38:33.372 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:38:33.372 +02:00  DBG  Executing DbCommand [Parameters=[@p11='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = DateTime), @p7='?' (DbType = Double), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Appartement" SET "Adresse" = @p0, "AgenceImmobiliereId" = @p1, "ComplementAdresse" = @p2, "CreeLe" = @p3, "DepotDeGarantie" = @p4, "Loyer" = @p5, "ModifieLe" = @p6, "NombreDeMetre2" = @p7, "PrixDesCharges" = @p8, "TypeAppartementId" = @p9, "VilleId" = @p10
WHERE "Id" = @p11;
2023-10-20 11:38:33.421 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = DateTime), @p7='?' (DbType = Double), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Appartement" SET "Adresse" = @p0, "AgenceImmobiliereId" = @p1, "ComplementAdresse" = @p2, "CreeLe" = @p3, "DepotDeGarantie" = @p4, "Loyer" = @p5, "ModifieLe" = @p6, "NombreDeMetre2" = @p7, "PrixDesCharges" = @p8, "TypeAppartementId" = @p9, "VilleId" = @p10
WHERE "Id" = @p11;
2023-10-20 11:38:33.422 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:33.422 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:38:33.422 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:33.422 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:38:33.423 +02:00  DBG  An entity of type 'AppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:38:33.423 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-20 11:38:35.450 +02:00  INF  Handled Unit
2023-10-20 11:38:35.450 +02:00  INF  Information : PUT https://localhost:44375/Appartements/12 from '::1:59734' responded 200 in 41251,1454 ms
2023-10-20 11:38:35.452 +02:00  INF  Executed action method Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 41259.3646ms.
2023-10-20 11:38:35.453 +02:00  INF  Executed action Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api) in 41287.832ms
2023-10-20 11:38:35.453 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:38:35.454 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:38:35.454 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:38:35.454 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:38:35.454 +02:00  INF  Request finished HTTP/1.1 PUT https://localhost:44375/Appartements/12 application/json 171 - 200 - - 41294.7410ms
2023-10-20 11:38:42.115 +02:00  INF  Request starting HTTP/1.1 GET https://localhost:44375/Appartements/12 - -
2023-10-20 11:38:42.115 +02:00  DBG  1 candidate(s) found for the request path '/Appartements/12'
2023-10-20 11:38:42.115 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)' with route pattern 'appartements/{id}' is valid for the request path '/Appartements/12'
2023-10-20 11:38:42.115 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:38:42.116 +02:00  DBG  Successfully validated the token.
2023-10-20 11:38:42.116 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:38:42.116 +02:00  DBG  Authorization was successful.
2023-10-20 11:38:42.116 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:38:42.116 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:38:42.116 +02:00  INF  Route matched with {action = "ObtenirAppartementParId", controller = "Appartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.AppartementViewModel]] ObtenirAppartementParIdAsync(Int32, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AppartementController (Infeco.Api).
2023-10-20 11:38:42.116 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:38:42.116 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:38:42.116 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:38:42.116 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:38:42.116 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:38:42.116 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:38:42.116 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:38:42.116 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-20 11:38:42.117 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-20 11:38:42.117 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:38:42.117 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:38:42.117 +02:00  DBG  Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-20 11:38:42.117 +02:00  DBG  Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-20 11:38:42.117 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:38:42.117 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:38:42.117 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:38:42.117 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:38:42.135 +02:00  INF  Executing action method Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:38:42.137 +02:00  INF  Handling ObtenirAppartementParIdQuery
2023-10-20 11:38:42.138 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:38:42.139 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:38:42.139 +02:00  DBG  Creating DbConnection.
2023-10-20 11:38:42.139 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:38:42.139 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:38:42.139 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:38:42.140 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:38:42.140 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:42.140 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:38:42.185 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:38:42.185 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:42.185 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:38:42.185 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:42.185 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:38:42.185 +02:00  INF  Handled DetailAppartementResponse
2023-10-20 11:38:42.185 +02:00  INF  Information : GET https://localhost:44375/Appartements/12 from '::1:59734' responded 200 in 47,7441 ms
2023-10-20 11:38:42.185 +02:00  INF  Executed action method Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.8692ms.
2023-10-20 11:38:42.186 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:38:42.186 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:38:42.186 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:38:42.186 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:38:42.186 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Appartements.DetailAppartementResponse'.
2023-10-20 11:38:42.187 +02:00  INF  Executed action Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api) in 70.1782ms
2023-10-20 11:38:42.187 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:38:42.187 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:38:42.187 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:38:42.187 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:38:42.187 +02:00  INF  Request finished HTTP/1.1 GET https://localhost:44375/Appartements/12 - - - 200 302 application/json;+charset=utf-8 71.8240ms
2023-10-20 11:38:53.979 +02:00  INF  Request starting HTTP/1.1 PUT https://localhost:44375/Appartements/12 application/json 175
2023-10-20 11:38:53.979 +02:00  DBG  1 candidate(s) found for the request path '/Appartements/12'
2023-10-20 11:38:53.979 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)' with route pattern 'appartements/{id:int}' is valid for the request path '/Appartements/12'
2023-10-20 11:38:53.979 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:38:53.980 +02:00  DBG  Successfully validated the token.
2023-10-20 11:38:53.980 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:38:53.980 +02:00  DBG  Authorization was successful.
2023-10-20 11:38:53.980 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:38:53.980 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:38:53.980 +02:00  INF  Route matched with {action = "ModifierUnAppartement", controller = "Appartement"}. Executing controller action with signature System.Threading.Tasks.Task ModifierUnAppartementAsync(Int32, Infeco.Api.Commands.Appartements.ModifierAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AppartementController (Infeco.Api).
2023-10-20 11:38:53.980 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:38:53.981 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:38:53.981 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:38:53.981 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:38:53.981 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:38:53.981 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:38:53.981 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:38:53.981 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-20 11:38:53.981 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-20 11:38:53.981 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:38:53.981 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:38:53.981 +02:00  DBG  Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-20 11:38:53.981 +02:00  DBG  Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-20 11:38:53.982 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand' ...
2023-10-20 11:38:53.982 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand' using the name '' in request data ...
2023-10-20 11:38:53.982 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:38:53.982 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:38:53.983 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand'.
2023-10-20 11:38:53.983 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand'.
2023-10-20 11:38:53.983 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand' ...
2023-10-20 11:38:53.983 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Appartements.ModifierAppartementCommand'.
2023-10-20 11:38:53.983 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:38:53.983 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:38:53.984 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:38:53.984 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:38:54.002 +02:00  INF  Executing action method Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:38:54.004 +02:00  INF  Handling ModifierAppartementCommand
2023-10-20 11:38:54.004 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:38:56.266 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:38:56.266 +02:00  DBG  Creating DbConnection.
2023-10-20 11:38:56.266 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:38:56.266 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:38:56.266 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:38:56.266 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:38:56.266 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:56.266 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:38:56.311 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:38:56.311 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:56.311 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:38:56.311 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:38:56.312 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:02.019 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:02.019 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:39:02.019 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-20 11:39:02.019 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-20 11:39:02.020 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:02.020 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:02.020 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:39:02.020 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:02.020 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:02.021 +02:00  DBG  Executing DbCommand [Parameters=[@p11='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = DateTime), @p7='?' (DbType = Double), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Appartement" SET "Adresse" = @p0, "AgenceImmobiliereId" = @p1, "ComplementAdresse" = @p2, "CreeLe" = @p3, "DepotDeGarantie" = @p4, "Loyer" = @p5, "ModifieLe" = @p6, "NombreDeMetre2" = @p7, "PrixDesCharges" = @p8, "TypeAppartementId" = @p9, "VilleId" = @p10
WHERE "Id" = @p11;
2023-10-20 11:39:02.070 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?' (DbType = DateTime), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = DateTime), @p7='?' (DbType = Double), @p8='?' (DbType = Double), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Appartement" SET "Adresse" = @p0, "AgenceImmobiliereId" = @p1, "ComplementAdresse" = @p2, "CreeLe" = @p3, "DepotDeGarantie" = @p4, "Loyer" = @p5, "ModifieLe" = @p6, "NombreDeMetre2" = @p7, "PrixDesCharges" = @p8, "TypeAppartementId" = @p9, "VilleId" = @p10
WHERE "Id" = @p11;
2023-10-20 11:39:02.070 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:02.070 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:39:02.070 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:02.070 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:02.070 +02:00  DBG  An entity of type 'AppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:02.071 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-20 11:39:02.071 +02:00  INF  Handled Unit
2023-10-20 11:39:02.071 +02:00  INF  Information : PUT https://localhost:44375/Appartements/12 from '::1:59734' responded 200 in 8066,9347 ms
2023-10-20 11:39:02.072 +02:00  INF  Executed action method Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 8069.2287ms.
2023-10-20 11:39:02.072 +02:00  INF  Executed action Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api) in 8090.9558ms
2023-10-20 11:39:02.072 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AppartementController.ModifierUnAppartementAsync (Infeco.Api)'
2023-10-20 11:39:02.073 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:39:02.073 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:02.073 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:02.073 +02:00  INF  Request finished HTTP/1.1 PUT https://localhost:44375/Appartements/12 application/json 175 - 200 - - 8094.1344ms
2023-10-20 11:39:05.658 +02:00  INF  Request starting HTTP/1.1 GET https://localhost:44375/Appartements/12 - -
2023-10-20 11:39:05.658 +02:00  DBG  1 candidate(s) found for the request path '/Appartements/12'
2023-10-20 11:39:05.658 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)' with route pattern 'appartements/{id}' is valid for the request path '/Appartements/12'
2023-10-20 11:39:05.658 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:39:05.658 +02:00  DBG  Successfully validated the token.
2023-10-20 11:39:05.658 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:39:05.658 +02:00  DBG  Authorization was successful.
2023-10-20 11:39:05.658 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:39:05.658 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:39:05.658 +02:00  INF  Route matched with {action = "ObtenirAppartementParId", controller = "Appartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.AppartementViewModel]] ObtenirAppartementParIdAsync(Int32, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AppartementController (Infeco.Api).
2023-10-20 11:39:05.659 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:39:05.659 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:39:05.659 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:39:05.659 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:39:05.659 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:39:05.659 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:39:05.659 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AppartementController (Infeco.Api)
2023-10-20 11:39:05.659 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-20 11:39:05.659 +02:00  DBG  Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-20 11:39:05.659 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:39:05.659 +02:00  DBG  Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-20 11:39:05.659 +02:00  DBG  Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-20 11:39:05.659 +02:00  DBG  Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-20 11:39:05.659 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:39:05.659 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:39:05.659 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:39:05.659 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:39:05.684 +02:00  INF  Executing action method Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:39:05.685 +02:00  INF  Handling ObtenirAppartementParIdQuery
2023-10-20 11:39:05.686 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:39:05.687 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:39:05.687 +02:00  DBG  Creating DbConnection.
2023-10-20 11:39:05.687 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:39:05.687 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:05.687 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:05.687 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:05.687 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:05.687 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:39:05.733 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-20 11:39:05.733 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:05.733 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:39:05.733 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:05.733 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:05.733 +02:00  INF  Handled DetailAppartementResponse
2023-10-20 11:39:05.733 +02:00  INF  Information : GET https://localhost:44375/Appartements/12 from '::1:59734' responded 200 in 48,1518 ms
2023-10-20 11:39:05.733 +02:00  INF  Executed action method Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.3472ms.
2023-10-20 11:39:05.733 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:39:05.733 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:39:05.734 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:39:05.734 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:39:05.734 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Appartements.DetailAppartementResponse'.
2023-10-20 11:39:05.734 +02:00  INF  Executed action Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api) in 75.6815ms
2023-10-20 11:39:05.735 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AppartementController.ObtenirAppartementParIdAsync (Infeco.Api)'
2023-10-20 11:39:05.735 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:39:05.735 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:05.735 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:05.735 +02:00  INF  Request finished HTTP/1.1 GET https://localhost:44375/Appartements/12 - - - 200 303 application/json;+charset=utf-8 77.2372ms
2023-10-20 11:39:13.524 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:39:13.525 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:39:13.525 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:39:13.525 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:39:13.525 +02:00  DBG  Successfully validated the token.
2023-10-20 11:39:13.525 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:39:13.525 +02:00  DBG  Authorization was successful.
2023-10-20 11:39:13.526 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:39:13.526 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:39:13.526 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:39:13.526 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:39:13.526 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:39:13.526 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:39:13.526 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:39:13.526 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:39:13.526 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:39:13.526 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:39:13.526 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:39:13.526 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:39:13.526 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:39:13.526 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:39:13.526 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:39:13.527 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:39:13.527 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:39:13.527 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:39:13.527 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:39:13.527 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:39:13.528 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:39:13.528 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:39:13.528 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:39:13.528 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:39:13.528 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:39:13.528 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:39:13.528 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:39:13.528 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:39:13.528 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:39:13.528 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:39:13.546 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:39:13.546 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:39:13.546 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:39:13.548 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:39:13.549 +02:00  DBG  Creating DbConnection.
2023-10-20 11:39:13.549 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:39:13.549 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:13.549 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:13.549 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:13.549 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:13.549 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:39:13.594 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:39:13.595 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:13.595 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:39:13.595 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:13.596 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:13.597 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:39:13.598 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:13.598 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:39:13.598 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:13.598 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:13.598 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:39:13.645 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:39:13.645 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:13.645 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:39:13.645 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:39:13.645 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:13.645 +02:00  INF  Handled AppartementsResponse
2023-10-20 11:39:13.645 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche from '::1:59734' responded 200 in 99,4105 ms
2023-10-20 11:39:13.645 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 99.6748ms.
2023-10-20 11:39:13.646 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:39:13.646 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:39:13.646 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:39:13.646 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:39:13.646 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 11:39:13.647 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 120.5923ms
2023-10-20 11:39:13.647 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:39:13.647 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:39:13.647 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:39:13.647 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:39:13.647 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 200 486 application/json;+charset=utf-8 122.8122ms
2023-10-20 11:46:46.184 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 11:46:46.446 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 11:46:46.904 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 11:46:47.164 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:46:47.172 +02:00  DBG  Creating DbConnection.
2023-10-20 11:46:47.219 +02:00  DBG  Created DbConnection. (44ms).
2023-10-20 11:46:47.222 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 11:46:47.239 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:46:47.791 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:47.793 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:47.801 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-20 11:46:47.807 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:46:47.811 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 11:46:47.813 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 11:46:47.813 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:46:48.155 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.161 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:46:48.259 +02:00  INF  Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:46:48.260 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.263 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 11:46:48.266 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:46:48.558 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.558 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.559 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:46:48.560 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 11:46:48.560 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:46:48.560 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 11:46:48.560 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:46:48.561 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.561 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:46:48.621 +02:00  INF  Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 11:46:48.621 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.621 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:46:48.642 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:46:48.642 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:46:48.642 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:46:48.642 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:46:48.642 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.643 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:46:48.688 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 11:46:48.692 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.694 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-20 11:46:48.694 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:46:48.694 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:46:48.703 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 11:46:48.705 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:46:48.706 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:46:48.707 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:46:48.709 +02:00  DBG  Hosting starting
2023-10-20 11:46:48.743 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 11:46:48.748 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 11:46:48.755 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 11:46:48.755 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 11:46:48.756 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 11:46:48.756 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 11:46:48.756 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 11:46:48.756 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 11:46:48.757 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 11:46:48.761 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 11:46:48.765 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 11:46:48.766 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 11:46:48.766 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 11:46:48.766 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 11:46:48.766 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 11:46:48.766 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 11:46:48.766 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 11:46:48.772 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 11:46:48.774 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:46:48.775 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 11:46:48.777 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 11:46:48.779 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 11:46:48.780 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 11:46:48.782 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 11:46:48.783 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 11:46:48.856 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 11:46:48.862 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 11:46:48.862 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 11:46:48.862 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 11:46:48.863 +02:00  INF  Hosting environment: Development
2023-10-20 11:46:48.863 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 11:46:48.863 +02:00  DBG  Hosting started
2023-10-20 11:46:48.899 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 11:46:48.927 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 11:46:48.964 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 11:46:48.965 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:46:49.007 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:46:49.128 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 11:46:51.271 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 11:46:51.288 +02:00  DBG  Connection ID "18374686489872171013" disconnecting.
2023-10-20 11:46:51.289 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 11:46:51.291 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2393.0700ms
2023-10-20 11:46:51.295 +02:00  DBG  Connection ID "17509995370006970373" disconnecting.
2023-10-20 11:46:51.296 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.0304ms
2023-10-20 11:46:51.389 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 11:46:51.391 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 11:46:51.391 +02:00  DBG  Request did not match any endpoints
2023-10-20 11:46:51.394 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:46:51.646 +02:00  DBG  Connection ID "18230571318976184329" disconnecting.
2023-10-20 11:46:51.646 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 257.4968ms
2023-10-20 11:46:56.104 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:46:56.108 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:46:56.109 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:46:56.109 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:46:56.281 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 09:43:00', Current time: '20/10/2023 09:46:56'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 11:46:56.297 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 09:43:00', Current time: '20/10/2023 09:46:56'.
2023-10-20 11:46:56.304 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 11:46:56.310 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 11:46:56.313 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 401 - - 208.3185ms
2023-10-20 11:47:02.407 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 11:47:02.407 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 11:47:02.407 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 11:47:02.407 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:47:02.407 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 11:47:02.410 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:47:02.411 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:47:02.438 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 11:47:02.440 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:47:02.440 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:47:02.441 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:47:02.441 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:47:02.441 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:47:02.444 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 11:47:02.446 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 11:47:02.453 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:47:02.456 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:47:02.457 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:47:02.460 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:47:02.532 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:47:02.583 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 11:47:02.598 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:47:02.828 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 11:47:03.070 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:47:03.122 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:47:03.123 +02:00  DBG  Creating DbConnection.
2023-10-20 11:47:03.123 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:47:03.123 +02:00  DBG  Created DbCommand for 'ExecuteReader' (1ms).
2023-10-20 11:47:03.127 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (5ms).
2023-10-20 11:47:03.132 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:03.136 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:03.142 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 11:47:03.208 +02:00  INF  Executed DbCommand (71ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 11:47:03.254 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:03.294 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:03.294 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 85ms reading results.
2023-10-20 11:47:03.297 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:03.297 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:03.305 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 11:47:03.308 +02:00  INF  Information : POST https://localhost:44375/login from '::1:62824' responded 200 in 722,1842 ms
2023-10-20 11:47:03.342 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 806.6621ms.
2023-10-20 11:47:03.348 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:47:03.350 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:47:03.351 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:47:03.353 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:47:03.354 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 11:47:03.447 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 1001.5613ms
2023-10-20 11:47:03.448 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 11:47:03.449 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:47:03.454 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:03.456 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 11:47:03.456 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 1049.4625ms
2023-10-20 11:47:16.107 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:47:16.107 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:47:16.107 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:47:16.107 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:47:16.115 +02:00  DBG  Successfully validated the token.
2023-10-20 11:47:16.117 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:47:16.119 +02:00  DBG  Authorization was successful.
2023-10-20 11:47:16.120 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:47:16.120 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:47:16.127 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:47:16.127 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:47:16.127 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:47:16.127 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:47:16.127 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:47:16.127 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:47:16.128 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:47:16.128 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:47:16.129 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:47:16.130 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:47:16.131 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:47:16.131 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:47:16.162 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:47:16.162 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:47:16.162 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:47:16.172 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:47:16.172 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:47:16.172 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:47:16.177 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:47:16.177 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:47:16.177 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:47:16.178 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:47:16.178 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:47:16.178 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:47:16.179 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:47:16.179 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:47:16.179 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:47:16.180 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:47:16.180 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:47:16.181 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:47:16.181 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:47:16.181 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:47:16.181 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:47:16.181 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:47:16.181 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:47:16.181 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:47:16.182 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:47:16.182 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:47:16.182 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:47:16.182 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:47:16.183 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:47:16.183 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:47:16.183 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:47:16.183 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:47:16.197 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:47:16.201 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:47:16.249 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:47:16.838 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 11:47:16.856 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 11:47:16.858 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 11:47:16.942 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        INNER JOIN Locataire AS l0 ON t.LocataireId == l0.Id
        ORDER BY t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 11:47:16.947 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:47:16.947 +02:00  DBG  Creating DbConnection.
2023-10-20 11:47:16.947 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:47:16.947 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:16.947 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:16.947 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:16.947 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:16.947 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 11:47:16.999 +02:00  INF  Executed DbCommand (51ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 11:47:17.021 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.051 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.053 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.083 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.083 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.097 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:17.098 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:17.098 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 99ms reading results.
2023-10-20 11:47:17.098 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:17.099 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:17.105 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 11:47:17.109 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 11:47:17.134 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 11:47:17.141 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:47:17.141 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:17.141 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:17.141 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:17.141 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:17.141 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:47:17.185 +02:00  INF  Executed DbCommand (43ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:47:17.187 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:17.187 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 11:47:17.187 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:17.187 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:17.199 +02:00  INF  Handled AppartementsResponse
2023-10-20 11:47:17.199 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche from '::1:62824' responded 200 in 997,8911 ms
2023-10-20 11:47:17.200 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1002.3948ms.
2023-10-20 11:47:17.200 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:47:17.200 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:47:17.200 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:47:17.201 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:47:17.201 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 11:47:17.216 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 1089.1256ms
2023-10-20 11:47:17.217 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:47:17.217 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:47:17.217 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:17.217 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:17.217 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 200 486 application/json;+charset=utf-8 1110.5129ms
2023-10-20 11:47:24.762 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33
2023-10-20 11:47:24.763 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:47:24.763 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 11:47:24.763 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:47:24.763 +02:00  DBG  Successfully validated the token.
2023-10-20 11:47:24.763 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 11:47:24.763 +02:00  DBG  Authorization was successful.
2023-10-20 11:47:24.764 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 11:47:24.764 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:47:24.764 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 11:47:24.764 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 11:47:24.764 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 11:47:24.764 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 11:47:24.764 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 11:47:24.764 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 11:47:24.764 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:47:24.765 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 11:47:24.765 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:47:24.765 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 11:47:24.765 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 11:47:24.765 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 11:47:24.766 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:47:24.766 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:47:24.766 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 11:47:24.766 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 11:47:24.766 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:47:24.766 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 11:47:24.766 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 11:47:24.766 +02:00  DBG  Could not find a value in the request with name 'limite' for binding property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 11:47:24.767 +02:00  DBG  Could not find a value in the request with name 'index' for binding property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 11:47:24.767 +02:00  DBG  Could not find a value in the request with name 'champ' for binding property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 11:47:24.767 +02:00  DBG  Could not find a value in the request with name 'ascendant' for binding property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:47:24.767 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 11:47:24.767 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 11:47:24.784 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 11:47:24.785 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 11:47:24.786 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 11:47:42.282 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:47:42.282 +02:00  DBG  Creating DbConnection.
2023-10-20 11:47:42.282 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 11:47:42.282 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:42.282 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:42.282 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:42.282 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:42.282 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 11:47:42.326 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 11:47:42.327 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:42.327 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 11:47:42.327 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:42.327 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:42.330 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 11:47:42.330 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:42.330 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 11:47:42.330 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:42.330 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:42.330 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:47:42.374 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 11:47:42.374 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:42.375 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 11:47:42.375 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 11:47:42.375 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:42.375 +02:00  INF  Handled AppartementsResponse
2023-10-20 11:47:42.375 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche from '::1:62824' responded 200 in 17589,8851 ms
2023-10-20 11:47:42.376 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17591.9637ms.
2023-10-20 11:47:42.377 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 11:47:42.377 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 11:47:42.377 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 11:47:42.377 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 11:47:42.377 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 11:47:42.378 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 17614.0332ms
2023-10-20 11:47:42.379 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 11:47:42.379 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 11:47:42.379 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 11:47:42.379 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 11:47:42.379 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche application/json 33 - 200 486 application/json;+charset=utf-8 17616.9035ms
2023-10-20 12:00:33.097 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 12:00:33.100 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 12:00:33.100 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 12:00:33.100 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 12:00:33.100 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 12:00:33.100 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 12:00:33.100 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 12:00:33.101 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 12:00:33.101 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 12:00:33.101 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 12:00:33.101 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 12:00:33.101 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 12:00:33.101 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 12:00:33.101 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 12:00:33.101 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 12:00:33.102 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:00:33.102 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:00:33.102 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:00:33.102 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:00:33.126 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 12:00:33.140 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 12:00:33.141 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:00:33.142 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:00:33.142 +02:00  DBG  Creating DbConnection.
2023-10-20 12:00:33.142 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 12:00:33.142 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:00:33.142 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:00:33.143 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:00:33.497 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:00:33.497 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 12:00:33.546 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 12:00:33.547 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:00:33.548 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:00:33.548 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 12:00:33.548 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:00:33.549 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:00:33.549 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 12:00:33.549 +02:00  INF  Information : POST https://localhost:44375/login from '::1:64079' responded 200 in 408,4115 ms
2023-10-20 12:00:33.555 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 428.807ms.
2023-10-20 12:00:33.555 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 12:00:33.555 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 12:00:33.555 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 12:00:33.555 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 12:00:33.555 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 12:00:33.556 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 455.0604ms
2023-10-20 12:00:33.556 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 12:00:33.556 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:00:33.556 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:00:33.557 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:00:33.557 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 460.9365ms
2023-10-20 12:01:03.196 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=false application/json 30
2023-10-20 12:01:03.197 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:01:03.197 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:01:03.197 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:01:03.197 +02:00  DBG  Successfully validated the token.
2023-10-20 12:01:03.197 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 12:01:03.197 +02:00  DBG  Authorization was successful.
2023-10-20 12:01:03.199 +02:00  DBG  The request has an origin header: 'https://localhost:44375'.
2023-10-20 12:01:03.200 +02:00  INF  CORS policy execution failed.
2023-10-20 12:01:03.200 +02:00  INF  Request origin https://localhost:44375 does not have permission to access the resource.
2023-10-20 12:01:03.202 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 12:01:03.202 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:01:03.202 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 12:01:03.203 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 12:01:03.203 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 12:01:03.203 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 12:01:03.203 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 12:01:03.203 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 12:01:03.203 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:01:03.203 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:01:03.208 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:01:03.209 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 12:01:03.210 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 12:01:03.210 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 12:01:03.210 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:01:03.210 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:01:03.210 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:01:03.211 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:01:03.211 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:01:03.211 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 12:01:03.211 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 12:01:03.211 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 12:01:03.212 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 12:01:03.212 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 12:01:03.213 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:01:03.213 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:01:03.213 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:01:03.213 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:01:03.213 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:01:03.213 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 12:01:03.213 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 12:01:03.213 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 12:01:03.213 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 12:01:03.214 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 12:01:03.214 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:01:03.214 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:01:03.214 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:01:03.214 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:01:03.214 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:01:03.214 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:01:03.214 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:01:03.214 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:01:03.235 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 12:01:03.236 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 12:01:03.240 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:01:03.243 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderByDescending( => .Locataire.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 12:01:03.244 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 12:01:03.244 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 12:01:03.252 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM LocataireAppartement AS l
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
        ORDER BY l0.Id DESC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 12:01:03.253 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:01:03.253 +02:00  DBG  Creating DbConnection.
2023-10-20 12:01:03.253 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 12:01:03.253 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:03.253 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:03.253 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:01:03.253 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:03.253 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
ORDER BY l0."Id" DESC
LIMIT @__p_2 OFFSET @__p_1
2023-10-20 12:01:03.303 +02:00  INF  Executed DbCommand (50ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
ORDER BY l0."Id" DESC
LIMIT @__p_2 OFFSET @__p_1
2023-10-20 12:01:03.309 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:03.313 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:03.313 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 12:01:03.314 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:03.314 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:01:03.316 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderByDescending( => .Locataire.Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 12:01:03.318 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 12:01:03.320 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 12:01:03.321 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:01:03.321 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:03.321 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:03.321 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:01:03.321 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:03.321 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:01:03.369 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:01:03.369 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:03.369 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 12:01:03.369 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:03.369 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:01:03.369 +02:00  INF  Handled AppartementsResponse
2023-10-20 12:01:03.369 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=false from '::1:64118' responded 200 in 132,7044 ms
2023-10-20 12:01:03.369 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 133.8876ms.
2023-10-20 12:01:03.369 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 12:01:03.371 +02:00  DBG  Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/json"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-10-20 12:01:03.372 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 12:01:03.372 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 12:01:03.373 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 170.0008ms
2023-10-20 12:01:03.373 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:01:03.373 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:01:03.373 +02:00  DBG  Connection ID "18230571331861086219" disconnecting.
2023-10-20 12:01:03.373 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:01:03.373 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:01:03.373 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=false application/json 30 - 200 486 application/json;+charset=utf-8 177.7741ms
2023-10-20 12:01:39.469 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 30
2023-10-20 12:01:39.469 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:01:39.469 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:01:39.469 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:01:39.471 +02:00  DBG  Successfully validated the token.
2023-10-20 12:01:39.471 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 12:01:39.472 +02:00  DBG  Authorization was successful.
2023-10-20 12:01:39.473 +02:00  DBG  The request has an origin header: 'https://localhost:44375'.
2023-10-20 12:01:39.473 +02:00  INF  CORS policy execution failed.
2023-10-20 12:01:39.473 +02:00  INF  Request origin https://localhost:44375 does not have permission to access the resource.
2023-10-20 12:01:39.473 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 12:01:39.473 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:01:39.474 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 12:01:39.474 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 12:01:39.474 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 12:01:39.474 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 12:01:39.474 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 12:01:39.474 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 12:01:39.474 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:01:39.474 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:01:39.475 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:01:39.475 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 12:01:39.475 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 12:01:39.475 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:01:39.476 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:01:39.476 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:01:39.477 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 12:01:39.477 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 12:01:39.477 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 12:01:39.477 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 12:01:39.477 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 12:01:39.477 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:01:39.477 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:01:39.477 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:01:39.478 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:01:39.478 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:01:39.478 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:01:39.478 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:01:39.478 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:01:39.496 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 12:01:39.496 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 12:01:39.497 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:01:39.514 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 12:01:39.515 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 12:01:39.515 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 12:01:39.524 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: LocataireEntite.CreeLe (DateTime) Required, 21], [Property: LocataireEntite.DateNaissance (DateTime?), 22], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 23], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 24], [Property: LocataireEntite.ModifieLe (DateTime?), 25], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 26], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 27], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM LocataireAppartement AS l
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
        ORDER BY l0.Id ASC
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 12:01:39.525 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:01:39.525 +02:00  DBG  Creating DbConnection.
2023-10-20 12:01:39.525 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 12:01:39.525 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:39.525 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:39.525 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:01:39.525 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:39.525 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
ORDER BY l0."Id"
LIMIT @__p_2 OFFSET @__p_1
2023-10-20 12:01:39.572 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
ORDER BY l0."Id"
LIMIT @__p_2 OFFSET @__p_1
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.573 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.574 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:01:39.574 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:39.574 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 12:01:39.574 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:39.574 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:01:39.576 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 12:01:39.578 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 12:01:39.579 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 12:01:39.580 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:01:39.580 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:39.580 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:01:39.580 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:01:39.580 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:39.580 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:01:39.626 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:01:39.627 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:39.627 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 12:01:39.627 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:01:39.627 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:01:39.627 +02:00  INF  Handled AppartementsResponse
2023-10-20 12:01:39.627 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true from '::1:64118' responded 200 in 130,6792 ms
2023-10-20 12:01:39.628 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 131.3649ms.
2023-10-20 12:01:39.628 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 12:01:39.628 +02:00  DBG  Attempting to select an output formatter based on Accept header '["application/json"]' and explicitly specified content types '["application/json"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-10-20 12:01:39.628 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 12:01:39.628 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 12:01:39.630 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 155.5453ms
2023-10-20 12:01:39.630 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:01:39.630 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:01:39.630 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:01:39.630 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:01:39.632 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 30 - 200 486 application/json;+charset=utf-8 162.4986ms
2023-10-20 12:02:11.389 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 12:02:11.389 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:02:11.389 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:02:11.389 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:02:11.423 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 09:57:03', Current time: '20/10/2023 10:02:11'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 12:02:11.424 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 09:57:03', Current time: '20/10/2023 10:02:11'.
2023-10-20 12:02:11.424 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 12:02:11.424 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 12:02:11.425 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 401 - - 36.1952ms
2023-10-20 12:02:22.165 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 12:02:22.165 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 12:02:22.165 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 12:02:22.165 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 12:02:22.165 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 12:02:22.165 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 12:02:22.165 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 12:02:22.165 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 12:02:22.165 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 12:02:22.165 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 12:02:22.165 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 12:02:22.165 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 12:02:22.166 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 12:02:22.166 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 12:02:22.166 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 12:02:22.167 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:02:22.167 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:02:22.167 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:02:22.167 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:02:22.184 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 12:02:22.186 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 12:02:22.187 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:02:22.188 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:02:22.188 +02:00  DBG  Creating DbConnection.
2023-10-20 12:02:22.188 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 12:02:22.188 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:02:22.188 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:02:22.188 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:02:22.188 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:22.188 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 12:02:22.234 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 12:02:22.234 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:22.234 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:22.234 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 12:02:22.234 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:22.234 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:02:22.234 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 12:02:22.234 +02:00  INF  Information : POST https://localhost:44375/login from '::1:64079' responded 200 in 48,0007 ms
2023-10-20 12:02:22.246 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62.7299ms.
2023-10-20 12:02:22.247 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 12:02:22.247 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 12:02:22.247 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 12:02:22.247 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 12:02:22.247 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 12:02:22.248 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 81.9047ms
2023-10-20 12:02:22.248 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 12:02:22.248 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:02:22.248 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:02:22.248 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:02:22.248 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 83.6941ms
2023-10-20 12:02:40.571 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 12:02:40.572 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:02:40.572 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:02:40.573 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:02:40.573 +02:00  DBG  Successfully validated the token.
2023-10-20 12:02:40.573 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 12:02:40.573 +02:00  DBG  Authorization was successful.
2023-10-20 12:02:40.573 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 12:02:40.573 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:02:40.573 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 12:02:40.573 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 12:02:40.573 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 12:02:40.573 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 12:02:40.573 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 12:02:40.573 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 12:02:40.573 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:02:40.574 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:02:40.574 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:02:40.574 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 12:02:40.574 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 12:02:40.574 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 12:02:40.574 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:02:40.574 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:02:40.574 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:02:40.575 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:02:40.575 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:02:40.575 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 12:02:40.575 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 12:02:40.575 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 12:02:40.575 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 12:02:40.575 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 12:02:40.575 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:02:40.575 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:02:40.575 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:02:40.576 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:02:40.576 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:02:40.576 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 12:02:40.576 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 12:02:40.576 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 12:02:40.576 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 12:02:40.576 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 12:02:40.576 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:02:40.576 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:02:40.576 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:02:40.576 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:02:40.577 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:02:40.577 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:02:40.577 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:02:40.577 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:02:40.598 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 12:02:40.599 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 12:02:40.599 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:02:40.603 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:02:40.603 +02:00  DBG  Creating DbConnection.
2023-10-20 12:02:40.603 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 12:02:40.603 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:02:40.603 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:02:40.603 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:02:40.603 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:40.604 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
ORDER BY l0."Id"
LIMIT @__p_2 OFFSET @__p_1
2023-10-20 12:02:40.650 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM "LocataireAppartement" AS l
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
ORDER BY l0."Id"
LIMIT @__p_2 OFFSET @__p_1
2023-10-20 12:02:40.650 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.651 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.651 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.651 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.651 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:02:40.652 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:40.652 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 12:02:40.653 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:40.653 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:02:40.656 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:02:40.656 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:02:40.656 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:02:40.656 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:02:40.657 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:40.657 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:02:40.702 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:02:40.703 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:40.703 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 12:02:40.703 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:02:40.703 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:02:40.703 +02:00  INF  Handled AppartementsResponse
2023-10-20 12:02:40.703 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true from '::1:64079' responded 200 in 104,5496 ms
2023-10-20 12:02:40.703 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 104.8286ms.
2023-10-20 12:02:40.704 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 12:02:40.704 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 12:02:40.704 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 12:02:40.704 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 12:02:40.704 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 12:02:40.704 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 131.0185ms
2023-10-20 12:02:40.705 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:02:40.705 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:02:40.705 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:02:40.705 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:02:40.705 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 200 486 application/json;+charset=utf-8 134.0880ms
2023-10-20 12:03:49.529 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 12:03:49.859 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 12:03:50.597 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 12:03:51.218 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:03:51.236 +02:00  DBG  Creating DbConnection.
2023-10-20 12:03:51.309 +02:00  DBG  Created DbConnection. (69ms).
2023-10-20 12:03:51.316 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 12:03:51.342 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:03:51.924 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:51.926 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:51.939 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (8ms).
2023-10-20 12:03:51.947 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 12:03:51.954 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (4ms).
2023-10-20 12:03:51.956 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (10ms).
2023-10-20 12:03:51.956 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:03:52.347 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.356 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 12:03:52.474 +02:00  INF  Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 12:03:52.477 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.484 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (7ms).
2023-10-20 12:03:52.487 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:03:52.773 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.773 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.774 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:03:52.775 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 12:03:52.775 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 12:03:52.776 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (1ms).
2023-10-20 12:03:52.776 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:03:52.777 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.777 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 12:03:52.826 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 12:03:52.826 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.826 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:03:52.850 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:03:52.851 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:03:52.851 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:03:52.851 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:03:52.851 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.852 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 12:03:52.901 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 12:03:52.907 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.909 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 6ms reading results.
2023-10-20 12:03:52.910 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:03:52.910 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:03:52.922 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 12:03:52.924 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:03:52.926 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:03:52.927 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 12:03:52.932 +02:00  DBG  Hosting starting
2023-10-20 12:03:52.973 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 12:03:52.979 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 12:03:52.987 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 12:03:52.988 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 12:03:52.988 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 12:03:52.988 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 12:03:52.988 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 12:03:52.989 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 12:03:52.989 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 12:03:52.996 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 12:03:53.001 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 12:03:53.002 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 12:03:53.002 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 12:03:53.002 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 12:03:53.002 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 12:03:53.002 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 12:03:53.002 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 12:03:53.010 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 12:03:53.014 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 12:03:53.014 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 12:03:53.017 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 12:03:53.018 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 12:03:53.019 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 12:03:53.021 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 12:03:53.022 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 12:03:53.134 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 12:03:53.134 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 12:03:53.134 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 12:03:53.134 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 12:03:53.134 +02:00  INF  Hosting environment: Development
2023-10-20 12:03:53.134 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 12:03:53.135 +02:00  DBG  Hosting started
2023-10-20 12:03:53.182 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 12:03:53.224 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 12:03:53.273 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 12:03:53.274 +02:00  DBG  Request did not match any endpoints
2023-10-20 12:03:53.324 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 12:03:53.505 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 12:03:55.748 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 12:03:55.771 +02:00  DBG  Connection ID "18374686524231909421" disconnecting.
2023-10-20 12:03:55.772 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 12:03:55.777 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2595.0829ms
2023-10-20 12:03:55.829 +02:00  DBG  Connection ID "18302628921604046896" disconnecting.
2023-10-20 12:03:55.831 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 57.3486ms
2023-10-20 12:03:55.946 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 12:03:55.951 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 12:03:55.952 +02:00  DBG  Request did not match any endpoints
2023-10-20 12:03:55.957 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 12:03:56.418 +02:00  DBG  Connection ID "18374686511347007522" disconnecting.
2023-10-20 12:03:56.418 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 471.7295ms
2023-10-20 12:03:59.149 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 12:03:59.153 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:03:59.153 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 12:03:59.154 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:03:59.352 +02:00  DBG  Successfully validated the token.
2023-10-20 12:03:59.354 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 12:03:59.364 +02:00  DBG  Authorization was successful.
2023-10-20 12:03:59.367 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 12:03:59.368 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:03:59.412 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 12:03:59.414 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 12:03:59.414 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 12:03:59.415 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 12:03:59.415 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 12:03:59.415 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 12:03:59.418 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:03:59.418 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 12:03:59.431 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:03:59.435 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 12:03:59.437 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 12:03:59.437 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 12:03:59.535 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:03:59.535 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:03:59.536 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 12:03:59.549 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 12:03:59.550 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:03:59.551 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 12:03:59.555 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 12:03:59.557 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 12:03:59.559 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 12:03:59.559 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 12:03:59.560 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:03:59.560 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:03:59.560 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 12:03:59.562 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 12:03:59.562 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:03:59.562 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 12:03:59.563 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 12:03:59.563 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 12:03:59.563 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 12:03:59.563 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 12:03:59.564 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:03:59.564 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:03:59.564 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 12:03:59.565 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 12:03:59.565 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:03:59.565 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:03:59.565 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 12:03:59.566 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 12:03:59.642 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 12:03:59.677 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 12:03:59.707 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 12:04:00.911 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .ThenInclude(v => v.TypeAppartement)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 12:04:01.024 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 12:04:01.028 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 12:04:01.028 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 12:04:01.304 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 21] }
            3 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: LocataireEntite.CreeLe (DateTime) Required, 23], [Property: LocataireEntite.DateNaissance (DateTime?), 24], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 25], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 26], [Property: LocataireEntite.ModifieLe (DateTime?), 27], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 28], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 29], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 30] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, t0.Id, t0.Nom, t.Id1, t.CreeLe1, t.DateNaissance, t.IBAN, t.Mail, t.ModifieLe1, t.Nom, t.Prenom, t.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id AS Id1, l0.CreeLe AS CreeLe1, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe AS ModifieLe1, l0.Nom, l0.Prenom, l0.Telephone
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l0.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        LEFT JOIN TypeAppartement AS t0 ON t.TypeAppartementId == t0.Id
        ORDER BY t.Id1 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 12:04:01.363 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:04:01.363 +02:00  DBG  Creating DbConnection.
2023-10-20 12:04:01.363 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 12:04:01.363 +02:00  DBG  Created DbCommand for 'ExecuteReader' (1ms).
2023-10-20 12:04:01.366 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 12:04:01.371 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:04:01.374 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:04:01.379 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
ORDER BY t."Id1"
2023-10-20 12:04:01.453 +02:00  INF  Executed DbCommand (77ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
ORDER BY t."Id1"
2023-10-20 12:04:01.517 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.572 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.576 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.613 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.614 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.622 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.622 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.655 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.655 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.655 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.655 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.656 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.656 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.656 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.656 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 12:04:01.661 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:04:01.662 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 209ms reading results.
2023-10-20 12:04:01.666 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:04:01.666 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:04:01.679 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 12:04:01.685 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 12:04:01.721 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 12:04:01.735 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 12:04:01.735 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:04:01.735 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 12:04:01.735 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 12:04:01.735 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:04:01.736 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:04:01.783 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 12:04:01.785 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:04:01.785 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 12:04:01.785 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 12:04:01.785 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 12:04:01.803 +02:00  INF  Handled AppartementsResponse
2023-10-20 12:04:01.806 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true from '::1:64386' responded 200 in 2126,3737 ms
2023-10-20 12:04:01.817 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2170.8752ms.
2023-10-20 12:04:01.823 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 12:04:01.826 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 12:04:01.827 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 12:04:01.829 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 12:04:01.830 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 12:04:01.895 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 2474.2445ms
2023-10-20 12:04:01.896 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 12:04:01.898 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 12:04:01.902 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 12:04:01.904 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 12:04:01.904 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 200 522 application/json;+charset=utf-8 2755.2214ms
2023-10-20 13:57:38.793 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 13:57:39.043 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 13:57:39.514 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 13:57:39.818 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 13:57:39.835 +02:00  DBG  Creating DbConnection.
2023-10-20 13:57:39.909 +02:00  DBG  Created DbConnection. (72ms).
2023-10-20 13:57:39.913 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 13:57:39.931 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 13:57:40.685 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:40.687 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:40.696 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-20 13:57:40.702 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 13:57:40.707 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 13:57:40.708 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 13:57:40.708 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 13:57:41.082 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.087 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 13:57:41.164 +02:00  INF  Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 13:57:41.165 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.167 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 13:57:41.168 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 13:57:41.451 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.451 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.452 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 13:57:41.453 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 13:57:41.454 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 13:57:41.454 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (1ms).
2023-10-20 13:57:41.455 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 13:57:41.455 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.456 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 13:57:41.502 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 13:57:41.502 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.502 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 13:57:41.522 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 13:57:41.523 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 13:57:41.523 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 13:57:41.523 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 13:57:41.523 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.523 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 13:57:41.571 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 13:57:41.577 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.581 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 7ms reading results.
2023-10-20 13:57:41.581 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 13:57:41.581 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 13:57:41.602 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 13:57:41.604 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 13:57:41.606 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 13:57:41.607 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 13:57:41.611 +02:00  DBG  Hosting starting
2023-10-20 13:57:41.660 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 13:57:41.667 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 13:57:41.677 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 13:57:41.678 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 13:57:41.679 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 13:57:41.679 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 13:57:41.680 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 13:57:41.680 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 13:57:41.681 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 13:57:41.686 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 13:57:41.691 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 13:57:41.691 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 13:57:41.691 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 13:57:41.692 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 13:57:41.692 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 13:57:41.692 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 13:57:41.692 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 13:57:41.701 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 13:57:41.705 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 13:57:41.706 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 13:57:41.708 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 13:57:41.709 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 13:57:41.711 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 13:57:41.713 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 13:57:41.714 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 13:57:41.815 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 13:57:41.815 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 13:57:41.815 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 13:57:41.816 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 13:57:41.816 +02:00  INF  Hosting environment: Development
2023-10-20 13:57:41.816 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 13:57:41.816 +02:00  DBG  Hosting started
2023-10-20 13:57:41.862 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 13:57:41.902 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 13:57:41.958 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 13:57:41.958 +02:00  DBG  Request did not match any endpoints
2023-10-20 13:57:42.005 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 13:57:42.127 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 13:57:44.286 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 13:57:44.299 +02:00  DBG  Connection ID "17437937775969042438" disconnecting.
2023-10-20 13:57:44.300 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 13:57:44.302 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2441.8090ms
2023-10-20 13:57:44.307 +02:00  DBG  Connection ID "17437937775969042440" disconnecting.
2023-10-20 13:57:44.307 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.5883ms
2023-10-20 13:57:44.375 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 13:57:44.378 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 13:57:44.378 +02:00  DBG  Request did not match any endpoints
2023-10-20 13:57:44.380 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 13:57:44.588 +02:00  DBG  Connection ID "17437937775969042442" disconnecting.
2023-10-20 13:57:44.589 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 213.6286ms
2023-10-20 14:01:19.162 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 14:01:19.165 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 14:01:19.165 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 14:01:19.166 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:01:19.168 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:01:19.173 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:01:19.174 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:01:19.199 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 14:01:19.201 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:01:19.201 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:01:19.201 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:01:19.201 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:01:19.202 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:01:19.203 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:01:19.206 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:01:19.212 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:01:19.214 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:01:19.214 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:01:19.217 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:01:19.276 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:01:19.313 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 14:01:19.344 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:01:19.512 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 14:01:19.673 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 14:01:19.706 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:01:19.706 +02:00  DBG  Creating DbConnection.
2023-10-20 14:01:19.706 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:01:19.707 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:01:19.709 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 14:01:19.712 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:01:19.714 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:01:19.716 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:01:19.776 +02:00  INF  Executed DbCommand (61ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:01:19.813 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:01:19.856 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:01:19.857 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 80ms reading results.
2023-10-20 14:01:19.859 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:01:19.860 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:01:19.868 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 14:01:19.870 +02:00  INF  Information : POST https://localhost:44375/login from '::1:56369' responded 200 in 554,5909 ms
2023-10-20 14:01:20.024 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 742.6738ms.
2023-10-20 14:01:20.031 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 14:01:20.033 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 14:01:20.034 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 14:01:20.035 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 14:01:20.035 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 14:01:20.117 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 912.6267ms
2023-10-20 14:01:20.117 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:01:20.118 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:01:20.121 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:01:20.123 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:01:20.123 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 961.5547ms
2023-10-20 14:01:31.565 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:01:31.565 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:01:31.565 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:01:31.566 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:01:31.601 +02:00  DBG  Successfully validated the token.
2023-10-20 14:01:31.604 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:01:31.610 +02:00  DBG  Authorization was successful.
2023-10-20 14:01:31.610 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:01:31.611 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:01:31.616 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:01:31.617 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:01:31.617 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:01:31.617 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:01:31.617 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:01:31.617 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:01:31.617 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:01:31.618 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:01:31.623 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:01:31.624 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:01:31.625 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:01:31.625 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:01:31.656 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:01:31.656 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:01:31.656 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:01:31.665 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:01:31.665 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:01:31.666 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:01:31.671 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:01:31.672 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:01:31.673 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:01:31.673 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:01:31.674 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:01:31.674 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:01:31.674 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:01:31.676 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:01:31.676 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:01:31.676 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:01:31.677 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:01:31.677 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:01:31.677 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:01:31.678 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:01:31.678 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:01:31.678 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:01:31.678 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:01:31.679 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:01:31.679 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:01:31.679 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:01:31.679 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:01:31.680 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:01:31.696 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:01:31.699 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:01:31.744 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:01:32.411 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 793.7388ms
2023-10-20 14:01:32.462 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:01:32.573 +02:00  ERR  An unhandled exception has occurred while executing the request.System.InvalidOperationException: No generic method 'Where' on type 'System.Linq.Queryable' is compatible with the supplied type arguments and arguments. No type arguments should be provided if the method is non-generic. 
   at System.Linq.Expressions.Expression.FindMethod(Type type, String methodName, Type[] typeArgs, Expression[] args, BindingFlags flags)
   at System.Linq.Expressions.Expression.Call(Type type, String methodName, Type[] typeArguments, Expression[] arguments)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.Where(IQueryable source, LambdaExpression lambda)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.Where[TSource](IQueryable`1 source, LambdaExpression lambda)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:01:32.597 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:01:32.597 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 1032.0881ms
2023-10-20 14:07:12.708 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:07:13.043 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:07:13.643 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:07:13.958 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:07:13.967 +02:00  DBG  Creating DbConnection.
2023-10-20 14:07:14.010 +02:00  DBG  Created DbConnection. (41ms).
2023-10-20 14:07:14.015 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:07:14.030 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:07:14.601 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:14.604 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:14.616 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (8ms).
2023-10-20 14:07:14.622 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:07:14.627 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 14:07:14.628 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 14:07:14.628 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:07:15.003 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.011 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:07:15.093 +02:00  INF  Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:07:15.094 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.096 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:07:15.097 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:07:15.386 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.386 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.386 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:07:15.387 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:07:15.387 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:07:15.387 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:07:15.387 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:07:15.387 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.388 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:07:15.436 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:07:15.436 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.436 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:07:15.452 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:07:15.452 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:07:15.452 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:07:15.452 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:07:15.452 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.453 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:07:15.500 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:07:15.504 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.506 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 14:07:15.506 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:07:15.506 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:07:15.514 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:07:15.516 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:07:15.517 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:07:15.518 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:07:15.521 +02:00  DBG  Hosting starting
2023-10-20 14:07:15.549 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:07:15.553 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:07:15.558 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:07:15.559 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:07:15.559 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:07:15.559 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:07:15.560 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:07:15.560 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:07:15.560 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:07:15.563 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:07:15.567 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:07:15.573 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:07:15.575 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:07:15.576 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:07:15.578 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:07:15.580 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:07:15.581 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:07:15.583 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:07:15.585 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:07:15.652 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:07:15.657 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:07:15.657 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:07:15.658 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:07:15.658 +02:00  INF  Hosting environment: Development
2023-10-20 14:07:15.658 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:07:15.658 +02:00  DBG  Hosting started
2023-10-20 14:07:15.695 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:07:15.722 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:07:15.758 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:07:15.758 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:07:15.795 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:07:15.942 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:07:18.175 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:07:18.195 +02:00  DBG  Connection ID "18374686502757072919" disconnecting.
2023-10-20 14:07:18.196 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:07:18.199 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2504.7686ms
2023-10-20 14:07:18.247 +02:00  DBG  Connection ID "18374686489872171020" disconnecting.
2023-10-20 14:07:18.248 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 10.6518ms
2023-10-20 14:07:18.313 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:07:18.315 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:07:18.315 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:07:18.320 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:07:18.683 +02:00  DBG  Connection ID "18302628921604046901" disconnecting.
2023-10-20 14:07:18.683 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 370.3545ms
2023-10-20 14:09:18.924 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:09:18.929 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:09:18.930 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:09:18.931 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:09:19.111 +02:00  DBG  Successfully validated the token.
2023-10-20 14:09:19.113 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:09:19.120 +02:00  DBG  Authorization was successful.
2023-10-20 14:09:19.122 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:09:19.123 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:09:19.153 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:09:19.154 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:09:19.155 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:09:19.155 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:09:19.155 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:09:19.155 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:09:19.158 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:09:19.159 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:09:19.169 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:09:19.172 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:09:19.174 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:09:19.174 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:09:19.242 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:09:19.242 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:09:19.242 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:09:19.254 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:09:19.255 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:09:19.256 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:09:19.261 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:09:19.263 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:09:19.264 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:09:19.264 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:09:19.265 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:09:19.265 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:09:19.265 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:09:19.267 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:09:19.267 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:09:19.267 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:09:19.268 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:09:19.268 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:09:19.268 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:09:19.269 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:09:19.269 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:09:19.269 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:09:19.269 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:09:19.270 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:09:19.270 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:09:19.271 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:09:19.271 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:09:19.271 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:09:19.348 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:09:19.391 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:09:19.434 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:09:21.141 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 1981.4896ms
2023-10-20 14:09:21.197 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:09:21.323 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:09:21.360 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:09:21.363 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 2438.0727ms
2023-10-20 14:10:00.658 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:10:00.658 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:10:00.658 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:10:00.658 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:10:00.659 +02:00  DBG  Successfully validated the token.
2023-10-20 14:10:00.659 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:10:00.661 +02:00  DBG  Authorization was successful.
2023-10-20 14:10:00.662 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:10:00.662 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:10:00.670 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:10:00.670 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:10:00.670 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:10:00.670 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:10:00.670 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:10:00.670 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:10:00.671 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:10:00.671 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:10:00.671 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:10:00.672 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:10:00.672 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:10:00.672 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:10:00.672 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:10:00.672 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:10:00.672 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:10:00.672 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:10:00.672 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:10:00.672 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:10:00.672 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:10:00.673 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:10:00.673 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:10:00.687 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:10:00.688 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:10:00.738 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:10:12.308 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 11637.0455ms
2023-10-20 14:10:12.364 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:10:12.486 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:10:12.492 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:10:12.492 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 11833.9537ms
2023-10-20 14:10:25.019 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:10:25.019 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:10:25.019 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:10:25.019 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:10:25.020 +02:00  DBG  Successfully validated the token.
2023-10-20 14:10:25.020 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:10:25.021 +02:00  DBG  Authorization was successful.
2023-10-20 14:10:25.022 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:10:25.022 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:10:25.022 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:10:25.022 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:10:25.022 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:10:25.022 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:10:25.022 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:10:25.022 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:10:25.022 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:10:25.023 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:10:25.023 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:10:25.023 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:10:25.023 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:10:25.023 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:10:25.024 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:10:25.024 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:10:25.024 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:10:25.024 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:10:25.024 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:10:25.024 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:10:25.024 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:10:25.024 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:10:25.024 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:10:25.024 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:10:25.024 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:10:25.025 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:10:25.025 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:10:25.026 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:10:25.026 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:10:25.048 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:10:25.049 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:10:25.051 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:13:09.869 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 164846.4539ms
2023-10-20 14:13:09.932 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:13:10.048 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:13:10.051 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:13:10.051 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 165032.5037ms
2023-10-20 14:15:24.802 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:15:25.032 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:15:25.476 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:15:25.740 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:15:25.749 +02:00  DBG  Creating DbConnection.
2023-10-20 14:15:25.792 +02:00  DBG  Created DbConnection. (41ms).
2023-10-20 14:15:25.796 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:15:25.811 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:26.415 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:26.417 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:26.426 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-20 14:15:26.431 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:15:26.438 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 14:15:26.439 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (8ms).
2023-10-20 14:15:26.440 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:26.799 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:26.805 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:15:26.882 +02:00  INF  Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:15:26.883 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:26.884 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:15:26.885 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:27.183 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.184 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.185 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:15:27.186 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:15:27.186 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:15:27.187 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:15:27.187 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:27.188 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.188 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:15:27.236 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:15:27.236 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.236 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:15:27.281 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:15:27.281 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:15:27.281 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:15:27.281 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:27.281 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.282 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:15:27.335 +02:00  INF  Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:15:27.343 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.346 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 9ms reading results.
2023-10-20 14:15:27.346 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:27.346 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:15:27.369 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:15:27.373 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:15:27.378 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:27.379 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 14:15:27.386 +02:00  DBG  Hosting starting
2023-10-20 14:15:27.438 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:15:27.449 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:15:27.462 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:15:27.463 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:15:27.464 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:15:27.464 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:15:27.465 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:15:27.465 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:15:27.466 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:15:27.473 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:15:27.479 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:15:27.480 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:15:27.480 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:15:27.480 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:15:27.480 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:15:27.480 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:15:27.480 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:15:27.489 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:15:27.493 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:15:27.494 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:15:27.496 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:15:27.497 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:15:27.499 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:15:27.500 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:15:27.501 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:15:27.587 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:15:27.592 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:15:27.592 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:15:27.593 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:15:27.593 +02:00  INF  Hosting environment: Development
2023-10-20 14:15:27.593 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:15:27.593 +02:00  DBG  Hosting started
2023-10-20 14:15:27.627 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:15:27.655 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:15:27.692 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:15:27.693 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:15:27.730 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:15:27.827 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:15:29.973 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:15:29.982 +02:00  DBG  Connection ID "18230571293206380562" disconnecting.
2023-10-20 14:15:29.984 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2357.5111ms
2023-10-20 14:15:29.984 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:15:29.995 +02:00  DBG  Connection ID "18230571336156053552" disconnecting.
2023-10-20 14:15:29.996 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.2142ms
2023-10-20 14:15:30.068 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:15:30.070 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:15:30.070 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:15:30.074 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:15:30.291 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 222.2509ms
2023-10-20 14:15:30.295 +02:00  DBG  Connection ID "18374686489872171022" disconnecting.
2023-10-20 14:15:47.880 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:15:47.883 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:15:47.884 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:15:47.885 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:15:48.053 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 12:11:19', Current time: '20/10/2023 12:15:47'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 14:15:48.068 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 12:11:19', Current time: '20/10/2023 12:15:47'.
2023-10-20 14:15:48.074 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 14:15:48.080 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 14:15:48.082 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 401 - - 201.7081ms
2023-10-20 14:15:54.887 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 14:15:54.887 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 14:15:54.887 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 14:15:54.888 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:15:54.888 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:15:54.891 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:15:54.893 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:15:54.919 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 14:15:54.920 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:15:54.921 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:15:54.921 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:15:54.921 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:15:54.921 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:15:54.923 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:15:54.924 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:15:54.930 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:15:54.933 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:15:54.933 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:15:54.936 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:15:55.002 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:15:55.054 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 14:15:55.091 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:15:55.305 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 14:15:55.566 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 14:15:55.627 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:15:55.628 +02:00  DBG  Creating DbConnection.
2023-10-20 14:15:55.629 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:15:55.629 +02:00  DBG  Created DbCommand for 'ExecuteReader' (1ms).
2023-10-20 14:15:55.633 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (6ms).
2023-10-20 14:15:55.638 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:55.641 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:55.647 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:15:55.723 +02:00  INF  Executed DbCommand (81ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:15:55.768 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:15:55.812 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:55.813 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 89ms reading results.
2023-10-20 14:15:55.816 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:15:55.816 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:15:55.825 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 14:15:55.828 +02:00  INF  Information : POST https://localhost:44375/login from '::1:57614' responded 200 in 770,9621 ms
2023-10-20 14:15:55.865 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 860.3766ms.
2023-10-20 14:15:55.870 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 14:15:55.871 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 14:15:55.872 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 14:15:55.873 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 14:15:55.874 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 14:15:55.954 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 1029.3049ms
2023-10-20 14:15:55.955 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:15:55.957 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:15:55.961 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:15:55.962 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:15:55.963 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 1075.6183ms
2023-10-20 14:16:10.204 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:16:10.204 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:16:10.204 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:16:10.204 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:16:10.212 +02:00  DBG  Successfully validated the token.
2023-10-20 14:16:10.214 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:16:10.215 +02:00  DBG  Authorization was successful.
2023-10-20 14:16:10.216 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:16:10.216 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:16:10.223 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:16:10.223 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:16:10.223 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:16:10.224 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:16:10.224 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:16:10.224 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:16:10.224 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:16:10.224 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:16:10.228 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:16:10.230 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:16:10.231 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:16:10.231 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:16:10.263 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:16:10.263 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:16:10.263 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:16:10.271 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:16:10.272 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:16:10.272 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:16:10.276 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:16:10.277 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:16:10.278 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:16:10.278 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:16:10.279 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:16:10.279 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:16:10.279 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:16:10.280 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:16:10.280 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:16:10.280 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:16:10.281 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:16:10.281 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:16:10.281 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:16:10.281 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:16:10.281 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:16:10.281 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:16:10.281 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:16:10.282 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:16:10.282 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:16:10.282 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:16:10.282 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:16:10.282 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:16:10.297 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:16:10.300 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:16:10.344 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:16:27.387 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 17163.1379ms
2023-10-20 14:16:27.438 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:16:27.550 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:16:27.563 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:16:27.563 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 17359.2370ms
2023-10-20 14:18:19.951 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:18:20.174 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:18:20.602 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:18:20.850 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:18:20.858 +02:00  DBG  Creating DbConnection.
2023-10-20 14:18:20.899 +02:00  DBG  Created DbConnection. (39ms).
2023-10-20 14:18:20.902 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:18:20.917 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:18:21.408 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:21.410 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:21.419 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-20 14:18:21.423 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:18:21.428 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-20 14:18:21.429 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-20 14:18:21.429 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:18:21.816 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:21.821 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:18:21.894 +02:00  INF  Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:18:21.895 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:21.896 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:18:21.897 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:18:22.211 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.211 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.212 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:18:22.212 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:18:22.213 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:18:22.213 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:18:22.213 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:18:22.213 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.214 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:18:22.260 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:18:22.260 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.260 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:18:22.284 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:18:22.284 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:18:22.284 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:18:22.284 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:18:22.284 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.285 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:18:22.332 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:18:22.336 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.338 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 14:18:22.338 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:18:22.339 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:18:22.349 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:18:22.350 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:18:22.352 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:18:22.352 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:18:22.355 +02:00  DBG  Hosting starting
2023-10-20 14:18:22.386 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:18:22.390 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:18:22.397 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:18:22.398 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:18:22.398 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:18:22.399 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:18:22.399 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:18:22.399 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:18:22.399 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:18:22.403 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:18:22.409 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:18:22.409 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:18:22.409 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:18:22.409 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:18:22.410 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:18:22.410 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:18:22.410 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:18:22.415 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:18:22.417 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:18:22.417 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:18:22.419 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:18:22.420 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:18:22.421 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:18:22.423 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:18:22.423 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:18:22.488 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:18:22.489 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:18:22.494 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:18:22.494 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:18:22.494 +02:00  INF  Hosting environment: Development
2023-10-20 14:18:22.494 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:18:22.494 +02:00  DBG  Hosting started
2023-10-20 14:18:22.531 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:18:22.556 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:18:22.590 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:18:22.590 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:18:22.628 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:18:22.732 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:18:24.884 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:18:24.893 +02:00  DBG  Connection ID "18230571327566118913" disconnecting.
2023-10-20 14:18:24.896 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:18:24.896 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2365.9893ms
2023-10-20 14:18:24.908 +02:00  DBG  Connection ID "18302628908719144978" disconnecting.
2023-10-20 14:18:24.909 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.5864ms
2023-10-20 14:18:24.983 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:18:24.985 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:18:24.985 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:18:24.988 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:18:25.183 +02:00  DBG  Connection ID "17509995370006970378" disconnecting.
2023-10-20 14:18:25.184 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 200.3227ms
2023-10-20 14:18:27.245 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:18:27.248 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:18:27.248 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:18:27.249 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:18:27.379 +02:00  DBG  Successfully validated the token.
2023-10-20 14:18:27.380 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:18:27.386 +02:00  DBG  Authorization was successful.
2023-10-20 14:18:27.388 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:18:27.389 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:18:27.416 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:18:27.417 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:18:27.417 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:18:27.417 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:18:27.417 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:18:27.417 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:18:27.419 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:18:27.420 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:18:27.427 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:18:27.430 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:18:27.431 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:18:27.431 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:18:27.494 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:18:27.494 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:18:27.494 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:18:27.502 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:18:27.503 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:18:27.503 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:18:27.507 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:18:27.508 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:18:27.509 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:18:27.509 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:18:27.510 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:18:27.510 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:18:27.510 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:18:27.511 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:18:27.511 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:18:27.511 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:18:27.512 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:18:27.512 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:18:27.512 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:18:27.512 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:18:27.512 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:18:27.512 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:18:27.512 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:18:27.514 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:18:27.514 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:18:27.515 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:18:27.522 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:18:27.528 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:18:27.587 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:18:27.610 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:18:27.630 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:18:34.342 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 6922.1879ms
2023-10-20 14:18:34.397 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:18:34.522 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:18:34.549 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:18:34.550 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 7305.0035ms
2023-10-20 14:22:41.396 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:22:41.785 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:22:42.303 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:22:42.542 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:22:42.550 +02:00  DBG  Creating DbConnection.
2023-10-20 14:22:42.596 +02:00  DBG  Created DbConnection. (43ms).
2023-10-20 14:22:42.598 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:22:42.614 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:43.160 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:43.166 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:43.184 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (13ms).
2023-10-20 14:22:43.194 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:22:43.206 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (4ms).
2023-10-20 14:22:43.209 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (15ms).
2023-10-20 14:22:43.210 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:43.714 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:43.724 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:22:43.811 +02:00  INF  Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:22:43.812 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:43.814 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:22:43.815 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:44.100 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.100 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.100 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:22:44.101 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:22:44.101 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:22:44.101 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:22:44.101 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:44.102 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.102 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:22:44.150 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:22:44.150 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.150 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:22:44.176 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:22:44.176 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:22:44.176 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:22:44.177 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:44.177 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.177 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:22:44.224 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:22:44.232 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.235 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 9ms reading results.
2023-10-20 14:22:44.235 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:44.236 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:22:44.249 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:22:44.251 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:22:44.252 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:44.253 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:22:44.257 +02:00  DBG  Hosting starting
2023-10-20 14:22:44.292 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:22:44.297 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:22:44.304 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:22:44.305 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:22:44.305 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:22:44.305 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:22:44.305 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:22:44.306 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:22:44.306 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:22:44.310 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:22:44.314 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:22:44.320 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:22:44.324 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:22:44.325 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:22:44.327 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:22:44.328 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:22:44.330 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:22:44.332 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:22:44.333 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:22:44.422 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:22:44.422 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:22:44.423 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:22:44.423 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:22:44.424 +02:00  INF  Hosting environment: Development
2023-10-20 14:22:44.424 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:22:44.424 +02:00  DBG  Hosting started
2023-10-20 14:22:44.468 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:22:44.503 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:22:44.549 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:22:44.549 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:22:44.593 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:22:44.711 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:22:46.862 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:22:46.871 +02:00  DBG  Connection ID "18302628921604046910" disconnecting.
2023-10-20 14:22:46.873 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2407.4210ms
2023-10-20 14:22:46.873 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:22:46.888 +02:00  DBG  Connection ID "18230571306091282443" disconnecting.
2023-10-20 14:22:46.888 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.9494ms
2023-10-20 14:22:46.960 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:22:46.963 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:22:46.963 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:22:46.965 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:22:47.239 +02:00  DBG  Connection ID "18302628887244308524" disconnecting.
2023-10-20 14:22:47.239 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 278.8985ms
2023-10-20 14:22:47.591 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:22:47.595 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:22:47.595 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:22:47.596 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:22:47.730 +02:00  DBG  Successfully validated the token.
2023-10-20 14:22:47.732 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:22:47.738 +02:00  DBG  Authorization was successful.
2023-10-20 14:22:47.740 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:22:47.740 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:22:47.766 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:22:47.767 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:22:47.767 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:22:47.767 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:22:47.767 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:22:47.768 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:22:47.770 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:22:47.771 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:22:47.778 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:22:47.780 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:22:47.781 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:22:47.781 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:22:47.841 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:22:47.841 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:22:47.841 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:22:47.850 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:22:47.851 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:22:47.852 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:22:47.856 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:22:47.857 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:22:47.858 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:22:47.858 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:22:47.858 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:22:47.858 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:22:47.858 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:22:47.859 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:22:47.859 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:22:47.859 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:22:47.860 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:22:47.860 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:22:47.860 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:22:47.860 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:22:47.861 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:22:47.861 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:22:47.861 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:22:47.861 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:22:47.861 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:22:47.862 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:22:47.862 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:22:47.862 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:22:47.924 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:22:47.950 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:22:47.974 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:22:48.108 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.TypeAppartement)
    .Include(u => u.Ville)
    .Include(u => u.LocataireAppartement)
    .ThenInclude(u => u.Locataire)'
2023-10-20 14:22:48.186 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 14:22:48.187 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 14:22:48.188 +02:00  DBG  Including navigation: 'AppartementEntite.LocataireAppartement'.
2023-10-20 14:22:48.191 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 14:22:48.404 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
            1 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 13] }
            2 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: VilleEntite.CodePostal (string) Required, 15], [Property: VilleEntite.CreeLe (DateTime) Required, 16], [Property: VilleEntite.ModifieLe (DateTime?), 17], [Property: VilleEntite.Nom (string) Required MaxLength(255), 18] }
            3 -> 0
            4 -> 12
            5 -> 14
            6 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 20], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 21], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 22], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 23], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 24], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 25], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 26] }
            7 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
            8 -> 19
            9 -> 27
        SELECT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, t.Id, t.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t0.Id, t0.AppartementId, t0.CreeLe, t0.DateEntree, t0.DateSortie, t0.DepotDeGarantieRegle, t0.LocataireId, t0.ModifieLe, t0.Id0, t0.CreeLe0, t0.DateNaissance, t0.IBAN, t0.Mail, t0.ModifieLe0, t0.Nom, t0.Prenom, t0.Telephone
        FROM Appartement AS a
        LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
        INNER JOIN Ville AS v ON a.VilleId == v.Id
        LEFT JOIN 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id AS Id0, l0.CreeLe AS CreeLe0, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe AS ModifieLe0, l0.Nom, l0.Prenom, l0.Telephone
            FROM LocataireAppartement AS l
            INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        ) AS t0 ON a.Id == t0.AppartementId
        ORDER BY a.Id ASC, t.Id ASC, v.Id ASC, t0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 14:22:48.431 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:22:48.432 +02:00  DBG  Creating DbConnection.
2023-10-20 14:22:48.432 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:22:48.432 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:22:48.432 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:22:48.434 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:22:48.436 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:48.437 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", t."Id", t."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t0."Id", t0."AppartementId", t0."CreeLe", t0."DateEntree", t0."DateSortie", t0."DepotDeGarantieRegle", t0."LocataireId", t0."ModifieLe", t0."Id0", t0."CreeLe0", t0."DateNaissance", t0."IBAN", t0."Mail", t0."ModifieLe0", t0."Nom", t0."Prenom", t0."Telephone"
FROM "Appartement" AS a
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id" AS "Id0", l0."CreeLe" AS "CreeLe0", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe0", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
) AS t0 ON a."Id" = t0."AppartementId"
ORDER BY a."Id", t."Id", v."Id", t0."Id"
2023-10-20 14:22:48.492 +02:00  INF  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", t."Id", t."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t0."Id", t0."AppartementId", t0."CreeLe", t0."DateEntree", t0."DateSortie", t0."DepotDeGarantieRegle", t0."LocataireId", t0."ModifieLe", t0."Id0", t0."CreeLe0", t0."DateNaissance", t0."IBAN", t0."Mail", t0."ModifieLe0", t0."Nom", t0."Prenom", t0."Telephone"
FROM "Appartement" AS a
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id" AS "Id0", l0."CreeLe" AS "CreeLe0", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe0", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
) AS t0 ON a."Id" = t0."AppartementId"
ORDER BY a."Id", t."Id", v."Id", t0."Id"
2023-10-20 14:22:48.527 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.574 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.576 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.583 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.583 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.620 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.639 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.639 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.654 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.654 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.654 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.656 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.657 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.657 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.657 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.657 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:22:48.661 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:48.661 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 168ms reading results.
2023-10-20 14:22:48.664 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:22:48.665 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:28:51.170 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:28:51.379 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:28:51.783 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:28:52.008 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:28:52.017 +02:00  DBG  Creating DbConnection.
2023-10-20 14:28:52.058 +02:00  DBG  Created DbConnection. (38ms).
2023-10-20 14:28:52.062 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:28:52.078 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:28:52.606 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:52.608 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:52.617 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-20 14:28:52.623 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:28:52.628 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 14:28:52.629 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 14:28:52.629 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:28:53.000 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.006 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:28:53.080 +02:00  INF  Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:28:53.081 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.083 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:28:53.084 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:28:53.372 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.372 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.373 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:28:53.373 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:28:53.373 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:28:53.373 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:28:53.374 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:28:53.374 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.374 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:28:53.424 +02:00  INF  Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:28:53.424 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.424 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:28:53.440 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:28:53.440 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:28:53.440 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:28:53.440 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:28:53.440 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.440 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:28:53.487 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:28:53.490 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.494 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 14:28:53.494 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:28:53.495 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:28:53.518 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:28:53.526 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:28:53.535 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:28:53.538 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (3ms).
2023-10-20 14:28:53.548 +02:00  DBG  Hosting starting
2023-10-20 14:28:53.601 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:28:53.610 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:28:53.625 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:28:53.626 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:28:53.627 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:28:53.628 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:28:53.628 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:28:53.629 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:28:53.629 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:28:53.637 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:28:53.647 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:28:53.648 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:28:53.649 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:28:53.649 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:28:53.650 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:28:53.650 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:28:53.651 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:28:53.674 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:28:53.682 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:28:53.684 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:28:53.688 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:28:53.691 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:28:53.694 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:28:53.700 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:28:53.703 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:28:53.849 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:28:53.856 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:28:53.856 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:28:53.857 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:28:53.857 +02:00  INF  Hosting environment: Development
2023-10-20 14:28:53.857 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:28:53.858 +02:00  DBG  Hosting started
2023-10-20 14:28:53.899 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:28:53.929 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:28:53.979 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:28:53.979 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:28:54.023 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:28:54.133 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:28:56.288 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:28:56.296 +02:00  DBG  Connection ID "18302628908719144980" disconnecting.
2023-10-20 14:28:56.298 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2400.9761ms
2023-10-20 14:28:56.298 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:28:56.312 +02:00  DBG  Connection ID "17437937775969042444" disconnecting.
2023-10-20 14:28:56.312 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 4.4990ms
2023-10-20 14:28:56.383 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:28:56.385 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:28:56.385 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:28:56.386 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:28:56.584 +02:00  DBG  Connection ID "17437937775969042446" disconnecting.
2023-10-20 14:28:56.584 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 200.8871ms
2023-10-20 14:29:02.533 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:29:02.537 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:29:02.538 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:29:02.538 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:02.702 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 12:25:55', Current time: '20/10/2023 12:29:02'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 14:29:02.720 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 12:25:55', Current time: '20/10/2023 12:29:02'.
2023-10-20 14:29:02.729 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 14:29:02.737 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 14:29:02.738 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 401 - - 205.0346ms
2023-10-20 14:29:09.788 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 14:29:09.788 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 14:29:09.788 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 14:29:09.788 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:29:09.788 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:29:09.791 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:29:09.792 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:29:09.815 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 14:29:09.817 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:29:09.817 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:29:09.817 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:29:09.817 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:29:09.817 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:29:09.819 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:29:09.820 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:29:09.826 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:29:09.828 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:29:09.828 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:29:09.830 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:29:09.882 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:29:09.911 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 14:29:09.922 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:29:10.065 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 14:29:10.213 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 14:29:10.243 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:29:10.244 +02:00  DBG  Creating DbConnection.
2023-10-20 14:29:10.245 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:29:10.245 +02:00  DBG  Created DbCommand for 'ExecuteReader' (2ms).
2023-10-20 14:29:10.247 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (4ms).
2023-10-20 14:29:10.250 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:29:10.251 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:29:10.254 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:29:10.316 +02:00  INF  Executed DbCommand (64ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:29:10.346 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:29:10.378 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:29:10.379 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 62ms reading results.
2023-10-20 14:29:10.381 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:29:10.382 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:29:10.392 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 14:29:10.396 +02:00  INF  Information : POST https://localhost:44375/login from '::1:58761' responded 200 in 481,1830 ms
2023-10-20 14:29:10.429 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 543.8863ms.
2023-10-20 14:29:10.434 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 14:29:10.435 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 14:29:10.436 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 14:29:10.437 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 14:29:10.437 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 14:29:10.521 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 701.1546ms
2023-10-20 14:29:10.522 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:29:10.523 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:29:10.526 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:29:10.528 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:29:10.528 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 740.6624ms
2023-10-20 14:29:21.865 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:29:21.865 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:29:21.866 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:29:21.866 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:21.873 +02:00  DBG  Successfully validated the token.
2023-10-20 14:29:21.875 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:29:21.877 +02:00  DBG  Authorization was successful.
2023-10-20 14:29:21.877 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:29:21.877 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:21.885 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:29:21.885 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:29:21.885 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:29:21.885 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:29:21.885 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:29:21.885 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:29:21.886 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:29:21.887 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:29:21.891 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:29:21.892 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:29:21.893 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:29:21.893 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:29:21.921 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:29:21.921 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:29:21.922 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:29:21.930 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:29:21.930 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:29:21.931 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:29:21.934 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:29:21.935 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:29:21.936 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:29:21.937 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:29:21.937 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:29:21.937 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:29:21.937 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:29:21.939 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:29:21.939 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:29:21.939 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:29:21.940 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:29:21.940 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:29:21.940 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:29:21.940 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:29:21.941 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:29:21.941 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:29:21.941 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:29:21.941 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:29:21.942 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:29:21.942 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:29:21.942 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:29:21.942 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:29:21.957 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:29:21.960 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:29:22.006 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:29:23.111 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 1225.4651ms
2023-10-20 14:29:23.163 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:23.275 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:29:23.287 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:29:23.287 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 1421.6109ms
2023-10-20 14:29:44.284 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:29:44.284 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:29:44.285 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:29:44.285 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:44.285 +02:00  DBG  Successfully validated the token.
2023-10-20 14:29:44.285 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:29:44.285 +02:00  DBG  Authorization was successful.
2023-10-20 14:29:44.285 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:29:44.286 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:44.286 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:29:44.286 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:29:44.286 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:29:44.286 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:29:44.286 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:29:44.286 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:29:44.286 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:29:44.286 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:29:44.286 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:29:44.287 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:29:44.287 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:29:44.287 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:29:44.287 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:29:44.287 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:29:44.287 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:29:44.287 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:29:44.287 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:29:44.287 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:29:44.287 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:29:44.287 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:29:44.288 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:29:44.288 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:29:44.303 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:29:44.304 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:29:44.304 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:29:44.889 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 602.5303ms
2023-10-20 14:29:44.940 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:29:45.046 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:29:45.051 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:29:45.051 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 766.8342ms
2023-10-20 14:34:06.928 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:34:07.182 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:34:07.639 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:34:07.874 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:34:07.881 +02:00  DBG  Creating DbConnection.
2023-10-20 14:34:07.927 +02:00  DBG  Created DbConnection. (42ms).
2023-10-20 14:34:07.931 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:34:07.947 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:34:08.457 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:08.459 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:08.470 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (7ms).
2023-10-20 14:34:08.476 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:34:08.481 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 14:34:08.482 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 14:34:08.483 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:34:08.868 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:08.874 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:34:08.950 +02:00  INF  Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:34:08.951 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:08.953 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:34:08.954 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:34:09.251 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.251 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.251 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:34:09.252 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:34:09.252 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:34:09.252 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:34:09.252 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:34:09.253 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.253 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:34:09.299 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:34:09.299 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.299 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:34:09.316 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:34:09.316 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:34:09.316 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:34:09.316 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:34:09.316 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.317 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:34:09.364 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:34:09.367 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.369 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-20 14:34:09.370 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:34:09.370 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:34:09.378 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:34:09.379 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:34:09.380 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:34:09.381 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:34:09.384 +02:00  DBG  Hosting starting
2023-10-20 14:34:09.414 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:34:09.418 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:34:09.424 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:34:09.425 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:34:09.425 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:34:09.425 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:34:09.425 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:34:09.426 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:34:09.426 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:34:09.429 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:34:09.434 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:34:09.441 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:34:09.443 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:34:09.444 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:34:09.446 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:34:09.447 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:34:09.449 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:34:09.451 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:34:09.451 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:34:09.521 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:34:09.521 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:34:09.521 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:34:09.522 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:34:09.522 +02:00  INF  Hosting environment: Development
2023-10-20 14:34:09.522 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:34:09.522 +02:00  DBG  Hosting started
2023-10-20 14:34:09.559 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:34:09.592 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:34:09.627 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:34:09.627 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:34:09.665 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:34:09.769 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:34:11.909 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:34:11.923 +02:00  DBG  Connection ID "18302628887244308529" disconnecting.
2023-10-20 14:34:11.924 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:34:11.925 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2367.9739ms
2023-10-20 14:34:11.929 +02:00  DBG  Connection ID "17509995370006970382" disconnecting.
2023-10-20 14:34:11.930 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.7364ms
2023-10-20 14:34:11.992 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:34:11.994 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:34:11.994 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:34:11.995 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:34:12.187 +02:00  DBG  Connection ID "18230571318976184337" disconnecting.
2023-10-20 14:34:12.187 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 195.8192ms
2023-10-20 14:34:16.108 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:34:16.111 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:34:16.111 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:34:16.112 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:34:16.238 +02:00  DBG  Successfully validated the token.
2023-10-20 14:34:16.239 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:34:16.245 +02:00  DBG  Authorization was successful.
2023-10-20 14:34:16.246 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:34:16.247 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:34:16.275 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:34:16.276 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:34:16.276 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:34:16.277 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:34:16.277 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:34:16.277 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:34:16.279 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:34:16.280 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:34:16.288 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:34:16.290 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:34:16.291 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:34:16.291 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:34:16.358 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:34:16.358 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:34:16.359 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:34:16.367 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:34:16.369 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:34:16.370 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:34:16.373 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:34:16.375 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:34:16.375 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:34:16.375 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:34:16.376 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:34:16.376 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:34:16.376 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:34:16.377 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:34:16.377 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:34:16.377 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:34:16.378 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:34:16.378 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:34:16.378 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:34:16.378 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:34:16.378 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:34:16.378 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:34:16.378 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:34:16.379 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:34:16.379 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:34:16.379 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:34:16.380 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:34:16.380 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:34:16.441 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:34:16.473 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:34:16.494 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:34:17.852 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 1572.399ms
2023-10-20 14:34:17.905 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:34:18.023 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:34:18.051 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:34:18.053 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 1944.9034ms
2023-10-20 14:43:23.622 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:43:23.870 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:43:24.307 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:43:24.553 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:43:24.561 +02:00  DBG  Creating DbConnection.
2023-10-20 14:43:24.603 +02:00  DBG  Created DbConnection. (40ms).
2023-10-20 14:43:24.606 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:43:24.621 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:25.111 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.113 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.121 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-20 14:43:25.126 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:43:25.130 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-20 14:43:25.132 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-20 14:43:25.132 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:25.479 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.484 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:43:25.557 +02:00  INF  Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:43:25.559 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.560 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:43:25.561 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:25.845 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.846 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.846 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:43:25.847 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:43:25.847 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:43:25.847 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:43:25.847 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:25.848 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.848 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:43:25.894 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:43:25.894 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.894 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:43:25.912 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:43:25.913 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:43:25.913 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:43:25.913 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:25.913 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.913 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:43:25.960 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:43:25.964 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.966 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-20 14:43:25.966 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:25.966 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:43:25.975 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:43:25.976 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:43:25.977 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:25.978 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:43:25.980 +02:00  DBG  Hosting starting
2023-10-20 14:43:26.012 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:43:26.016 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:43:26.023 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:43:26.024 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:43:26.024 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:43:26.024 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:43:26.025 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:43:26.025 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:43:26.025 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:43:26.030 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:43:26.035 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:43:26.041 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:43:26.044 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:43:26.044 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:43:26.046 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:43:26.047 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:43:26.048 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:43:26.050 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:43:26.051 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:43:26.120 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:43:26.124 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:43:26.124 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:43:26.124 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:43:26.124 +02:00  INF  Hosting environment: Development
2023-10-20 14:43:26.124 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:43:26.124 +02:00  DBG  Hosting started
2023-10-20 14:43:26.158 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:43:26.183 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:43:26.222 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:43:26.222 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:43:26.259 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:43:26.365 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:43:28.515 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:43:28.529 +02:00  DBG  Connection ID "18374686519936942108" disconnecting.
2023-10-20 14:43:28.530 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:43:28.532 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2374.4146ms
2023-10-20 14:43:28.537 +02:00  DBG  Connection ID "17293822587893186582" disconnecting.
2023-10-20 14:43:28.538 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.7960ms
2023-10-20 14:43:28.602 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:43:28.604 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:43:28.604 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:43:28.607 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:43:28.806 +02:00  DBG  Connection ID "18302628921604046914" disconnecting.
2023-10-20 14:43:28.807 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 204.7438ms
2023-10-20 14:43:32.945 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:43:32.948 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:43:32.949 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:43:32.950 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:43:33.150 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 12:39:10', Current time: '20/10/2023 12:43:33'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-20 14:43:33.163 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '20/10/2023 12:39:10', Current time: '20/10/2023 12:43:33'.
2023-10-20 14:43:33.169 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 14:43:33.174 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 14:43:33.175 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 401 - - 229.7584ms
2023-10-20 14:43:39.934 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 14:43:39.934 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 14:43:39.934 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 14:43:39.934 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:43:39.934 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:43:39.936 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:43:39.937 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:43:39.965 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 14:43:39.967 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:43:39.967 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:43:39.967 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:43:39.967 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:43:39.967 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:43:39.969 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:43:39.970 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 14:43:39.974 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:43:39.976 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:43:39.976 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:43:39.978 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:43:40.034 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:43:40.070 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 14:43:40.084 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:43:40.236 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 14:43:40.411 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 14:43:40.455 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:43:40.455 +02:00  DBG  Creating DbConnection.
2023-10-20 14:43:40.455 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:43:40.455 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:43:40.458 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 14:43:40.461 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:40.463 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:40.466 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:43:40.524 +02:00  INF  Executed DbCommand (61ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 14:43:40.557 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:43:40.599 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:40.599 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 74ms reading results.
2023-10-20 14:43:40.602 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:43:40.602 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:43:40.612 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 14:43:40.614 +02:00  INF  Information : POST https://localhost:44375/login from '::1:61207' responded 200 in 542,0868 ms
2023-10-20 14:43:40.647 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 609.3479ms.
2023-10-20 14:43:40.652 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 14:43:40.653 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 14:43:40.654 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 14:43:40.655 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 14:43:40.655 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 14:43:40.729 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 759.0503ms
2023-10-20 14:43:40.730 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 14:43:40.731 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:43:40.734 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:43:40.735 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:43:40.735 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 801.8668ms
2023-10-20 14:43:53.418 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:43:53.418 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:43:53.418 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:43:53.418 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:43:53.426 +02:00  DBG  Successfully validated the token.
2023-10-20 14:43:53.428 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:43:53.430 +02:00  DBG  Authorization was successful.
2023-10-20 14:43:53.430 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:43:53.430 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:43:53.436 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:43:53.436 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:43:53.436 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:43:53.436 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:43:53.436 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:43:53.436 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:43:53.436 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:43:53.437 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:43:53.441 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:43:53.443 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:43:53.444 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:43:53.444 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:43:53.473 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:43:53.473 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:43:53.473 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:43:53.483 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:43:53.483 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:43:53.484 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:43:53.487 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:43:53.488 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:43:53.489 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:43:53.490 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:43:53.490 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:43:53.490 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:43:53.490 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:43:53.492 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:43:53.492 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:43:53.492 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:43:53.493 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:43:53.493 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:43:53.493 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:43:53.493 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:43:53.493 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:43:53.493 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:43:53.493 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:43:53.495 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:43:53.495 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:43:53.495 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:43:53.495 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:43:53.495 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:43:53.511 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:43:53.514 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:43:53.557 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:43:54.645 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 1208.5066ms
2023-10-20 14:43:54.696 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:43:54.832 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:43:54.844 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:43:54.845 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 1426.5115ms
2023-10-20 14:47:19.644 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:47:20.099 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:47:20.538 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:47:20.766 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:47:20.776 +02:00  DBG  Creating DbConnection.
2023-10-20 14:47:20.816 +02:00  DBG  Created DbConnection. (38ms).
2023-10-20 14:47:20.819 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:47:20.834 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:47:21.357 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:21.358 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:21.367 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-20 14:47:21.371 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:47:21.376 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-20 14:47:21.377 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-20 14:47:21.377 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:47:21.731 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:21.736 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:47:21.819 +02:00  INF  Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:47:21.820 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:21.822 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:47:21.823 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:47:22.101 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.101 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.102 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:47:22.103 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:47:22.103 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:47:22.103 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:47:22.103 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:47:22.103 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.104 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:47:22.149 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:47:22.149 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.149 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:47:22.167 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:47:22.167 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:47:22.167 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:47:22.167 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:47:22.167 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.168 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:47:22.214 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:47:22.218 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.220 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-20 14:47:22.220 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:47:22.221 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:47:22.231 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:47:22.232 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:47:22.234 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:47:22.235 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:47:22.238 +02:00  DBG  Hosting starting
2023-10-20 14:47:22.271 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:47:22.275 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:47:22.284 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:47:22.284 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:47:22.285 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:47:22.285 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:47:22.286 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:47:22.286 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:47:22.286 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:47:22.291 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:47:22.296 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:47:22.297 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:47:22.297 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:47:22.297 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:47:22.297 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:47:22.297 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:47:22.298 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:47:22.307 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:47:22.312 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:47:22.313 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:47:22.315 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:47:22.317 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:47:22.318 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:47:22.322 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:47:22.323 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:47:22.418 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:47:22.418 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:47:22.418 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:47:22.419 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:47:22.419 +02:00  INF  Hosting environment: Development
2023-10-20 14:47:22.419 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:47:22.419 +02:00  DBG  Hosting started
2023-10-20 14:47:22.482 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:47:22.520 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:47:22.562 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:47:22.563 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:47:22.600 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:47:22.704 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:47:24.848 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:47:24.861 +02:00  DBG  Connection ID "18302628887244308533" disconnecting.
2023-10-20 14:47:24.862 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:47:24.863 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2383.0871ms
2023-10-20 14:47:24.873 +02:00  DBG  Connection ID "18230571318976184339" disconnecting.
2023-10-20 14:47:24.873 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.9232ms
2023-10-20 14:47:24.932 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:47:24.934 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:47:24.934 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:47:24.935 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:47:25.133 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 200.5060ms
2023-10-20 14:47:25.137 +02:00  DBG  Connection ID "18374686489872171025" disconnecting.
2023-10-20 14:47:34.030 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:47:34.033 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:47:34.034 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:47:34.034 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:47:34.154 +02:00  DBG  Successfully validated the token.
2023-10-20 14:47:34.155 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:47:34.162 +02:00  DBG  Authorization was successful.
2023-10-20 14:47:34.165 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:47:34.165 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:47:34.191 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:47:34.193 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:47:34.193 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:47:34.193 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:47:34.193 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:47:34.193 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:47:34.195 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:47:34.196 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:47:34.204 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:47:34.209 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:47:34.211 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:47:34.211 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:47:34.271 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:47:34.271 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:47:34.271 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:47:34.280 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:47:34.282 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:47:34.282 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:47:34.285 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:47:34.286 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:47:34.287 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:47:34.287 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:47:34.288 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:47:34.288 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:47:34.288 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:47:34.289 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:47:34.289 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:47:34.289 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:47:34.289 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:47:34.290 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:47:34.290 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:47:34.290 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:47:34.290 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:47:34.290 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:47:34.290 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:47:34.291 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:47:34.291 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:47:34.292 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:47:34.292 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:47:34.292 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:47:34.346 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:47:34.369 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:47:34.389 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:47:35.713 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 1517.5933ms
2023-10-20 14:47:35.769 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:47:35.883 +02:00  ERR  An unhandled exception has occurred while executing the request.Enum type 'locataire' not found (at index 13)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAsEnum(String id)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseMemberAccess(Type type, Expression expression)
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIdentifier()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimaryStart()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParsePrimary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseUnary()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseArithmetic()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAdditive()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseShiftOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseComparisonOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLogicalAndOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseIn()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseAndOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseLambdaOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseNullCoalescingOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseConditionalOperator()
   at System.Linq.Dynamic.Core.Parser.ExpressionParser.ParseOrdering(Boolean forceThenBy)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.InternalOrderBy(IQueryable source, ParsingConfig config, String ordering, Object comparer, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy(IQueryable source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, ParsingConfig config, String ordering, Object[] args)
   at System.Linq.Dynamic.Core.DynamicQueryableExtensions.OrderBy[TSource](IQueryable`1 source, String ordering, Object[] args)
   at Infoeco.Services.Implementation.InfoEcoService.RechercheAppartementsAsync(GetAppartementsParCriteresRequest request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 109
   at Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryHandler.Handle(ObtenirAppartementsQuery request, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Queries\AgenceImmobiliere\ObtenirAppartementsQueryHandler.cs:line 24
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync(ObtenirAppartementsQueryBase request, PaginationModel pagination, TriModel tri, CancellationToken cancellationToken) in F:\DEV\INFOECOAPI\Infeco.api\Infeco.api\Controllers\AgenceImmobiliereController.cs:line 40
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-20 14:47:35.908 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:47:35.910 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 500 - text/plain;+charset=utf-8 1879.5982ms
2023-10-20 14:48:53.718 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:48:53.973 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:48:54.458 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:48:54.691 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:48:54.698 +02:00  DBG  Creating DbConnection.
2023-10-20 14:48:54.739 +02:00  DBG  Created DbConnection. (38ms).
2023-10-20 14:48:54.742 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:48:54.757 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:48:55.268 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:55.270 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:55.278 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-20 14:48:55.283 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:48:55.288 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 14:48:55.289 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-20 14:48:55.289 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:48:55.662 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:55.666 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:48:55.738 +02:00  INF  Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:48:55.738 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:55.740 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:48:55.741 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:48:56.027 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.027 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.028 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:48:56.028 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:48:56.028 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:48:56.028 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:48:56.028 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:48:56.029 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.029 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:48:56.080 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:48:56.080 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.080 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:48:56.096 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:48:56.096 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:48:56.096 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:48:56.096 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:48:56.096 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.096 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:48:56.143 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:48:56.147 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.149 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-20 14:48:56.149 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:48:56.149 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:48:56.158 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:48:56.160 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:48:56.161 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:48:56.161 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:48:56.164 +02:00  DBG  Hosting starting
2023-10-20 14:48:56.193 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:48:56.198 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:48:56.204 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:48:56.205 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:48:56.205 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:48:56.205 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:48:56.205 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:48:56.205 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:48:56.206 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:48:56.209 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:48:56.213 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:48:56.219 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:48:56.221 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:48:56.221 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:48:56.223 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:48:56.224 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:48:56.225 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:48:56.226 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:48:56.227 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:48:56.292 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:48:56.297 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:48:56.297 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:48:56.297 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:48:56.297 +02:00  INF  Hosting environment: Development
2023-10-20 14:48:56.297 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:48:56.297 +02:00  DBG  Hosting started
2023-10-20 14:48:56.329 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:48:56.359 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:48:56.392 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:48:56.393 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:48:56.433 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:48:56.544 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:48:58.688 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:48:58.701 +02:00  DBG  Connection ID "18302628887244308535" disconnecting.
2023-10-20 14:48:58.703 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:48:58.703 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2374.5748ms
2023-10-20 14:48:58.713 +02:00  DBG  Connection ID "18086456109425491969" disconnecting.
2023-10-20 14:48:58.714 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.4876ms
2023-10-20 14:48:58.772 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:48:58.774 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:48:58.774 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:48:58.775 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:48:58.950 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.5936ms
2023-10-20 14:48:59.989 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:48:59.992 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:48:59.992 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:48:59.993 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:49:00.129 +02:00  DBG  Successfully validated the token.
2023-10-20 14:49:00.130 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:49:00.136 +02:00  DBG  Authorization was successful.
2023-10-20 14:49:00.138 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:49:00.139 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:49:00.165 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:49:00.167 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:49:00.167 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:49:00.167 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:49:00.167 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:49:00.167 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:49:00.169 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:49:00.170 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:49:00.177 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:49:00.181 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:49:00.182 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:49:00.182 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:49:00.246 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:49:00.246 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:49:00.246 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:49:00.255 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:49:00.256 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:49:00.257 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:49:00.260 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:49:00.261 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:49:00.262 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:49:00.262 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:49:00.262 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:49:00.262 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:49:00.262 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:49:00.263 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:49:00.263 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:49:00.263 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:49:00.264 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:49:00.264 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:49:00.264 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:49:00.264 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:49:00.265 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:49:00.265 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:49:00.265 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:49:00.266 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:49:00.266 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:49:00.266 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:49:00.266 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:49:00.267 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:49:00.321 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:49:00.343 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:49:00.363 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:49:02.713 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.TypeAppartement)
    .Include(u => u.Ville)
    .Include(u => u.LocatairesAppartements)'
2023-10-20 14:49:02.831 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 14:49:02.833 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 14:49:02.835 +02:00  DBG  Including navigation: 'AppartementEntite.LocatairesAppartements'.
2023-10-20 14:49:03.049 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
            1 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 13] }
            2 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: VilleEntite.CodePostal (string) Required, 15], [Property: VilleEntite.CreeLe (DateTime) Required, 16], [Property: VilleEntite.ModifieLe (DateTime?), 17], [Property: VilleEntite.Nom (string) Required MaxLength(255), 18] }
            3 -> 0
            4 -> 12
            5 -> 14
            6 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 20], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 21], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 22], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 23], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 24], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 25], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 26] }
            7 -> 19
        SELECT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, t.Id, t.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe
        FROM Appartement AS a
        LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
        INNER JOIN Ville AS v ON a.VilleId == v.Id
        LEFT JOIN LocataireAppartement AS l ON a.Id == l.AppartementId
        ORDER BY a.Id ASC, t.Id ASC, v.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 14:49:03.072 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:49:03.072 +02:00  DBG  Creating DbConnection.
2023-10-20 14:49:03.072 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:49:03.072 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:49:03.072 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:49:03.074 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:49:03.075 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:49:03.076 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", t."Id", t."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "Appartement" AS a
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "LocataireAppartement" AS l ON a."Id" = l."AppartementId"
ORDER BY a."Id", t."Id", v."Id"
2023-10-20 14:49:03.132 +02:00  INF  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", t."Id", t."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "Appartement" AS a
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "LocataireAppartement" AS l ON a."Id" = l."AppartementId"
ORDER BY a."Id", t."Id", v."Id"
2023-10-20 14:49:03.167 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.214 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.216 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.223 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.223 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.252 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.261 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.262 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.262 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.263 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:49:03.266 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:49:03.267 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 134ms reading results.
2023-10-20 14:49:03.269 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:49:03.269 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:50:36.551 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 14:50:36.792 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 14:50:37.481 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 14:50:37.790 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:50:37.801 +02:00  DBG  Creating DbConnection.
2023-10-20 14:50:37.848 +02:00  DBG  Created DbConnection. (44ms).
2023-10-20 14:50:37.854 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 14:50:37.873 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:50:38.477 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:38.480 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:38.496 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (10ms).
2023-10-20 14:50:38.508 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:50:38.528 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 14:50:38.533 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (25ms).
2023-10-20 14:50:38.533 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:50:38.949 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:38.957 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:50:39.056 +02:00  INF  Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:50:39.057 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.059 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:50:39.060 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:50:39.347 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.347 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.348 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:50:39.349 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 14:50:39.349 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:50:39.349 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 14:50:39.350 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:50:39.350 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.350 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:50:39.396 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 14:50:39.396 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.396 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:50:39.412 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:50:39.412 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:50:39.412 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:50:39.412 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:50:39.412 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.413 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:50:39.463 +02:00  INF  Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 14:50:39.472 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.476 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 10ms reading results.
2023-10-20 14:50:39.476 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:50:39.476 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 14:50:39.496 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 14:50:39.499 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 14:50:39.502 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 14:50:39.503 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 14:50:39.507 +02:00  DBG  Hosting starting
2023-10-20 14:50:39.560 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 14:50:39.572 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 14:50:39.589 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 14:50:39.591 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 14:50:39.592 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 14:50:39.593 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 14:50:39.593 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 14:50:39.594 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 14:50:39.595 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 14:50:39.606 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 14:50:39.617 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 14:50:39.618 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 14:50:39.618 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 14:50:39.618 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 14:50:39.618 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 14:50:39.619 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 14:50:39.619 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 14:50:39.629 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 14:50:39.632 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:50:39.633 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 14:50:39.636 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 14:50:39.638 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 14:50:39.639 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 14:50:39.641 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 14:50:39.642 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 14:50:39.713 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 14:50:39.719 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 14:50:39.719 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 14:50:39.720 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 14:50:39.720 +02:00  INF  Hosting environment: Development
2023-10-20 14:50:39.720 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 14:50:39.720 +02:00  DBG  Hosting started
2023-10-20 14:50:39.757 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 14:50:39.783 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 14:50:39.819 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 14:50:39.820 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:50:39.858 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:50:39.972 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 14:50:42.121 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 14:50:42.136 +02:00  DBG  Connection ID "18230571318976184341" disconnecting.
2023-10-20 14:50:42.137 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 14:50:42.138 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2382.4566ms
2023-10-20 14:50:42.143 +02:00  DBG  Connection ID "18230571306091282449" disconnecting.
2023-10-20 14:50:42.144 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.9401ms
2023-10-20 14:50:42.222 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 14:50:42.224 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 14:50:42.224 +02:00  DBG  Request did not match any endpoints
2023-10-20 14:50:42.227 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 14:50:42.466 +02:00  DBG  Connection ID "17509995370006970388" disconnecting.
2023-10-20 14:50:42.466 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 244.4910ms
2023-10-20 14:50:52.036 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 14:50:52.039 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:50:52.040 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 14:50:52.041 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:50:52.167 +02:00  DBG  Successfully validated the token.
2023-10-20 14:50:52.168 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 14:50:52.175 +02:00  DBG  Authorization was successful.
2023-10-20 14:50:52.177 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 14:50:52.178 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 14:50:52.209 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 14:50:52.210 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 14:50:52.211 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 14:50:52.211 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 14:50:52.212 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 14:50:52.212 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 14:50:52.214 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:50:52.214 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 14:50:52.222 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:50:52.225 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 14:50:52.227 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 14:50:52.228 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 14:50:52.297 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:50:52.297 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:50:52.297 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 14:50:52.306 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 14:50:52.307 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:50:52.308 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 14:50:52.313 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 14:50:52.314 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 14:50:52.315 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 14:50:52.315 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 14:50:52.315 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:50:52.315 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:50:52.315 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 14:50:52.316 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 14:50:52.316 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:50:52.317 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 14:50:52.317 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 14:50:52.318 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 14:50:52.318 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 14:50:52.318 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 14:50:52.318 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:50:52.318 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:50:52.318 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 14:50:52.319 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 14:50:52.319 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:50:52.320 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:50:52.320 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 14:50:52.320 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 14:50:52.374 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 14:50:52.399 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 14:50:52.421 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 14:51:00.388 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.TypeAppartement)
    .Include(u => u.Ville)
    .Include(u => u.LocatairesAppartements)
    .ThenInclude(l => l.Locataire)'
2023-10-20 14:51:00.510 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 14:51:00.513 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 14:51:00.516 +02:00  DBG  Including navigation: 'AppartementEntite.LocatairesAppartements'.
2023-10-20 14:51:00.520 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 14:51:00.801 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
            1 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 13] }
            2 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 14], [Property: VilleEntite.CodePostal (string) Required, 15], [Property: VilleEntite.CreeLe (DateTime) Required, 16], [Property: VilleEntite.ModifieLe (DateTime?), 17], [Property: VilleEntite.Nom (string) Required MaxLength(255), 18] }
            3 -> 0
            4 -> 12
            5 -> 14
            6 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 20], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 21], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 22], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 23], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 24], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 25], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 26] }
            7 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
            8 -> 19
            9 -> 27
        SELECT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, t.Id, t.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t0.Id, t0.AppartementId, t0.CreeLe, t0.DateEntree, t0.DateSortie, t0.DepotDeGarantieRegle, t0.LocataireId, t0.ModifieLe, t0.Id0, t0.CreeLe0, t0.DateNaissance, t0.IBAN, t0.Mail, t0.ModifieLe0, t0.Nom, t0.Prenom, t0.Telephone
        FROM Appartement AS a
        LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
        INNER JOIN Ville AS v ON a.VilleId == v.Id
        LEFT JOIN 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id AS Id0, l0.CreeLe AS CreeLe0, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe AS ModifieLe0, l0.Nom, l0.Prenom, l0.Telephone
            FROM LocataireAppartement AS l
            INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        ) AS t0 ON a.Id == t0.AppartementId
        ORDER BY a.Id ASC, t.Id ASC, v.Id ASC, t0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 14:51:00.829 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 14:51:00.830 +02:00  DBG  Creating DbConnection.
2023-10-20 14:51:00.830 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 14:51:00.830 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:51:00.830 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 14:51:00.832 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 14:51:00.834 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:51:00.835 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", t."Id", t."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t0."Id", t0."AppartementId", t0."CreeLe", t0."DateEntree", t0."DateSortie", t0."DepotDeGarantieRegle", t0."LocataireId", t0."ModifieLe", t0."Id0", t0."CreeLe0", t0."DateNaissance", t0."IBAN", t0."Mail", t0."ModifieLe0", t0."Nom", t0."Prenom", t0."Telephone"
FROM "Appartement" AS a
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id" AS "Id0", l0."CreeLe" AS "CreeLe0", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe0", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
) AS t0 ON a."Id" = t0."AppartementId"
ORDER BY a."Id", t."Id", v."Id", t0."Id"
2023-10-20 14:51:00.891 +02:00  INF  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", t."Id", t."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t0."Id", t0."AppartementId", t0."CreeLe", t0."DateEntree", t0."DateSortie", t0."DepotDeGarantieRegle", t0."LocataireId", t0."ModifieLe", t0."Id0", t0."CreeLe0", t0."DateNaissance", t0."IBAN", t0."Mail", t0."ModifieLe0", t0."Nom", t0."Prenom", t0."Telephone"
FROM "Appartement" AS a
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id" AS "Id0", l0."CreeLe" AS "CreeLe0", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe0", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
) AS t0 ON a."Id" = t0."AppartementId"
ORDER BY a."Id", t."Id", v."Id", t0."Id"
2023-10-20 14:51:00.942 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.032 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.036 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.054 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.054 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.123 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.148 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.149 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.178 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.178 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.178 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.180 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.180 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.180 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.181 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.181 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 14:51:01.187 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:51:01.188 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 296ms reading results.
2023-10-20 14:51:01.193 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 14:51:01.194 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 16:29:35.431 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 16:29:35.775 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 16:29:36.402 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 16:29:36.757 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:29:36.767 +02:00  DBG  Creating DbConnection.
2023-10-20 16:29:36.813 +02:00  DBG  Created DbConnection. (43ms).
2023-10-20 16:29:36.817 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 16:29:36.834 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:37.586 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:37.588 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:37.598 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-20 16:29:37.603 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 16:29:37.610 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 16:29:37.611 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (9ms).
2023-10-20 16:29:37.611 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:37.972 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:37.980 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:29:38.079 +02:00  INF  Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:29:38.080 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.082 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-20 16:29:38.084 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:38.364 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.364 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.365 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:29:38.366 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 16:29:38.366 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 16:29:38.367 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 16:29:38.367 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:38.367 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.368 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:29:38.414 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:29:38.414 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.414 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:29:38.441 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:29:38.441 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:29:38.441 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:29:38.441 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:38.441 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.441 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 16:29:38.488 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 16:29:38.494 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.497 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 7ms reading results.
2023-10-20 16:29:38.497 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:38.497 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:29:38.508 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 16:29:38.509 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:29:38.511 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:38.512 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:29:38.515 +02:00  DBG  Hosting starting
2023-10-20 16:29:38.550 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 16:29:38.556 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 16:29:38.566 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 16:29:38.567 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 16:29:38.567 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 16:29:38.568 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 16:29:38.568 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 16:29:38.568 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 16:29:38.569 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 16:29:38.575 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 16:29:38.580 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 16:29:38.581 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 16:29:38.581 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 16:29:38.581 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 16:29:38.581 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 16:29:38.581 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 16:29:38.581 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 16:29:38.590 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 16:29:38.594 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 16:29:38.594 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 16:29:38.597 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 16:29:38.599 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 16:29:38.600 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 16:29:38.602 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 16:29:38.603 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 16:29:38.682 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 16:29:38.682 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 16:29:38.682 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 16:29:38.688 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 16:29:38.689 +02:00  INF  Hosting environment: Development
2023-10-20 16:29:38.689 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 16:29:38.689 +02:00  DBG  Hosting started
2023-10-20 16:29:38.728 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 16:29:38.757 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 16:29:38.793 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 16:29:38.794 +02:00  DBG  Request did not match any endpoints
2023-10-20 16:29:38.833 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:29:38.944 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 16:29:41.095 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 16:29:41.104 +02:00  DBG  Connection ID "18302628887244308541" disconnecting.
2023-10-20 16:29:41.105 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 16:29:41.106 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2378.7602ms
2023-10-20 16:29:41.111 +02:00  DBG  Connection ID "18302628913014112265" disconnecting.
2023-10-20 16:29:41.112 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.6199ms
2023-10-20 16:29:41.184 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 16:29:41.186 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 16:29:41.187 +02:00  DBG  Request did not match any endpoints
2023-10-20 16:29:41.189 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:29:41.396 +02:00  DBG  Connection ID "18302628913014112267" disconnecting.
2023-10-20 16:29:41.397 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.9868ms
2023-10-20 16:29:51.105 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-20 16:29:51.108 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 16:29:51.108 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 16:29:51.109 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 16:29:51.111 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:29:51.115 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 16:29:51.116 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 16:29:51.145 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 16:29:51.146 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 16:29:51.147 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 16:29:51.147 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 16:29:51.147 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 16:29:51.147 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 16:29:51.149 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 16:29:51.151 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 16:29:51.158 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:29:51.161 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:29:51.161 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:29:51.163 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:29:51.228 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 16:29:51.260 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 16:29:51.283 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:29:51.437 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 16:29:51.590 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 16:29:51.628 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:29:51.629 +02:00  DBG  Creating DbConnection.
2023-10-20 16:29:51.629 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 16:29:51.629 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:29:51.632 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 16:29:51.636 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:51.637 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:51.640 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 16:29:51.698 +02:00  INF  Executed DbCommand (61ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 16:29:51.731 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:29:51.763 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:51.764 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 65ms reading results.
2023-10-20 16:29:51.767 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:29:51.767 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:29:51.774 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 16:29:51.776 +02:00  INF  Information : POST https://localhost:44375/login from '::1:53579' responded 200 in 514,2836 ms
2023-10-20 16:29:51.895 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 664.5093ms.
2023-10-20 16:29:51.902 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 16:29:51.904 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 16:29:51.905 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 16:29:51.906 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 16:29:51.907 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 16:29:51.993 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 842.5018ms
2023-10-20 16:29:51.994 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 16:29:51.995 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:29:51.998 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:29:51.999 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 16:29:52.000 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 895.2226ms
2023-10-20 16:30:03.928 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 16:30:03.929 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:30:03.929 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:30:03.929 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:30:03.971 +02:00  DBG  Successfully validated the token.
2023-10-20 16:30:03.973 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 16:30:03.980 +02:00  DBG  Authorization was successful.
2023-10-20 16:30:03.980 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 16:30:03.981 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:30:03.988 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 16:30:03.988 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 16:30:03.988 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 16:30:03.988 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 16:30:03.988 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 16:30:03.988 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 16:30:03.989 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:30:03.989 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:30:03.993 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:30:03.996 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 16:30:03.997 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 16:30:03.997 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 16:30:04.030 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:30:04.030 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:30:04.030 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:30:04.040 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:30:04.040 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:30:04.040 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 16:30:04.045 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 16:30:04.047 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 16:30:04.048 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 16:30:04.048 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 16:30:04.049 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:30:04.049 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:30:04.049 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:30:04.051 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:30:04.051 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:30:04.051 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 16:30:04.052 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 16:30:04.053 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 16:30:04.053 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 16:30:04.053 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 16:30:04.053 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:30:04.053 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:30:04.054 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:30:04.055 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:30:04.055 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:30:04.055 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:30:04.055 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:30:04.055 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:30:04.073 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 16:30:04.077 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 16:30:04.128 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:30:08.833 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .ThenInclude(v => v.TypeAppartement)
    .Include(u => u.Appartement)
    .ThenInclude(v => v.Ville)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 16:30:08.856 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 16:30:08.859 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 16:30:08.861 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 16:30:08.862 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 16:30:08.977 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 21] }
            3 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: VilleEntite.CodePostal (string) Required, 23], [Property: VilleEntite.CreeLe (DateTime) Required, 24], [Property: VilleEntite.ModifieLe (DateTime?), 25], [Property: VilleEntite.Nom (string) Required MaxLength(255), 26] }
            4 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, t0.Id, t0.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id1, t.CreeLe1, t.DateNaissance, t.IBAN, t.Mail, t.ModifieLe1, t.Nom, t.Prenom, t.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id AS Id1, l0.CreeLe AS CreeLe1, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe AS ModifieLe1, l0.Nom, l0.Prenom, l0.Telephone
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l0.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        LEFT JOIN TypeAppartement AS t0 ON t.TypeAppartementId == t0.Id
        INNER JOIN Ville AS v ON t.VilleId == v.Id
        ORDER BY t.Id1 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 16:30:08.985 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:30:08.985 +02:00  DBG  Creating DbConnection.
2023-10-20 16:30:08.986 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 16:30:08.986 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:30:08.986 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:30:08.986 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:30:08.986 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:30:08.986 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:30:09.038 +02:00  INF  Executed DbCommand (52ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:30:09.060 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.094 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.108 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.125 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.126 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.132 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.132 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.144 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.144 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.169 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.169 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.169 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.169 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.170 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.170 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.170 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.170 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.170 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:30:09.171 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:30:09.171 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 132ms reading results.
2023-10-20 16:30:09.171 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:30:09.172 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:02.927 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 16:31:03.170 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 16:31:03.619 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 16:31:03.895 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:31:03.904 +02:00  DBG  Creating DbConnection.
2023-10-20 16:31:03.948 +02:00  DBG  Created DbConnection. (42ms).
2023-10-20 16:31:03.952 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 16:31:03.968 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:04.469 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:04.471 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:04.483 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (7ms).
2023-10-20 16:31:04.490 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 16:31:04.496 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 16:31:04.498 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (9ms).
2023-10-20 16:31:04.498 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:04.842 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:04.847 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:04.924 +02:00  INF  Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:04.925 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:04.927 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 16:31:04.928 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:05.226 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.226 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.227 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:05.227 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 16:31:05.227 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 16:31:05.227 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 16:31:05.227 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:05.228 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.228 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:05.276 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:05.276 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.276 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:05.293 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:31:05.293 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:31:05.293 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:31:05.293 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:05.293 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.293 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 16:31:05.338 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 16:31:05.342 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.344 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-20 16:31:05.344 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:05.345 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:05.353 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 16:31:05.354 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:31:05.355 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:05.356 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:05.359 +02:00  DBG  Hosting starting
2023-10-20 16:31:05.390 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 16:31:05.394 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 16:31:05.400 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 16:31:05.401 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 16:31:05.401 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 16:31:05.401 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 16:31:05.402 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 16:31:05.402 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 16:31:05.402 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 16:31:05.406 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 16:31:05.410 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 16:31:05.410 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 16:31:05.410 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 16:31:05.410 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 16:31:05.410 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 16:31:05.411 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 16:31:05.411 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 16:31:05.417 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 16:31:05.420 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 16:31:05.421 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 16:31:05.423 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 16:31:05.425 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 16:31:05.426 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 16:31:05.428 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 16:31:05.429 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 16:31:05.505 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 16:31:05.505 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 16:31:05.505 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 16:31:05.505 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 16:31:05.505 +02:00  INF  Hosting environment: Development
2023-10-20 16:31:05.505 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 16:31:05.506 +02:00  DBG  Hosting started
2023-10-20 16:31:05.543 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 16:31:05.571 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 16:31:05.606 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 16:31:05.606 +02:00  DBG  Request did not match any endpoints
2023-10-20 16:31:05.646 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:31:05.761 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 16:31:07.901 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 16:31:07.915 +02:00  DBG  Connection ID "17509995370006970390" disconnecting.
2023-10-20 16:31:07.916 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 16:31:07.918 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2376.1303ms
2023-10-20 16:31:07.923 +02:00  DBG  Connection ID "18230571318976184344" disconnecting.
2023-10-20 16:31:07.924 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.8734ms
2023-10-20 16:31:08.000 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 16:31:08.003 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 16:31:08.003 +02:00  DBG  Request did not match any endpoints
2023-10-20 16:31:08.006 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:31:08.238 +02:00  DBG  Connection ID "17509995370006970392" disconnecting.
2023-10-20 16:31:08.238 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 237.8738ms
2023-10-20 16:31:51.611 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-20 16:31:51.854 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-20 16:31:52.319 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-20 16:31:52.617 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:31:52.627 +02:00  DBG  Creating DbConnection.
2023-10-20 16:31:52.670 +02:00  DBG  Created DbConnection. (41ms).
2023-10-20 16:31:52.673 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-20 16:31:52.689 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:53.188 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.190 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.199 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-20 16:31:53.204 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 16:31:53.209 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-20 16:31:53.210 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-20 16:31:53.211 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:53.555 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.560 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:53.633 +02:00  INF  Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:53.634 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.635 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 16:31:53.636 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:53.930 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.931 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.931 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:53.931 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-20 16:31:53.932 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 16:31:53.932 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-20 16:31:53.932 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:53.932 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.932 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:53.979 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-20 16:31:53.979 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.979 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:53.995 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:31:53.995 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:31:53.995 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:31:53.995 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:53.995 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:53.995 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 16:31:54.043 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-20 16:31:54.049 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:54.052 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 8ms reading results.
2023-10-20 16:31:54.052 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:31:54.053 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:54.063 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-20 16:31:54.065 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:31:54.066 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:31:54.067 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:31:54.070 +02:00  DBG  Hosting starting
2023-10-20 16:31:54.106 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-20 16:31:54.111 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-20 16:31:54.120 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-20 16:31:54.120 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-20 16:31:54.120 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-20 16:31:54.121 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-20 16:31:54.121 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-20 16:31:54.121 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-20 16:31:54.121 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-20 16:31:54.125 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-20 16:31:54.129 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-20 16:31:54.129 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-20 16:31:54.129 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-20 16:31:54.130 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-20 16:31:54.130 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-20 16:31:54.130 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-20 16:31:54.130 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-20 16:31:54.136 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-20 16:31:54.139 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 16:31:54.139 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-20 16:31:54.142 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-20 16:31:54.143 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-20 16:31:54.145 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-20 16:31:54.147 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-20 16:31:54.148 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-20 16:31:54.222 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-20 16:31:54.228 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-20 16:31:54.228 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-20 16:31:54.228 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-20 16:31:54.228 +02:00  INF  Hosting environment: Development
2023-10-20 16:31:54.228 +02:00  INF  Content root path: F:\DEV\INFOECOAPI\Infeco.api\Infeco.api
2023-10-20 16:31:54.228 +02:00  DBG  Hosting started
2023-10-20 16:31:54.267 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-20 16:31:54.296 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-20 16:31:54.335 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-20 16:31:54.335 +02:00  DBG  Request did not match any endpoints
2023-10-20 16:31:54.375 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:31:54.483 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-20 16:31:56.629 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-20 16:31:56.643 +02:00  DBG  Connection ID "17509995370006970394" disconnecting.
2023-10-20 16:31:56.645 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-20 16:31:56.647 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2380.1561ms
2023-10-20 16:31:56.658 +02:00  DBG  Connection ID "18230571306091282451" disconnecting.
2023-10-20 16:31:56.659 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 8.4336ms
2023-10-20 16:31:56.723 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-20 16:31:56.726 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-20 16:31:56.726 +02:00  DBG  Request did not match any endpoints
2023-10-20 16:31:56.729 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 16:31:56.939 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 215.2989ms
2023-10-20 16:32:18.745 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 16:32:18.748 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:32:18.748 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:32:18.749 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:32:18.889 +02:00  DBG  Successfully validated the token.
2023-10-20 16:32:18.892 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 16:32:18.904 +02:00  DBG  Authorization was successful.
2023-10-20 16:32:18.907 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 16:32:18.908 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:32:18.951 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 16:32:18.954 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 16:32:18.955 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 16:32:18.955 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 16:32:18.955 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 16:32:18.955 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 16:32:18.958 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:32:18.959 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:32:18.972 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:32:18.976 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 16:32:18.977 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 16:32:18.977 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 16:32:19.077 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:32:19.077 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:32:19.078 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:32:19.093 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:32:19.095 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:32:19.095 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 16:32:19.101 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 16:32:19.102 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 16:32:19.103 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 16:32:19.103 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 16:32:19.104 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:32:19.104 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:32:19.104 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:32:19.105 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:32:19.105 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:32:19.105 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 16:32:19.106 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 16:32:19.106 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 16:32:19.106 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 16:32:19.106 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 16:32:19.106 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:32:19.107 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:32:19.107 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:32:19.107 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:32:19.107 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:32:19.108 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:32:19.108 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:32:19.108 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:32:19.167 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 16:32:19.197 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 16:32:19.231 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:32:22.258 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .ThenInclude(v => v.TypeAppartement)
    .Include(u => u.Appartement)
    .ThenInclude(v => v.Ville)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 16:32:22.374 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 16:32:22.376 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 16:32:22.378 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 16:32:22.378 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 16:32:22.617 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 21] }
            3 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: VilleEntite.CodePostal (string) Required, 23], [Property: VilleEntite.CreeLe (DateTime) Required, 24], [Property: VilleEntite.ModifieLe (DateTime?), 25], [Property: VilleEntite.Nom (string) Required MaxLength(255), 26] }
            4 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, t0.Id, t0.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id1, t.CreeLe1, t.DateNaissance, t.IBAN, t.Mail, t.ModifieLe1, t.Nom, t.Prenom, t.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id AS Id1, l0.CreeLe AS CreeLe1, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe AS ModifieLe1, l0.Nom, l0.Prenom, l0.Telephone
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l0.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        LEFT JOIN TypeAppartement AS t0 ON t.TypeAppartementId == t0.Id
        INNER JOIN Ville AS v ON t.VilleId == v.Id
        ORDER BY t.Id1 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 16:32:22.651 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:32:22.652 +02:00  DBG  Creating DbConnection.
2023-10-20 16:32:22.652 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 16:32:22.652 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:32:22.654 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2023-10-20 16:32:22.657 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:32:22.660 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:32:22.664 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:32:22.732 +02:00  INF  Executed DbCommand (71ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:32:22.790 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.831 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.846 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.866 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.867 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.873 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.873 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.883 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.883 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.898 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.898 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.898 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.899 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.899 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.899 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.899 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.899 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.899 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:32:22.901 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:32:22.902 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 169ms reading results.
2023-10-20 16:32:22.904 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:32:22.905 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:32:41.412 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Locataire.Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 16:32:41.417 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 16:32:41.451 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 16:32:41.461 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:32:41.461 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:32:41.462 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:32:41.462 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:32:41.462 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:32:41.462 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 16:32:41.508 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 16:32:41.512 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:32:41.512 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 3ms reading results.
2023-10-20 16:32:41.512 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:32:41.512 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:32:41.541 +02:00  INF  Handled AppartementsResponse
2023-10-20 16:32:41.546 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true from '::1:53892' responded 200 in 22343,7258 ms
2023-10-20 16:32:41.557 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22385.4696ms.
2023-10-20 16:32:41.565 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 16:32:41.568 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 16:32:41.569 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 16:32:41.572 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 16:32:41.573 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 16:32:41.666 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 22707.4594ms
2023-10-20 16:32:41.667 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:32:41.668 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:32:41.672 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:32:41.673 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-20 16:32:41.674 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 200 606 application/json;+charset=utf-8 22929.4288ms
2023-10-20 16:33:28.524 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33
2023-10-20 16:33:28.525 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:33:28.525 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:33:28.526 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:33:28.528 +02:00  DBG  Successfully validated the token.
2023-10-20 16:33:28.528 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 16:33:28.542 +02:00  DBG  Authorization was successful.
2023-10-20 16:33:28.543 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 16:33:28.543 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:33:28.543 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 16:33:28.543 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 16:33:28.544 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 16:33:28.544 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 16:33:28.544 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 16:33:28.544 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 16:33:28.544 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:33:28.545 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:33:28.546 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:33:28.546 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 16:33:28.546 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 16:33:28.546 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 16:33:28.548 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:33:28.548 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:33:28.548 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:33:28.548 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:33:28.548 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:33:28.548 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 16:33:28.548 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:33:28.549 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:33:28.549 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:33:28.567 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 16:33:28.569 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 16:33:28.630 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:33:28.639 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:33:28.640 +02:00  DBG  Creating DbConnection.
2023-10-20 16:33:28.640 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 16:33:28.640 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:28.640 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:28.640 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:33:28.640 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:28.640 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:33:28.686 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:33:28.686 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.686 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.686 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.687 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:28.688 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:28.688 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 16:33:28.688 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:28.688 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:33:31.290 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:33:31.290 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:31.291 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:31.291 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:33:31.291 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:31.291 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 16:33:31.337 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 16:33:31.338 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:31.338 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 16:33:31.338 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:31.338 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:33:31.338 +02:00  INF  Handled AppartementsResponse
2023-10-20 16:33:31.339 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true from '::1:53892' responded 200 in 2769,2706 ms
2023-10-20 16:33:31.341 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2772.9882ms.
2023-10-20 16:33:31.342 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 16:33:31.343 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 16:33:31.343 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 16:33:31.343 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 16:33:31.344 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 16:33:31.346 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 2802.541ms
2023-10-20 16:33:31.347 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:33:31.347 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:33:31.347 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:33:31.348 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:33:31.348 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 33 - 200 606 application/json;+charset=utf-8 2823.5098ms
2023-10-20 16:33:44.305 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 21
2023-10-20 16:33:44.305 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:33:44.305 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 16:33:44.305 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:33:44.306 +02:00  DBG  Successfully validated the token.
2023-10-20 16:33:44.306 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 16:33:44.307 +02:00  DBG  Authorization was successful.
2023-10-20 16:33:44.307 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 16:33:44.307 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:33:44.307 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 16:33:44.307 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 16:33:44.307 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 16:33:44.307 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 16:33:44.307 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 16:33:44.308 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 16:33:44.308 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:33:44.308 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 16:33:44.308 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:33:44.308 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 16:33:44.308 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 16:33:44.308 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 16:33:44.309 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:33:44.309 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:33:44.309 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 16:33:44.310 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 16:33:44.310 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 16:33:44.311 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 16:33:44.311 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:33:44.311 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:33:44.311 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 16:33:44.311 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 16:33:44.311 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:33:44.311 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:33:44.311 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 16:33:44.311 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 16:33:44.329 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 16:33:44.330 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 16:33:44.333 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 16:33:44.336 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .ThenInclude(v => v.TypeAppartement)
    .Include(u => u.Appartement)
    .ThenInclude(v => v.Ville)
    .Include(u => u.Locataire)
    .Where(demande => True && True && True && False || demande.Appartement != null && (int?)demande.Appartement.VilleId == __criteres_VilleId_0)
    .OrderBy( => .Locataire.Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 16:33:44.337 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 16:33:44.337 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 16:33:44.337 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 16:33:44.337 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 16:33:44.347 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 21] }
            3 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: VilleEntite.CodePostal (string) Required, 23], [Property: VilleEntite.CreeLe (DateTime) Required, 24], [Property: VilleEntite.ModifieLe (DateTime?), 25], [Property: VilleEntite.Nom (string) Required MaxLength(255), 26] }
            4 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, t0.Id, t0.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id1, t.CreeLe1, t.DateNaissance, t.IBAN, t.Mail, t.ModifieLe1, t.Nom, t.Prenom, t.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, l0.Id AS Id1, l0.CreeLe AS CreeLe1, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe AS ModifieLe1, l0.Nom, l0.Prenom, l0.Telephone
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
            WHERE ((TRUE && TRUE) && TRUE) && (FALSE || (Not(a.Id == NULL) && (a.VilleId == @__criteres_VilleId_0)))
            ORDER BY l0.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        LEFT JOIN TypeAppartement AS t0 ON t.TypeAppartementId == t0.Id
        INNER JOIN Ville AS v ON t.VilleId == v.Id
        ORDER BY t.Id1 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 16:33:44.348 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:33:44.348 +02:00  DBG  Creating DbConnection.
2023-10-20 16:33:44.348 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 16:33:44.348 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:44.348 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:44.348 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:33:44.348 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:44.348 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_VilleId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."VilleId" = @__criteres_VilleId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:33:44.394 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_VilleId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id1", t."CreeLe1", t."DateNaissance", t."IBAN", t."Mail", t."ModifieLe1", t."Nom", t."Prenom", t."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", l0."Id" AS "Id1", l0."CreeLe" AS "CreeLe1", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe" AS "ModifieLe1", l0."Nom", l0."Prenom", l0."Telephone"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."VilleId" = @__criteres_VilleId_0
    ORDER BY l0."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
ORDER BY t."Id1"
2023-10-20 16:33:44.395 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.395 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.396 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.396 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 16:33:44.396 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:44.396 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 16:33:44.396 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:44.396 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:33:47.094 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && True && True && False || demande.Appartement != null && (int?)demande.Appartement.VilleId == __criteres_VilleId_0)
    .OrderBy( => .Locataire.Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 16:33:47.096 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 16:33:47.099 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
                WHERE ((TRUE && TRUE) && TRUE) && (FALSE || (Not(a.Id == NULL) && (a.VilleId == @__criteres_VilleId_0)))
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 16:33:47.099 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 16:33:47.099 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:47.100 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 16:33:47.100 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 16:33:47.100 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:47.100 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_VilleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."VilleId" = @__criteres_VilleId_0
) AS t
2023-10-20 16:33:47.148 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_VilleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
    WHERE a."VilleId" = @__criteres_VilleId_0
) AS t
2023-10-20 16:33:47.148 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:47.149 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 16:33:47.149 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 16:33:47.149 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:33:47.149 +02:00  INF  Handled AppartementsResponse
2023-10-20 16:33:47.149 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true from '::1:53892' responded 200 in 2818,2737 ms
2023-10-20 16:33:47.149 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2819.2863ms.
2023-10-20 16:33:47.149 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 16:33:47.149 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 16:33:47.149 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 16:33:47.149 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 16:33:47.149 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 16:33:47.150 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 2842.7384ms
2023-10-20 16:33:47.150 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 16:33:47.151 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 16:33:47.151 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 16:33:47.151 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 16:33:47.151 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=locataire.id&ascendant=true application/json 21 - 200 314 application/json;+charset=utf-8 2845.8132ms
2023-10-20 19:01:32.777 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=id&ascendant=true application/json 97
2023-10-20 19:01:32.777 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:01:32.778 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:01:32.778 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:01:32.778 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:01:32.784 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 19:01:32.794 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 19:01:32.798 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=id&ascendant=true application/json 97 - 401 - - 22.1458ms
2023-10-20 19:01:32.798 +02:00  DBG  Connection ID "18374686511347007533" disconnecting.
2023-10-20 19:03:14.413 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=id application/json 97
2023-10-20 19:03:14.414 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:03:14.414 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:03:14.414 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:03:14.415 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:03:14.417 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 19:03:14.417 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 19:03:14.418 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=id application/json 97 - 401 - - 4.7789ms
2023-10-20 19:03:14.419 +02:00  DBG  Connection ID "18230571306091282453" disconnecting.
2023-10-20 19:03:31.317 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=id&ascendant=true application/json 97
2023-10-20 19:03:31.317 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:03:31.317 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:03:31.318 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:03:31.318 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:03:31.318 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-20 19:03:31.318 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-20 19:03:31.318 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=10&index=0&champ=id&ascendant=true application/json 97 - 401 - - 1.9323ms
2023-10-20 19:03:31.318 +02:00  DBG  Connection ID "18230571306091282455" disconnecting.
2023-10-20 19:06:59.109 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/login - -
2023-10-20 19:06:59.111 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:06:59.111 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:06:59.111 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:06:59.113 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:06:59.113 +02:00  INF  CORS policy execution successful.
2023-10-20 19:06:59.115 +02:00  DBG  The request is a preflight request.
2023-10-20 19:06:59.116 +02:00  DBG  Connection ID "18230571297501347847" disconnecting.
2023-10-20 19:06:59.116 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/login - - - 204 - - 7.8238ms
2023-10-20 19:06:59.119 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/login application/json 2
2023-10-20 19:06:59.120 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:06:59.120 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 19:06:59.120 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:06:59.120 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:06:59.120 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:06:59.120 +02:00  INF  CORS policy execution successful.
2023-10-20 19:06:59.121 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:06:59.121 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:06:59.127 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 19:06:59.127 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:06:59.127 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:06:59.127 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:06:59.128 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:06:59.128 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:06:59.128 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:06:59.129 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:06:59.129 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:06:59.129 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:06:59.129 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:06:59.129 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:06:59.145 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:06:59.156 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 19:06:59.158 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:06:59.172 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-20 19:06:59.181 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 19:06:59.185 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:06:59.185 +02:00  DBG  Creating DbConnection.
2023-10-20 19:06:59.185 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:06:59.185 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:06:59.186 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:06:59.186 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:06:59.593 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:06:59.594 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:06:59.644 +02:00  INF  Executed DbCommand (51ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:06:59.647 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:06:59.661 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:06:59.662 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 17ms reading results.
2023-10-20 19:06:59.662 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:06:59.662 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:06:59.665 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:06:59.665 +02:00  INF  Information : POST https://localhost:44375/login from '::1:57829' responded 200 in 509,5776 ms
2023-10-20 19:06:59.679 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 533.2245ms.
2023-10-20 19:06:59.679 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:06:59.679 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:06:59.679 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:06:59.679 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:06:59.679 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 19:06:59.684 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 556.4019ms
2023-10-20 19:06:59.684 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:06:59.684 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:06:59.684 +02:00  DBG  Connection ID "18230571318976184346" disconnecting.
2023-10-20 19:06:59.684 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:06:59.684 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:06:59.684 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/login application/json 2 - 200 517 application/json;+charset=utf-8 564.9941ms
2023-10-20 19:06:59.721 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:06:59.721 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:06:59.721 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:06:59.722 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:06:59.722 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:06:59.722 +02:00  INF  CORS policy execution successful.
2023-10-20 19:06:59.722 +02:00  DBG  The request is a preflight request.
2023-10-20 19:06:59.723 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.5870ms
2023-10-20 19:06:59.734 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:06:59.734 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:06:59.734 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:06:59.734 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:06:59.735 +02:00  DBG  Successfully validated the token.
2023-10-20 19:06:59.735 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:06:59.735 +02:00  DBG  Authorization was successful.
2023-10-20 19:06:59.735 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:06:59.735 +02:00  INF  CORS policy execution successful.
2023-10-20 19:06:59.736 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:06:59.736 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:06:59.745 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:06:59.745 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:06:59.745 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:06:59.745 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:06:59.745 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:06:59.745 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:06:59.745 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:06:59.746 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:06:59.746 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:06:59.746 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:06:59.747 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:06:59.747 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:06:59.747 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:06:59.747 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:06:59.748 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:06:59.748 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:06:59.748 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:06:59.748 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:06:59.767 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:06:59.771 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:06:59.772 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:06:59.777 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __email_0)'
2023-10-20 19:06:59.781 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE u.Courriel == @__email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 19:06:59.781 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:06:59.781 +02:00  DBG  Creating DbConnection.
2023-10-20 19:06:59.781 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:06:59.781 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:06:59.781 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:06:59.781 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:06:59.781 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:06:59.781 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:06:59.827 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:06:59.827 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:06:59.827 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:06:59.827 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:06:59.828 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:06:59.828 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:06:59.829 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:06:59.830 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:57829' responded 200 in 57,9361 ms
2023-10-20 19:06:59.831 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.0888ms.
2023-10-20 19:06:59.831 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:06:59.831 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:06:59.831 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:06:59.831 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:06:59.831 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:06:59.839 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 93.5294ms
2023-10-20 19:06:59.839 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:06:59.839 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:06:59.839 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:06:59.839 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:06:59.840 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 105.6507ms
2023-10-20 19:07:24.635 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:07:24.635 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:07:24.635 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:07:24.636 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:07:24.636 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:07:24.636 +02:00  INF  CORS policy execution successful.
2023-10-20 19:07:24.636 +02:00  DBG  The request is a preflight request.
2023-10-20 19:07:24.637 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.1231ms
2023-10-20 19:07:24.637 +02:00  DBG  Connection ID "18374686489872171028" disconnecting.
2023-10-20 19:07:24.642 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:07:24.643 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:07:24.643 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:07:24.643 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:07:24.643 +02:00  DBG  Successfully validated the token.
2023-10-20 19:07:24.643 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:07:24.643 +02:00  DBG  Authorization was successful.
2023-10-20 19:07:24.643 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:07:24.643 +02:00  INF  CORS policy execution successful.
2023-10-20 19:07:24.643 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:07:24.644 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:07:24.644 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:07:24.644 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:07:24.644 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:07:24.644 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:07:24.644 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:07:24.644 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:07:24.644 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:07:24.644 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:07:24.644 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:07:24.644 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:07:24.644 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:07:24.644 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:07:24.644 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:07:24.644 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:07:24.644 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:07:24.644 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:07:24.644 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:07:24.644 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:07:24.667 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:07:24.669 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:07:24.670 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:07:24.672 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:07:24.672 +02:00  DBG  Creating DbConnection.
2023-10-20 19:07:24.672 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:07:24.672 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:07:24.672 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:07:24.672 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:07:24.672 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:07:24.673 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:07:24.718 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:07:24.718 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:07:24.718 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:07:24.718 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:07:24.718 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:07:24.718 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:07:24.718 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:07:24.718 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:57829' responded 200 in 48,8912 ms
2023-10-20 19:07:24.719 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.1285ms.
2023-10-20 19:07:24.719 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:07:24.719 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:07:24.719 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:07:24.719 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:07:24.719 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:07:24.720 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 75.689ms
2023-10-20 19:07:24.720 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:07:24.720 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:07:24.720 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:07:24.720 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:07:24.720 +02:00  DBG  Connection ID "18230571336156053566" disconnecting.
2023-10-20 19:07:24.720 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 77.4998ms
2023-10-20 19:15:06.742 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:15:06.746 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:15:06.746 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:15:06.747 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:15:06.747 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:15:06.747 +02:00  INF  CORS policy execution successful.
2023-10-20 19:15:06.747 +02:00  DBG  The request is a preflight request.
2023-10-20 19:15:06.747 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 4.6660ms
2023-10-20 19:15:06.786 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:15:06.786 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:15:06.786 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:15:06.786 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:15:06.787 +02:00  DBG  Successfully validated the token.
2023-10-20 19:15:06.787 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:15:06.787 +02:00  DBG  Authorization was successful.
2023-10-20 19:15:06.787 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:15:06.787 +02:00  INF  CORS policy execution successful.
2023-10-20 19:15:06.787 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:15:06.788 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:15:06.788 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:15:06.788 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:15:06.788 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:15:06.788 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:15:06.788 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:15:06.788 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:15:06.788 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:15:06.788 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:15:06.788 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:15:06.788 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:15:06.788 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:15:06.789 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:15:06.789 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:15:06.789 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:15:06.789 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:15:06.789 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:15:06.789 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:15:06.789 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:15:06.807 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:15:06.808 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:15:06.809 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:15:06.810 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:15:06.810 +02:00  DBG  Creating DbConnection.
2023-10-20 19:15:06.810 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:15:06.810 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:15:06.810 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:15:06.810 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:15:07.375 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:15:07.376 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:15:07.424 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:15:07.424 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:15:07.424 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:15:07.424 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:15:07.424 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:15:07.424 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:15:07.424 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:15:07.424 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58497' responded 200 in 616,1988 ms
2023-10-20 19:15:07.424 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 617.2688ms.
2023-10-20 19:15:07.424 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:15:07.424 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:15:07.424 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:15:07.424 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:15:07.424 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:15:07.425 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 637.3741ms
2023-10-20 19:15:07.425 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:15:07.426 +02:00  DBG  Connection ID "18230571340451020813" disconnecting.
2023-10-20 19:15:07.426 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:15:07.426 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:15:07.426 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:15:07.426 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 639.9582ms
2023-10-20 19:15:42.005 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:15:42.005 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:15:42.005 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:15:42.005 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:15:42.005 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:15:42.005 +02:00  INF  CORS policy execution successful.
2023-10-20 19:15:42.005 +02:00  DBG  The request is a preflight request.
2023-10-20 19:15:42.006 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.7135ms
2023-10-20 19:15:42.011 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:15:42.011 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:15:42.011 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:15:42.011 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:15:42.012 +02:00  DBG  Successfully validated the token.
2023-10-20 19:15:42.012 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:15:42.012 +02:00  DBG  Authorization was successful.
2023-10-20 19:15:42.012 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:15:42.013 +02:00  INF  CORS policy execution successful.
2023-10-20 19:15:42.013 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:15:42.013 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:15:42.013 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:15:42.013 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:15:42.013 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:15:42.013 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:15:42.013 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:15:42.013 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:15:42.013 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:15:42.013 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:15:42.013 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:15:42.013 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:15:42.013 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:15:42.014 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:15:42.014 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:15:42.014 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:15:42.014 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:15:42.014 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:15:42.014 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:15:42.014 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:15:42.064 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:15:42.064 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:15:42.066 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:15:42.066 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:15:42.067 +02:00  DBG  Creating DbConnection.
2023-10-20 19:15:42.067 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:15:42.067 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:15:42.067 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:15:42.067 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:15:42.067 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:15:42.067 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:15:42.113 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:15:42.114 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:15:42.114 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:15:42.115 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:15:42.115 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:15:42.122 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-20 19:15:42.127 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:15:42.127 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58497' responded 200 in 62,5391 ms
2023-10-20 19:15:42.127 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.1156ms.
2023-10-20 19:15:42.127 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:15:42.128 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:15:42.128 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:15:42.128 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:15:42.128 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:15:42.129 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 115.5012ms
2023-10-20 19:15:42.129 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:15:42.129 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:15:42.129 +02:00  DBG  Connection ID "18374686489872171030" disconnecting.
2023-10-20 19:15:42.129 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:15:42.129 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:15:42.130 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 118.5792ms
2023-10-20 19:15:44.684 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true - -
2023-10-20 19:15:44.684 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:15:44.684 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:15:44.684 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:15:44.685 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:15:44.685 +02:00  INF  CORS policy execution successful.
2023-10-20 19:15:44.685 +02:00  DBG  The request is a preflight request.
2023-10-20 19:15:44.685 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true - - - 204 - - 0.8360ms
2023-10-20 19:15:44.685 +02:00  DBG  Connection ID "18230571297501347849" disconnecting.
2023-10-20 19:15:44.691 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true application/json 25
2023-10-20 19:15:44.691 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:15:44.691 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:15:44.691 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:15:44.693 +02:00  DBG  Successfully validated the token.
2023-10-20 19:15:44.693 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:15:44.693 +02:00  DBG  Authorization was successful.
2023-10-20 19:15:44.693 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:15:44.693 +02:00  INF  CORS policy execution successful.
2023-10-20 19:15:44.693 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:15:44.693 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:15:44.693 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:15:44.694 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:15:44.694 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:15:44.694 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:15:44.694 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:15:44.694 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:15:44.694 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:15:44.694 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:15:44.694 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:15:44.694 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:15:44.694 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:15:44.694 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:15:44.695 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:15:44.695 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:15:44.695 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:15:44.695 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:15:44.695 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:15:44.695 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:15:44.696 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:15:44.696 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:15:44.696 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:15:44.696 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:15:44.696 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:15:44.696 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:15:44.696 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:15:44.696 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:15:44.696 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:15:44.696 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:15:44.697 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:15:44.697 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:15:44.697 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:15:44.697 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:15:44.697 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:15:44.697 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:15:44.697 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:15:44.697 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:15:44.697 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:15:44.698 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:15:44.698 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:15:44.698 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:15:44.725 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:15:44.726 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:15:44.727 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:16:02.166 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .ThenInclude(v => v.TypeAppartement)
    .Include(u => u.Appartement)
    .ThenInclude(v => v.Ville)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Skip(__p_1)
    .Take(__p_1)'
2023-10-20 19:16:02.167 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 19:16:02.167 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 19:16:02.168 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 19:16:02.169 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 19:16:02.179 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 21] }
            3 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: VilleEntite.CodePostal (string) Required, 23], [Property: VilleEntite.CreeLe (DateTime) Required, 24], [Property: VilleEntite.ModifieLe (DateTime?), 25], [Property: VilleEntite.Nom (string) Required MaxLength(255), 26] }
            4 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, t0.Id, t0.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN TypeAppartement AS t0 ON t.TypeAppartementId == t0.Id
        INNER JOIN Ville AS v ON t.VilleId == v.Id
        INNER JOIN Locataire AS l0 ON t.LocataireId == l0.Id
        ORDER BY t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 19:16:02.180 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:16:02.180 +02:00  DBG  Creating DbConnection.
2023-10-20 19:16:02.180 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:16:02.180 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:16:02.180 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:16:02.180 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:16:02.180 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:02.180 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_1 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:16:02.231 +02:00  INF  Executed DbCommand (51ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_1 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:16:02.231 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:02.231 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:16:02.231 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:02.231 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:16:23.838 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:16:23.838 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:16:23.839 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:16:23.839 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:16:23.839 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:23.839 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_1 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:16:23.889 +02:00  INF  Executed DbCommand (50ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_1 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:16:23.889 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:23.889 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:16:23.889 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:23.889 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:16:48.792 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Select(u => u.Appartement)
    .Distinct()
    .Count()'
2023-10-20 19:16:48.794 +02:00  WRN  The query uses the 'Distinct' operator after applying an ordering. If there are any row limiting operation used before 'Distinct' and after ordering then ordering will be used for it. Ordering(s) will be erased after 'Distinct' and results afterwards would be unordered.
2023-10-20 19:16:48.797 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM 
            (
                SELECT DISTINCT a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
                FROM LocataireAppartement AS l
                INNER JOIN Appartement AS a ON l.AppartementId == a.Id
                WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ) AS t), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-20 19:16:48.797 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:16:48.797 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:16:48.797 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:16:48.797 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:16:48.798 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:48.798 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:16:48.846 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:16:48.846 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:48.847 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:16:48.847 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:16:48.847 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:16:48.847 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:16:48.847 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true from '::1:58497' responded 200 in 64120,9039 ms
2023-10-20 19:16:48.847 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64121.8271ms.
2023-10-20 19:16:48.848 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:16:48.848 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:16:48.848 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:16:48.848 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:16:48.848 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:16:48.848 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 64154.4932ms
2023-10-20 19:16:48.848 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:16:48.849 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:16:48.849 +02:00  DBG  Connection ID "18230571293206380564" disconnecting.
2023-10-20 19:16:48.849 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:16:48.849 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:16:48.849 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true application/json 25 - 200 24 application/json;+charset=utf-8 64157.9036ms
2023-10-20 19:19:48.083 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/login - -
2023-10-20 19:19:48.083 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:19:48.083 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:19:48.083 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:19:48.083 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:19:48.084 +02:00  INF  CORS policy execution successful.
2023-10-20 19:19:48.084 +02:00  DBG  The request is a preflight request.
2023-10-20 19:19:48.084 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/login - - - 204 - - 0.9566ms
2023-10-20 19:19:48.087 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/login application/json 2
2023-10-20 19:19:48.087 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:19:48.087 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 19:19:48.087 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:19:48.087 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:19:48.087 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:19:48.087 +02:00  INF  CORS policy execution successful.
2023-10-20 19:19:48.087 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:19:48.087 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:19:48.088 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 19:19:48.088 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:19:48.088 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:19:48.088 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:19:48.088 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:19:48.088 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:19:48.088 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:19:48.088 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:19:48.089 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:19:48.089 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:19:48.089 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:19:48.089 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:19:48.145 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:19:48.150 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 19:19:48.151 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:19:48.152 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:19:48.153 +02:00  DBG  Creating DbConnection.
2023-10-20 19:19:48.153 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:19:48.153 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:19:48.153 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:19:48.153 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:19:48.153 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:48.153 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:19:48.198 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:19:48.198 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:19:48.198 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:48.199 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:19:48.199 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:48.199 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:19:48.199 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:19:48.199 +02:00  INF  Information : POST https://localhost:44375/login from '::1:58954' responded 200 in 48,3989 ms
2023-10-20 19:19:48.201 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.2925ms.
2023-10-20 19:19:48.202 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:19:48.202 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:19:48.202 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:19:48.202 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:19:48.202 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 19:19:48.202 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 114.4182ms
2023-10-20 19:19:48.202 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:19:48.203 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:19:48.203 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:19:48.203 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:19:48.203 +02:00  DBG  Connection ID "18158513699168452613" disconnecting.
2023-10-20 19:19:48.203 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/login application/json 2 - 200 517 application/json;+charset=utf-8 115.6455ms
2023-10-20 19:19:48.218 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:19:48.218 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:19:48.218 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:19:48.218 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:19:48.218 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:19:48.218 +02:00  INF  CORS policy execution successful.
2023-10-20 19:19:48.218 +02:00  DBG  The request is a preflight request.
2023-10-20 19:19:48.218 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.5365ms
2023-10-20 19:19:48.223 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:19:48.223 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:19:48.223 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:19:48.223 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:19:48.224 +02:00  DBG  Successfully validated the token.
2023-10-20 19:19:48.224 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:19:48.224 +02:00  DBG  Authorization was successful.
2023-10-20 19:19:48.224 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:19:48.224 +02:00  INF  CORS policy execution successful.
2023-10-20 19:19:48.224 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:19:48.224 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:19:48.224 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:19:48.224 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:19:48.224 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:19:48.224 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:19:48.224 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:19:48.224 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:19:48.224 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:19:48.224 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:19:48.224 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:19:48.225 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:19:48.225 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:19:48.225 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:19:48.225 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:19:48.225 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:19:48.225 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:19:48.225 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:19:48.225 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:19:48.225 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:19:48.248 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:19:48.248 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:19:48.249 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:19:48.249 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:19:48.249 +02:00  DBG  Creating DbConnection.
2023-10-20 19:19:48.249 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:19:48.250 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:19:48.250 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:19:48.250 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:19:48.250 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:48.250 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:19:48.295 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:19:48.296 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:19:48.296 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:48.296 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:19:48.296 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:48.297 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:19:48.297 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:19:48.297 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 48,1518 ms
2023-10-20 19:19:48.297 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.4203ms.
2023-10-20 19:19:48.297 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:19:48.297 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:19:48.297 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:19:48.297 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:19:48.298 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:19:48.299 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 74.2749ms
2023-10-20 19:19:48.299 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:19:48.299 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:19:48.299 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:19:48.299 +02:00  DBG  Connection ID "18230571318976184348" disconnecting.
2023-10-20 19:19:48.299 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:19:48.299 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 76.2251ms
2023-10-20 19:19:56.896 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:19:56.896 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:19:56.896 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:19:56.896 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:19:56.897 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:19:56.897 +02:00  INF  CORS policy execution successful.
2023-10-20 19:19:56.898 +02:00  DBG  The request is a preflight request.
2023-10-20 19:19:56.898 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 2.1329ms
2023-10-20 19:19:56.905 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:19:56.906 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:19:56.906 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:19:56.906 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:19:56.907 +02:00  DBG  Successfully validated the token.
2023-10-20 19:19:56.907 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:19:56.907 +02:00  DBG  Authorization was successful.
2023-10-20 19:19:56.907 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:19:56.907 +02:00  INF  CORS policy execution successful.
2023-10-20 19:19:56.907 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:19:56.907 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:19:56.907 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:19:56.908 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:19:56.908 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:19:56.908 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:19:56.908 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:19:56.908 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:19:56.908 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:19:56.908 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:19:56.909 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:19:56.909 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:19:56.909 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:19:56.909 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:19:56.909 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:19:56.909 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:19:56.909 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:19:56.909 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:19:56.909 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:19:56.909 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:19:56.929 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:19:56.929 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:19:56.930 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:19:56.931 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:19:56.931 +02:00  DBG  Creating DbConnection.
2023-10-20 19:19:56.931 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:19:56.931 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:19:56.931 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:19:56.931 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:19:56.931 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:56.931 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:19:56.977 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:19:56.978 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:19:56.978 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:56.978 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:19:56.978 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:19:56.978 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:19:56.978 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:19:56.978 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 48,6839 ms
2023-10-20 19:19:56.978 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.0052ms.
2023-10-20 19:19:56.978 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:19:56.979 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:19:56.979 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:19:56.979 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:19:56.979 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:19:56.980 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 71.7192ms
2023-10-20 19:19:56.980 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:19:56.981 +02:00  DBG  Connection ID "18230571318976184350" disconnecting.
2023-10-20 19:19:56.981 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:19:56.981 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:19:56.981 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:19:56.981 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 75.9242ms
2023-10-20 19:20:20.513 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:20:20.514 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:20:20.514 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:20:20.514 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:20:20.514 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:20:20.514 +02:00  INF  CORS policy execution successful.
2023-10-20 19:20:20.514 +02:00  DBG  The request is a preflight request.
2023-10-20 19:20:20.514 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.2226ms
2023-10-20 19:20:20.518 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:20:20.519 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:20:20.519 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:20:20.519 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:20:20.519 +02:00  DBG  Successfully validated the token.
2023-10-20 19:20:20.519 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:20:20.520 +02:00  DBG  Authorization was successful.
2023-10-20 19:20:20.520 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:20:20.520 +02:00  INF  CORS policy execution successful.
2023-10-20 19:20:20.520 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:20:20.520 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:20:20.520 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:20:20.520 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:20:20.520 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:20:20.520 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:20:20.520 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:20:20.520 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:20:20.520 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:20:20.520 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:20:20.520 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:20:20.520 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:20:20.521 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:20:20.521 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:20:20.521 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:20:20.521 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:20:20.521 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:20:20.521 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:20:20.521 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:20:20.521 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:20:20.543 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:20:20.543 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:20:20.544 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:20:20.545 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:20:20.545 +02:00  DBG  Creating DbConnection.
2023-10-20 19:20:20.545 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:20:20.545 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:20:20.545 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:20:20.545 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:20:20.545 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:20.545 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:20:20.590 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:20:20.591 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:20:20.591 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:20.591 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:20:20.591 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:20.591 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:20:20.591 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:20:20.591 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 47,8164 ms
2023-10-20 19:20:20.592 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.1229ms.
2023-10-20 19:20:20.592 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:20:20.592 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:20:20.592 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:20:20.593 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:20:20.593 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:20:20.599 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 78.5709ms
2023-10-20 19:20:20.602 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:20:20.602 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:20:20.602 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:20:20.602 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:20:20.602 +02:00  DBG  Connection ID "18230571318976184352" disconnecting.
2023-10-20 19:20:20.602 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 83.7159ms
2023-10-20 19:20:44.208 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true - -
2023-10-20 19:20:44.208 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:20:44.208 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:20:44.208 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:20:44.208 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:20:44.208 +02:00  INF  CORS policy execution successful.
2023-10-20 19:20:44.208 +02:00  DBG  The request is a preflight request.
2023-10-20 19:20:44.209 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true - - - 204 - - 1.6325ms
2023-10-20 19:20:44.213 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true application/json 25
2023-10-20 19:20:44.214 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:20:44.214 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:20:44.214 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:20:44.214 +02:00  DBG  Successfully validated the token.
2023-10-20 19:20:44.214 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:20:44.214 +02:00  DBG  Authorization was successful.
2023-10-20 19:20:44.214 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:20:44.215 +02:00  INF  CORS policy execution successful.
2023-10-20 19:20:44.215 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:20:44.215 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:20:44.215 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:20:44.215 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:20:44.215 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:20:44.215 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:20:44.215 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:20:44.215 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:20:44.215 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:20:44.215 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:20:44.215 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:20:44.215 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:20:44.215 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:20:44.215 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:20:44.216 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:20:44.216 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:20:44.216 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:20:44.216 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:20:44.216 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:20:44.216 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:20:44.216 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:20:44.217 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:20:44.217 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:20:44.237 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:20:44.238 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:20:44.238 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:20:59.368 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:20:59.368 +02:00  DBG  Creating DbConnection.
2023-10-20 19:20:59.368 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:20:59.368 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:20:59.368 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:20:59.368 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:20:59.683 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:59.683 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_1 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:20:59.731 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_1 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:20:59.732 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:59.732 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:20:59.732 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:59.732 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:20:59.734 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:20:59.734 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:20:59.734 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:20:59.734 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:20:59.734 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:59.734 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:20:59.778 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:20:59.779 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:59.779 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:20:59.779 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:20:59.779 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:20:59.779 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:20:59.779 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true from '::1:58954' responded 200 in 15541,4310 ms
2023-10-20 19:20:59.779 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15541.8159ms.
2023-10-20 19:20:59.779 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:20:59.779 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:20:59.780 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:20:59.780 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:20:59.780 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:20:59.781 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 15565.838ms
2023-10-20 19:20:59.781 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:20:59.782 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:20:59.782 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:20:59.782 +02:00  DBG  Connection ID "18374686489872171032" disconnecting.
2023-10-20 19:20:59.782 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:20:59.782 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=1&champ=id&ascendant=true application/json 25 - 200 24 application/json;+charset=utf-8 15568.5887ms
2023-10-20 19:21:05.518 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:21:05.519 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:21:05.519 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:21:05.519 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:21:05.519 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:05.519 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:05.519 +02:00  DBG  The request is a preflight request.
2023-10-20 19:21:05.520 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.4536ms
2023-10-20 19:21:05.532 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:21:05.532 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:21:05.532 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:21:05.532 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:21:05.533 +02:00  DBG  Successfully validated the token.
2023-10-20 19:21:05.533 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:21:05.533 +02:00  DBG  Authorization was successful.
2023-10-20 19:21:05.533 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:05.533 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:05.533 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:21:05.533 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:21:05.533 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:21:05.534 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:21:05.534 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:21:05.534 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:21:05.534 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:21:05.534 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:21:05.534 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:21:05.534 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:21:05.534 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:21:05.534 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:21:05.535 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:21:05.535 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:21:05.535 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:21:05.535 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:21:05.535 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:05.535 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:05.535 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:05.535 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:05.562 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:21:05.563 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:21:05.563 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:21:05.564 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:21:05.564 +02:00  DBG  Creating DbConnection.
2023-10-20 19:21:05.564 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:21:05.564 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:05.564 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:05.564 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:05.564 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:05.565 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:21:05.635 +02:00  INF  Executed DbCommand (70ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:21:05.635 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:05.636 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:05.636 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:21:05.636 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:05.636 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:05.636 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:21:05.636 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 73,3055 ms
2023-10-20 19:21:05.636 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.5925ms.
2023-10-20 19:21:05.636 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:21:05.636 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:21:05.637 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:21:05.637 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:21:05.637 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:21:05.637 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 103.6113ms
2023-10-20 19:21:05.638 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:21:05.638 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:21:05.638 +02:00  DBG  Connection ID "18230571340451020815" disconnecting.
2023-10-20 19:21:05.638 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:05.638 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:05.639 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 106.6057ms
2023-10-20 19:21:10.031 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:21:10.031 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:21:10.031 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:21:10.031 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:21:10.031 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:10.032 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:10.032 +02:00  DBG  The request is a preflight request.
2023-10-20 19:21:10.032 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 1.4238ms
2023-10-20 19:21:10.032 +02:00  DBG  Connection ID "18302628921604046925" disconnecting.
2023-10-20 19:21:10.037 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:21:10.038 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:21:10.038 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:21:10.038 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:21:10.038 +02:00  DBG  Successfully validated the token.
2023-10-20 19:21:10.038 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:21:10.039 +02:00  DBG  Authorization was successful.
2023-10-20 19:21:10.039 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:10.039 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:10.039 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:21:10.039 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:21:10.039 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:21:10.039 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:21:10.039 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:21:10.040 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:21:10.040 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:21:10.040 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:21:10.040 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:21:10.040 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:21:10.040 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:21:10.040 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:21:10.040 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:21:10.041 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:21:10.041 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:21:10.041 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:21:10.041 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:21:10.041 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:21:10.041 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:21:10.042 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:21:10.042 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:21:10.042 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:21:10.042 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:21:10.042 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:21:10.042 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:21:10.042 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:21:10.042 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:21:10.042 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:21:10.042 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:21:10.043 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:21:10.043 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:21:10.043 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:21:10.043 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:21:10.043 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:21:10.043 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:21:10.043 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:21:10.043 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:21:10.043 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:21:10.043 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:10.043 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:10.044 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:10.044 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:10.073 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:21:10.074 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:21:10.075 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:21:18.858 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Appartement)
    .ThenInclude(v => v.TypeAppartement)
    .Include(u => u.Appartement)
    .ThenInclude(v => v.Ville)
    .Include(u => u.Locataire)
    .Where(demande => True && False || demande.Appartement != null && (int?)demande.Appartement.AgenceImmobiliereId == __criteres_AgenceImmobiliereId_0 && True && True)
    .OrderBy( => .Id)
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-20 19:21:18.858 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-20 19:21:18.858 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-20 19:21:18.858 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-20 19:21:18.858 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-20 19:21:18.866 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: AppartementEntite.Adresse (string), 9], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 10], [Property: AppartementEntite.ComplementAdresse (string), 11], [Property: AppartementEntite.CreeLe (DateTime) Required, 12], [Property: AppartementEntite.DepotDeGarantie (double) Required, 13], [Property: AppartementEntite.Loyer (double) Required, 14], [Property: AppartementEntite.ModifieLe (DateTime?), 15], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 16], [Property: AppartementEntite.PrixDesCharges (double) Required, 17], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 18], [Property: AppartementEntite.VilleId (int) Required FK Index, 19] }
            2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 20], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 21] }
            3 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: VilleEntite.CodePostal (string) Required, 23], [Property: VilleEntite.CreeLe (DateTime) Required, 24], [Property: VilleEntite.ModifieLe (DateTime?), 25], [Property: VilleEntite.Nom (string) Required MaxLength(255), 26] }
            4 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: LocataireEntite.CreeLe (DateTime) Required, 28], [Property: LocataireEntite.DateNaissance (DateTime?), 29], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 30], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 31], [Property: LocataireEntite.ModifieLe (DateTime?), 32], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 33], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 34], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 35] }
        SELECT t.Id, t.AppartementId, t.CreeLe, t.DateEntree, t.DateSortie, t.DepotDeGarantieRegle, t.LocataireId, t.ModifieLe, t.Id0, t.Adresse, t.AgenceImmobiliereId, t.ComplementAdresse, t.CreeLe0, t.DepotDeGarantie, t.Loyer, t.ModifieLe0, t.NombreDeMetre2, t.PrixDesCharges, t.TypeAppartementId, t.VilleId, t0.Id, t0.Nom, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone
        FROM 
        (
            SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, a.Id AS Id0, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe AS CreeLe0, a.DepotDeGarantie, a.Loyer, a.ModifieLe AS ModifieLe0, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
            FROM LocataireAppartement AS l
            INNER JOIN Appartement AS a ON l.AppartementId == a.Id
            WHERE ((TRUE && (FALSE || (Not(a.Id == NULL) && (a.AgenceImmobiliereId == @__criteres_AgenceImmobiliereId_0)))) && TRUE) && TRUE
            ORDER BY l.Id ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        LEFT JOIN TypeAppartement AS t0 ON t.TypeAppartementId == t0.Id
        INNER JOIN Ville AS v ON t.VilleId == v.Id
        INNER JOIN Locataire AS l0 ON t.LocataireId == l0.Id
        ORDER BY t.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-20 19:21:18.867 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:21:18.867 +02:00  DBG  Creating DbConnection.
2023-10-20 19:21:18.867 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:21:18.867 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:18.867 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:18.867 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:18.867 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:18.867 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:21:18.913 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:21:18.913 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.914 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:18.915 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:18.915 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:21:18.915 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:18.915 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:22.065 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:21:22.065 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:22.065 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:22.065 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:22.065 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:22.065 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:21:22.110 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:21:22.110 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:22.110 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:21:22.110 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:22.110 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:23.594 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:21:23.594 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 13520,1301 ms
2023-10-20 19:21:23.594 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13520.4363ms.
2023-10-20 19:21:23.594 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:21:23.594 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:21:23.594 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:21:23.594 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:21:23.595 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:21:23.595 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 13555.535ms
2023-10-20 19:21:23.595 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:21:23.595 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:21:23.595 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:23.596 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:23.596 +02:00  DBG  Connection ID "18302628908719144986" disconnecting.
2023-10-20 19:21:23.596 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 13558.2900ms
2023-10-20 19:21:34.830 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:21:34.830 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:21:34.831 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:21:34.831 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:21:34.831 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:34.831 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:34.831 +02:00  DBG  The request is a preflight request.
2023-10-20 19:21:34.832 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.3650ms
2023-10-20 19:21:34.836 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:21:34.836 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:21:34.836 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:21:34.836 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:21:34.836 +02:00  DBG  Successfully validated the token.
2023-10-20 19:21:34.836 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:21:34.836 +02:00  DBG  Authorization was successful.
2023-10-20 19:21:34.836 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:34.837 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:34.837 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:21:34.837 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:21:34.837 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:21:34.837 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:21:34.837 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:21:34.837 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:21:34.837 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:21:34.837 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:21:34.837 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:21:34.837 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:21:34.837 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:21:34.837 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:21:34.837 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:21:34.837 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:21:34.837 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:21:34.837 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:21:34.837 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:34.837 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:34.837 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:34.837 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:34.866 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:21:34.867 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:21:34.867 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:21:34.868 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:21:34.868 +02:00  DBG  Creating DbConnection.
2023-10-20 19:21:34.868 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:21:34.868 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:34.868 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:34.868 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:34.868 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:34.868 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:21:34.914 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:21:34.914 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:34.914 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:34.914 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:21:34.914 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:34.914 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:34.914 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:21:34.914 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 47,6422 ms
2023-10-20 19:21:34.914 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.1744ms.
2023-10-20 19:21:34.914 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:21:34.915 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:21:34.915 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:21:34.915 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:21:34.915 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:21:34.915 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 78.387ms
2023-10-20 19:21:34.915 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:21:34.916 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:21:34.916 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:34.916 +02:00  DBG  Connection ID "18374686489872171034" disconnecting.
2023-10-20 19:21:34.916 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:34.916 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 79.9620ms
2023-10-20 19:21:35.253 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:21:35.253 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:21:35.253 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:21:35.253 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:21:35.253 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:35.253 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:35.253 +02:00  DBG  The request is a preflight request.
2023-10-20 19:21:35.253 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.5256ms
2023-10-20 19:21:35.257 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:21:35.257 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:21:35.257 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:21:35.257 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:21:35.258 +02:00  DBG  Successfully validated the token.
2023-10-20 19:21:35.258 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:21:35.258 +02:00  DBG  Authorization was successful.
2023-10-20 19:21:35.258 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:21:35.258 +02:00  INF  CORS policy execution successful.
2023-10-20 19:21:35.258 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:21:35.258 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:21:35.258 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:21:35.258 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:21:35.258 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:21:35.258 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:21:35.258 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:21:35.258 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:21:35.258 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:21:35.259 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:21:35.259 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:21:35.259 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:21:35.259 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:21:35.259 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:21:35.260 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:21:35.260 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:21:35.260 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:21:35.260 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:21:35.260 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:21:35.260 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:21:35.260 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:21:35.260 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:21:35.260 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:21:35.261 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:21:35.261 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:21:35.261 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:35.261 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:35.261 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:21:35.261 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:21:35.277 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:21:35.277 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:21:35.278 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:21:40.975 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:21:40.975 +02:00  DBG  Creating DbConnection.
2023-10-20 19:21:40.975 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:21:40.975 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:40.975 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:40.976 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:40.976 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:40.976 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:21:41.023 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:21:41.024 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.024 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.024 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.024 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.024 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:21:41.025 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:41.026 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 19:21:41.026 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:41.026 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:41.028 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:21:41.028 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:41.028 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:21:41.028 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:41.028 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:41.028 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:21:41.076 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:21:41.076 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:41.076 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:21:41.076 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:21:41.076 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:45.759 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:21:45.759 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 10481,8777 ms
2023-10-20 19:21:45.759 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10482.1597ms.
2023-10-20 19:21:45.759 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:21:45.759 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:21:45.759 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:21:45.759 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:21:45.759 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:21:45.760 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 10501.0915ms
2023-10-20 19:21:45.760 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:21:45.760 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:21:45.760 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:21:45.760 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:21:45.760 +02:00  DBG  Connection ID "18230571318976184354" disconnecting.
2023-10-20 19:21:45.760 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 10503.0046ms
2023-10-20 19:23:11.555 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:23:11.555 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:23:11.555 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:23:11.555 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:23:11.555 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:23:11.555 +02:00  INF  CORS policy execution successful.
2023-10-20 19:23:11.555 +02:00  DBG  The request is a preflight request.
2023-10-20 19:23:11.556 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.5706ms
2023-10-20 19:23:11.560 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:23:11.560 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:23:11.560 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:23:11.560 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:23:11.561 +02:00  DBG  Successfully validated the token.
2023-10-20 19:23:11.561 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:23:11.561 +02:00  DBG  Authorization was successful.
2023-10-20 19:23:11.561 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:23:11.561 +02:00  INF  CORS policy execution successful.
2023-10-20 19:23:11.561 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:23:11.561 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:23:11.561 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:23:11.561 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:23:11.562 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:23:11.562 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:23:11.562 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:23:11.562 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:23:11.562 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:23:11.562 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:23:11.562 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:23:11.562 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:23:11.562 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:23:11.563 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:23:11.563 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:23:11.563 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:23:11.563 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:23:11.563 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:23:11.563 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:23:11.563 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:23:11.582 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:23:11.582 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:23:11.583 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:23:11.583 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:23:11.583 +02:00  DBG  Creating DbConnection.
2023-10-20 19:23:11.584 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:23:11.584 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:23:11.584 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:23:11.584 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:23:11.585 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:11.585 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:23:11.629 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:23:11.629 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:11.630 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:11.630 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:23:11.630 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:11.630 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:23:11.630 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:23:11.630 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 47,8872 ms
2023-10-20 19:23:11.630 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.2014ms.
2023-10-20 19:23:11.630 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:23:11.630 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:23:11.630 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:23:11.630 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:23:11.630 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:23:11.631 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 68.9987ms
2023-10-20 19:23:11.631 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:23:11.631 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:23:11.631 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:23:11.631 +02:00  DBG  Connection ID "18374686519936942117" disconnecting.
2023-10-20 19:23:11.631 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:23:11.631 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 71.5718ms
2023-10-20 19:23:11.776 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:23:11.776 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:23:11.776 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:23:11.777 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:23:11.777 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:23:11.777 +02:00  INF  CORS policy execution successful.
2023-10-20 19:23:11.777 +02:00  DBG  The request is a preflight request.
2023-10-20 19:23:11.777 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4475ms
2023-10-20 19:23:11.781 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:23:11.781 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:23:11.781 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:23:11.781 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:23:11.782 +02:00  DBG  Successfully validated the token.
2023-10-20 19:23:11.782 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:23:11.782 +02:00  DBG  Authorization was successful.
2023-10-20 19:23:11.782 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:23:11.782 +02:00  INF  CORS policy execution successful.
2023-10-20 19:23:11.782 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:23:11.782 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:23:11.782 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:23:11.782 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:23:11.782 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:23:11.782 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:23:11.782 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:23:11.782 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:23:11.782 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:23:11.782 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:23:11.782 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:23:11.782 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:23:11.782 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:23:11.782 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:23:11.783 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:23:11.783 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:23:11.784 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:23:11.784 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:23:11.784 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:23:11.784 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:23:11.784 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:23:11.784 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:23:11.798 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:23:11.798 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:23:11.798 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:23:15.884 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:23:15.884 +02:00  DBG  Creating DbConnection.
2023-10-20 19:23:15.884 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:23:15.884 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:23:15.884 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:23:15.884 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:23:15.884 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:15.884 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:23:15.929 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:23:15.929 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.930 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:23:15.931 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:15.931 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:23:15.931 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:15.931 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:23:15.932 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:23:15.932 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:23:15.933 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:23:15.933 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:23:15.933 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:15.933 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:23:15.977 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:23:15.977 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:15.977 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:23:15.977 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:23:15.977 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:23:15.977 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:23:15.978 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 4179,6081 ms
2023-10-20 19:23:15.978 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4179.9101ms.
2023-10-20 19:23:15.978 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:23:15.978 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:23:15.978 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:23:15.978 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:23:15.978 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:23:15.979 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 4196.6975ms
2023-10-20 19:23:15.979 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:23:15.979 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:23:15.979 +02:00  DBG  Connection ID "18158513699168452619" disconnecting.
2023-10-20 19:23:15.979 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:23:15.979 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:23:15.979 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 4198.1984ms
2023-10-20 19:24:21.839 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:24:21.840 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:24:21.840 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:24:21.840 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:24:21.840 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:24:21.840 +02:00  INF  CORS policy execution successful.
2023-10-20 19:24:21.840 +02:00  DBG  The request is a preflight request.
2023-10-20 19:24:21.840 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.5227ms
2023-10-20 19:24:21.846 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:24:21.847 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:24:21.847 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:24:21.847 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:24:21.848 +02:00  DBG  Successfully validated the token.
2023-10-20 19:24:21.848 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:24:21.848 +02:00  DBG  Authorization was successful.
2023-10-20 19:24:21.848 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:24:21.848 +02:00  INF  CORS policy execution successful.
2023-10-20 19:24:21.848 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:24:21.848 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:24:21.848 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:24:21.848 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:24:21.848 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:24:21.848 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:24:21.848 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:24:21.848 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:24:21.848 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:24:21.848 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:24:21.849 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:24:21.849 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:24:21.849 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:24:21.849 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:24:21.849 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:24:21.849 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:24:21.849 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:24:21.849 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:24:21.849 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:24:21.849 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:24:21.874 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:24:21.874 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:24:21.875 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:24:21.876 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:24:21.876 +02:00  DBG  Creating DbConnection.
2023-10-20 19:24:21.876 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:24:21.876 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:24:21.877 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:24:21.877 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:24:21.877 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:21.878 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:24:21.925 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:24:21.925 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:21.925 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:21.925 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:24:21.925 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:21.925 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:24:21.926 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:24:21.926 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 51,3779 ms
2023-10-20 19:24:21.926 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.7881ms.
2023-10-20 19:24:21.926 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:24:21.926 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:24:21.926 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:24:21.926 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:24:21.926 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:24:21.927 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 78.3451ms
2023-10-20 19:24:21.927 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:24:21.927 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:24:21.927 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:24:21.927 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:24:21.927 +02:00  DBG  Connection ID "18230571336156053570" disconnecting.
2023-10-20 19:24:21.927 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 80.7944ms
2023-10-20 19:24:22.080 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:24:22.080 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:24:22.080 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:24:22.080 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:24:22.080 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:24:22.080 +02:00  INF  CORS policy execution successful.
2023-10-20 19:24:22.080 +02:00  DBG  The request is a preflight request.
2023-10-20 19:24:22.080 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.5422ms
2023-10-20 19:24:22.086 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:24:22.086 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:24:22.086 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:24:22.086 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:24:22.086 +02:00  DBG  Successfully validated the token.
2023-10-20 19:24:22.086 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:24:22.086 +02:00  DBG  Authorization was successful.
2023-10-20 19:24:22.086 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:24:22.086 +02:00  INF  CORS policy execution successful.
2023-10-20 19:24:22.086 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:24:22.086 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:24:22.086 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:24:22.086 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:24:22.086 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:24:22.086 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:24:22.086 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:24:22.086 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:24:22.087 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:24:22.087 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:24:22.087 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:24:22.087 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:24:22.087 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:24:22.087 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:24:22.087 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:24:22.087 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:24:22.087 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:24:22.087 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:24:22.087 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:24:22.087 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:24:22.088 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:24:22.088 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:24:22.108 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:24:22.109 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:24:22.109 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:24:22.112 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:24:22.112 +02:00  DBG  Creating DbConnection.
2023-10-20 19:24:22.112 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:24:22.112 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:24:22.112 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:24:22.112 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:24:22.112 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:22.112 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:24:22.157 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:24:22.157 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.158 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.159 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.160 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:24:22.160 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:22.160 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 19:24:22.160 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:22.160 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:24:22.162 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:24:22.162 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:24:22.162 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:24:22.162 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:24:22.162 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:22.162 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:24:22.206 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:24:22.206 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:22.207 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:24:22.207 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:24:22.207 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:24:22.207 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:24:22.207 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 98,3061 ms
2023-10-20 19:24:22.207 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.6169ms.
2023-10-20 19:24:22.207 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:24:22.207 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:24:22.208 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:24:22.208 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:24:22.208 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:24:22.209 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 122.5342ms
2023-10-20 19:24:22.209 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:24:22.210 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:24:22.210 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:24:22.210 +02:00  DBG  Connection ID "18374686511347007538" disconnecting.
2023-10-20 19:24:22.210 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:24:22.210 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 124.4387ms
2023-10-20 19:25:37.192 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:25:37.192 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:25:37.192 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:25:37.193 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:25:37.193 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:25:37.193 +02:00  INF  CORS policy execution successful.
2023-10-20 19:25:37.193 +02:00  DBG  The request is a preflight request.
2023-10-20 19:25:37.193 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.5627ms
2023-10-20 19:25:37.198 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:25:37.199 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:25:37.199 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:25:37.199 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:25:37.199 +02:00  DBG  Successfully validated the token.
2023-10-20 19:25:37.199 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:25:37.199 +02:00  DBG  Authorization was successful.
2023-10-20 19:25:37.199 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:25:37.199 +02:00  INF  CORS policy execution successful.
2023-10-20 19:25:37.199 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:25:37.199 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:25:37.199 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:25:37.200 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:25:37.200 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:25:37.200 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:25:37.200 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:25:37.200 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:25:37.200 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:25:37.200 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:25:37.200 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:25:37.200 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:25:37.200 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:25:37.200 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:25:37.200 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:25:37.200 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:25:37.200 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:25:37.200 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:25:37.200 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:25:37.200 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:25:37.221 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:25:37.221 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:25:37.222 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:25:37.223 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:25:37.223 +02:00  DBG  Creating DbConnection.
2023-10-20 19:25:37.223 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:25:37.223 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:25:37.223 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:25:37.223 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:25:37.223 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.223 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:25:37.269 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:25:37.269 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.269 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.269 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:25:37.269 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.269 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:25:37.269 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:25:37.269 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 47,9693 ms
2023-10-20 19:25:37.270 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.2452ms.
2023-10-20 19:25:37.270 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:25:37.270 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:25:37.270 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:25:37.270 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:25:37.270 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:25:37.270 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 70.5704ms
2023-10-20 19:25:37.270 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:25:37.271 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:25:37.271 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:25:37.271 +02:00  DBG  Connection ID "18302628908719144988" disconnecting.
2023-10-20 19:25:37.271 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:25:37.271 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 73.1259ms
2023-10-20 19:25:37.490 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:25:37.490 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:25:37.490 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:25:37.490 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:25:37.490 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:25:37.491 +02:00  INF  CORS policy execution successful.
2023-10-20 19:25:37.491 +02:00  DBG  The request is a preflight request.
2023-10-20 19:25:37.491 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.6076ms
2023-10-20 19:25:37.496 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:25:37.496 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:25:37.496 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:25:37.496 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:25:37.497 +02:00  DBG  Successfully validated the token.
2023-10-20 19:25:37.497 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:25:37.497 +02:00  DBG  Authorization was successful.
2023-10-20 19:25:37.497 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:25:37.497 +02:00  INF  CORS policy execution successful.
2023-10-20 19:25:37.497 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:25:37.497 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:25:37.497 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:25:37.497 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:25:37.498 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:25:37.498 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:25:37.498 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:25:37.498 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:25:37.498 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:25:37.498 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:25:37.498 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:25:37.498 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:25:37.498 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:25:37.498 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:25:37.499 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:25:37.499 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:25:37.499 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:25:37.499 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:25:37.499 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:25:37.499 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:25:37.499 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:25:37.499 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:25:37.499 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:25:37.499 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:25:37.499 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:25:37.500 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:25:37.500 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:25:37.521 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:25:37.521 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:25:37.522 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:25:37.525 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:25:37.525 +02:00  DBG  Creating DbConnection.
2023-10-20 19:25:37.525 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:25:37.526 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:25:37.526 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:25:37.526 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:25:37.526 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.526 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:25:37.571 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:25:37.571 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.571 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:25:37.572 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.572 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:25:37.572 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.572 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:25:37.576 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:25:37.576 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:25:37.576 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:25:37.577 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:25:37.577 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.577 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:25:37.621 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:25:37.621 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.621 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:25:37.621 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:25:37.621 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:25:37.621 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:25:37.622 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 100,0433 ms
2023-10-20 19:25:37.622 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.3747ms.
2023-10-20 19:25:37.622 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:25:37.622 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:25:37.622 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:25:37.622 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:25:37.622 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:25:37.623 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 125.3641ms
2023-10-20 19:25:37.623 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:25:37.624 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:25:37.624 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:25:37.624 +02:00  DBG  Connection ID "18230571306091282457" disconnecting.
2023-10-20 19:25:37.624 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:25:37.624 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 128.2443ms
2023-10-20 19:26:16.865 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:26:16.865 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:26:16.865 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:26:16.865 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:26:16.865 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:26:16.865 +02:00  INF  CORS policy execution successful.
2023-10-20 19:26:16.865 +02:00  DBG  The request is a preflight request.
2023-10-20 19:26:16.865 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.8119ms
2023-10-20 19:26:16.871 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:26:16.871 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:26:16.871 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:26:16.871 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:26:16.872 +02:00  DBG  Successfully validated the token.
2023-10-20 19:26:16.872 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:26:16.872 +02:00  DBG  Authorization was successful.
2023-10-20 19:26:16.872 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:26:16.873 +02:00  INF  CORS policy execution successful.
2023-10-20 19:26:16.873 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:26:16.873 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:26:16.873 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:26:16.873 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:26:16.873 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:26:16.873 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:26:16.873 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:26:16.873 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:26:16.873 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:26:16.873 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:26:16.873 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:26:16.873 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:26:16.874 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:26:16.874 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:26:16.874 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:26:16.874 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:26:16.874 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:26:16.874 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:26:16.874 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:26:16.874 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:26:16.901 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:26:16.901 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:26:16.902 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:26:16.902 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:26:16.902 +02:00  DBG  Creating DbConnection.
2023-10-20 19:26:16.902 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:26:16.902 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:16.903 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:16.903 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:17.241 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:17.241 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:26:17.290 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:26:17.290 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:17.290 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:17.290 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:26:17.290 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:17.290 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:17.290 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:26:17.290 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 388,9579 ms
2023-10-20 19:26:17.291 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 389.2577ms.
2023-10-20 19:26:17.291 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:26:17.291 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:26:17.291 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:26:17.291 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:26:17.291 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:26:17.292 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 418.7093ms
2023-10-20 19:26:17.292 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:26:17.292 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:26:17.292 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:17.292 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:17.292 +02:00  DBG  Connection ID "18230571340451020821" disconnecting.
2023-10-20 19:26:17.292 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 421.5279ms
2023-10-20 19:26:31.035 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:26:31.035 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:26:31.035 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:26:31.035 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:26:31.035 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:26:31.036 +02:00  INF  CORS policy execution successful.
2023-10-20 19:26:31.036 +02:00  DBG  The request is a preflight request.
2023-10-20 19:26:31.036 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.3911ms
2023-10-20 19:26:31.039 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:26:31.039 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:26:31.039 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:26:31.039 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:26:31.040 +02:00  DBG  Successfully validated the token.
2023-10-20 19:26:31.040 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:26:31.041 +02:00  DBG  Authorization was successful.
2023-10-20 19:26:31.041 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:26:31.041 +02:00  INF  CORS policy execution successful.
2023-10-20 19:26:31.041 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:26:31.041 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:26:31.041 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:26:31.041 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:26:31.042 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:26:31.042 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:26:31.042 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:26:31.042 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:26:31.042 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:26:31.042 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:26:31.042 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:26:31.042 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:26:31.042 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:26:31.042 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:26:31.042 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:26:31.042 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:26:31.042 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:26:31.042 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:26:31.042 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:26:31.042 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:26:31.061 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:26:31.062 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:26:31.062 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:26:31.063 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:26:31.063 +02:00  DBG  Creating DbConnection.
2023-10-20 19:26:31.063 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:26:31.063 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:31.063 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:31.063 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:31.063 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.063 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:26:31.110 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:26:31.110 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.110 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.110 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:26:31.110 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.111 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:31.111 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:26:31.111 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 48,9690 ms
2023-10-20 19:26:31.111 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.2585ms.
2023-10-20 19:26:31.111 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:26:31.111 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:26:31.111 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:26:31.111 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:26:31.111 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:26:31.112 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 70.7577ms
2023-10-20 19:26:31.113 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:26:31.113 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:26:31.113 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:31.113 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:31.113 +02:00  DBG  Connection ID "18158513699168452621" disconnecting.
2023-10-20 19:26:31.113 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 73.6588ms
2023-10-20 19:26:31.296 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:26:31.296 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:26:31.296 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:26:31.296 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:26:31.296 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:26:31.296 +02:00  INF  CORS policy execution successful.
2023-10-20 19:26:31.296 +02:00  DBG  The request is a preflight request.
2023-10-20 19:26:31.296 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4524ms
2023-10-20 19:26:31.300 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:26:31.300 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:26:31.300 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:26:31.300 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:26:31.300 +02:00  DBG  Successfully validated the token.
2023-10-20 19:26:31.300 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:26:31.300 +02:00  DBG  Authorization was successful.
2023-10-20 19:26:31.300 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:26:31.300 +02:00  INF  CORS policy execution successful.
2023-10-20 19:26:31.300 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:26:31.300 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:26:31.301 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:26:31.301 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:26:31.301 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:26:31.301 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:26:31.301 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:26:31.301 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:26:31.301 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:26:31.301 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:26:31.301 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:26:31.301 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:26:31.301 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:26:31.301 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:26:31.301 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:26:31.301 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:26:31.301 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:26:31.301 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:26:31.301 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:26:31.302 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:26:31.302 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:26:31.318 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:26:31.318 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:26:31.319 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:26:31.322 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:26:31.322 +02:00  DBG  Creating DbConnection.
2023-10-20 19:26:31.322 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:26:31.322 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:31.322 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:31.322 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:31.322 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.322 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:26:31.372 +02:00  INF  Executed DbCommand (50ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:26:31.373 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.373 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.374 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.375 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:26:31.375 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.375 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 19:26:31.375 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.375 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:31.378 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:26:31.378 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:31.378 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:26:31.378 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:31.378 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.378 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:26:31.435 +02:00  INF  Executed DbCommand (56ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:26:31.435 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.435 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:26:31.435 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:26:31.435 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:31.435 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:26:31.435 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 116,9586 ms
2023-10-20 19:26:31.435 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 117.1505ms.
2023-10-20 19:26:31.435 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:26:31.435 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:26:31.436 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:26:31.436 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:26:31.436 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:26:31.436 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 135.3211ms
2023-10-20 19:26:31.436 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:26:31.436 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:26:31.436 +02:00  DBG  Connection ID "18158513699168452623" disconnecting.
2023-10-20 19:26:31.436 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:26:31.436 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:26:31.437 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 136.6392ms
2023-10-20 19:27:41.566 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:27:41.566 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:27:41.566 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:27:41.566 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:27:41.566 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:27:41.566 +02:00  INF  CORS policy execution successful.
2023-10-20 19:27:41.566 +02:00  DBG  The request is a preflight request.
2023-10-20 19:27:41.566 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.4516ms
2023-10-20 19:27:41.570 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:27:41.571 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:27:41.571 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:27:41.571 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:27:41.572 +02:00  DBG  Successfully validated the token.
2023-10-20 19:27:41.572 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:27:41.572 +02:00  DBG  Authorization was successful.
2023-10-20 19:27:41.572 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:27:41.572 +02:00  INF  CORS policy execution successful.
2023-10-20 19:27:41.572 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:27:41.573 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:27:41.573 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:27:41.573 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:27:41.573 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:27:41.573 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:27:41.573 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:27:41.573 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:27:41.573 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:27:41.573 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:27:41.573 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:27:41.573 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:27:41.573 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:27:41.574 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:27:41.574 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:27:41.574 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:27:41.574 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:27:41.574 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:27:41.574 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:27:41.574 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:27:41.595 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:27:41.595 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:27:41.595 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:27:41.596 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:27:41.596 +02:00  DBG  Creating DbConnection.
2023-10-20 19:27:41.596 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:27:41.596 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:27:41.596 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:27:41.596 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:27:41.596 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.596 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:27:41.645 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:27:41.646 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.646 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.646 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:27:41.646 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.646 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:27:41.646 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:27:41.646 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 51,5082 ms
2023-10-20 19:27:41.646 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.8012ms.
2023-10-20 19:27:41.647 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:27:41.647 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:27:41.647 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:27:41.647 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:27:41.647 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:27:41.649 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 75.9686ms
2023-10-20 19:27:41.649 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:27:41.649 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:27:41.649 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:27:41.650 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:27:41.650 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 79.4929ms
2023-10-20 19:27:41.842 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:27:41.842 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:27:41.842 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:27:41.842 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:27:41.842 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:27:41.842 +02:00  INF  CORS policy execution successful.
2023-10-20 19:27:41.842 +02:00  DBG  The request is a preflight request.
2023-10-20 19:27:41.842 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4659ms
2023-10-20 19:27:41.846 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:27:41.846 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:27:41.846 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:27:41.846 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:27:41.846 +02:00  DBG  Successfully validated the token.
2023-10-20 19:27:41.846 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:27:41.846 +02:00  DBG  Authorization was successful.
2023-10-20 19:27:41.846 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:27:41.846 +02:00  INF  CORS policy execution successful.
2023-10-20 19:27:41.846 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:27:41.846 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:27:41.846 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:27:41.846 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:27:41.846 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:27:41.847 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:27:41.847 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:27:41.847 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:27:41.847 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:27:41.847 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:27:41.847 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:27:41.847 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:27:41.847 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:27:41.847 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:27:41.847 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:27:41.847 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:27:41.847 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:27:41.847 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:27:41.847 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:27:41.847 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:27:41.847 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:27:41.848 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:27:41.848 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:27:41.864 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:27:41.864 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:27:41.865 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:27:41.869 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:27:41.869 +02:00  DBG  Creating DbConnection.
2023-10-20 19:27:41.869 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:27:41.869 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:27:41.869 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:27:41.869 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:27:41.869 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.869 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:27:41.920 +02:00  INF  Executed DbCommand (51ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:27:41.920 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.920 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.920 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.921 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:27:41.922 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.922 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:27:41.922 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.922 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:27:41.924 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:27:41.924 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:27:41.924 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:27:41.924 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:27:41.924 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.924 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:27:41.971 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:27:41.971 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.971 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:27:41.971 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:27:41.971 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:27:41.971 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:27:41.971 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 106,8967 ms
2023-10-20 19:27:41.971 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 107.0808ms.
2023-10-20 19:27:41.972 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:27:41.972 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:27:41.972 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:27:41.972 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:27:41.972 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:27:41.973 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 126.1423ms
2023-10-20 19:27:41.973 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:27:41.973 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:27:41.973 +02:00  DBG  Connection ID "17509995370006970401" disconnecting.
2023-10-20 19:27:41.973 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:27:41.973 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:27:41.973 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 127.6172ms
2023-10-20 19:28:59.884 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:28:59.884 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:28:59.884 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:28:59.884 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:28:59.884 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:28:59.884 +02:00  INF  CORS policy execution successful.
2023-10-20 19:28:59.884 +02:00  DBG  The request is a preflight request.
2023-10-20 19:28:59.884 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.4431ms
2023-10-20 19:28:59.888 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:28:59.888 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:28:59.888 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:28:59.888 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:28:59.889 +02:00  DBG  Successfully validated the token.
2023-10-20 19:28:59.889 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:28:59.889 +02:00  DBG  Authorization was successful.
2023-10-20 19:28:59.889 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:28:59.889 +02:00  INF  CORS policy execution successful.
2023-10-20 19:28:59.889 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:28:59.890 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:28:59.890 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:28:59.890 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:28:59.890 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:28:59.890 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:28:59.890 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:28:59.890 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:28:59.890 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:28:59.890 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:28:59.890 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:28:59.890 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:28:59.890 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:28:59.890 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:28:59.890 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:28:59.891 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:28:59.891 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:28:59.891 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:28:59.891 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:28:59.891 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:28:59.918 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:28:59.918 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:28:59.919 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:28:59.920 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:28:59.920 +02:00  DBG  Creating DbConnection.
2023-10-20 19:28:59.920 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:28:59.920 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:28:59.920 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:28:59.920 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:28:59.920 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:28:59.920 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:28:59.970 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:28:59.970 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:28:59.970 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:28:59.970 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:28:59.970 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:28:59.970 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:28:59.970 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:28:59.971 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 52,1052 ms
2023-10-20 19:28:59.971 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.466ms.
2023-10-20 19:28:59.971 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:28:59.971 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:28:59.971 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:28:59.971 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:28:59.971 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:28:59.972 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 81.6119ms
2023-10-20 19:28:59.972 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:28:59.972 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:28:59.972 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:28:59.972 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:28:59.972 +02:00  DBG  Connection ID "18230571318976184362" disconnecting.
2023-10-20 19:28:59.972 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 84.4692ms
2023-10-20 19:29:00.152 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:29:00.152 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:00.152 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:29:00.152 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:29:00.152 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:00.152 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:00.152 +02:00  DBG  The request is a preflight request.
2023-10-20 19:29:00.152 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.5553ms
2023-10-20 19:29:00.157 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:29:00.157 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:00.157 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:00.157 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:00.157 +02:00  DBG  Successfully validated the token.
2023-10-20 19:29:00.158 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:29:00.158 +02:00  DBG  Authorization was successful.
2023-10-20 19:29:00.158 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:00.158 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:00.158 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:29:00.158 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:00.158 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:29:00.158 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:29:00.158 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:29:00.158 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:29:00.159 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:29:00.159 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:29:00.159 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:29:00.159 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:29:00.159 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:29:00.159 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:29:00.159 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:00.159 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:29:00.159 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:29:00.159 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:29:00.159 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:29:00.159 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:29:00.159 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:00.160 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:00.160 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:00.178 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:29:00.178 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:29:00.178 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:29:00.181 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:00.181 +02:00  DBG  Creating DbConnection.
2023-10-20 19:29:00.181 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:29:00.181 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:00.181 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:00.181 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:00.181 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:00.181 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:29:00.228 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:29:00.228 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.228 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.228 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:00.229 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:00.229 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:29:00.229 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:00.229 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:00.231 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:00.231 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:00.231 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:00.231 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:00.231 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:00.231 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:29:00.278 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:29:00.278 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:00.278 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:29:00.278 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:00.278 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:00.278 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:29:00.278 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 100,6224 ms
2023-10-20 19:29:00.279 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.8853ms.
2023-10-20 19:29:00.279 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:29:00.279 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:29:00.279 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:29:00.279 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:29:00.279 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:29:00.280 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 120.9904ms
2023-10-20 19:29:00.280 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:00.280 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:29:00.280 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:00.280 +02:00  DBG  Connection ID "18230571336156053576" disconnecting.
2023-10-20 19:29:00.280 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:00.280 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 123.2435ms
2023-10-20 19:29:11.465 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:29:11.465 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:29:11.465 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:29:11.465 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:29:11.466 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:11.466 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:11.466 +02:00  DBG  The request is a preflight request.
2023-10-20 19:29:11.466 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.2555ms
2023-10-20 19:29:11.470 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:29:11.470 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:29:11.470 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:29:11.470 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:29:11.471 +02:00  DBG  Successfully validated the token.
2023-10-20 19:29:11.471 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:29:11.471 +02:00  DBG  Authorization was successful.
2023-10-20 19:29:11.471 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:11.471 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:11.471 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:29:11.472 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:29:11.472 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:29:11.472 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:29:11.472 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:29:11.472 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:29:11.472 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:29:11.472 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:29:11.472 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:29:11.472 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:29:11.472 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:29:11.472 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:29:11.472 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:29:11.472 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:29:11.472 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:29:11.472 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:29:11.472 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:11.472 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:11.472 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:11.472 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:11.496 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:29:11.497 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:29:11.497 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:29:11.497 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:11.497 +02:00  DBG  Creating DbConnection.
2023-10-20 19:29:11.497 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:29:11.498 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:11.498 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:11.498 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:11.498 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.498 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:29:11.548 +02:00  INF  Executed DbCommand (50ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:29:11.548 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.548 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.548 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:29:11.549 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.549 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:11.549 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:29:11.549 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 52,0004 ms
2023-10-20 19:29:11.549 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.169ms.
2023-10-20 19:29:11.549 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:29:11.549 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:29:11.549 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:29:11.549 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:29:11.549 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:29:11.549 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 77.5661ms
2023-10-20 19:29:11.549 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:29:11.550 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:29:11.550 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:11.550 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:11.550 +02:00  DBG  Connection ID "18374686489872171040" disconnecting.
2023-10-20 19:29:11.550 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 79.5081ms
2023-10-20 19:29:11.685 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:29:11.685 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:11.685 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:29:11.685 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:29:11.685 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:11.685 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:11.685 +02:00  DBG  The request is a preflight request.
2023-10-20 19:29:11.685 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.3988ms
2023-10-20 19:29:11.689 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:29:11.689 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:11.689 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:11.689 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:11.690 +02:00  DBG  Successfully validated the token.
2023-10-20 19:29:11.690 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:29:11.690 +02:00  DBG  Authorization was successful.
2023-10-20 19:29:11.690 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:11.690 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:11.690 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:29:11.690 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:11.690 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:29:11.690 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:29:11.690 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:29:11.690 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:29:11.690 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:29:11.690 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:29:11.690 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:29:11.691 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:29:11.691 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:29:11.691 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:29:11.691 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:29:11.691 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:29:11.691 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:11.691 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:11.691 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:29:11.691 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:11.691 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:29:11.691 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:11.692 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:29:11.692 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:11.693 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:11.693 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:11.693 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:11.693 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:11.709 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:29:11.709 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:29:11.710 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:29:11.714 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:11.714 +02:00  DBG  Creating DbConnection.
2023-10-20 19:29:11.714 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:29:11.714 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:11.714 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:11.714 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:11.714 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.714 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:29:11.765 +02:00  INF  Executed DbCommand (51ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:11.766 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.767 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:29:11.767 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.767 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:11.769 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:11.769 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:11.769 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:11.769 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:11.769 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.769 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:29:11.816 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:29:11.816 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.816 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:29:11.816 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:11.816 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:11.816 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:29:11.816 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 106,6262 ms
2023-10-20 19:29:11.816 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 107.0693ms.
2023-10-20 19:29:11.817 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:29:11.817 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:29:11.817 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:29:11.817 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:29:11.817 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:29:11.818 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 127.1356ms
2023-10-20 19:29:11.818 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:11.818 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:29:11.818 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:11.818 +02:00  DBG  Connection ID "18230571318976184364" disconnecting.
2023-10-20 19:29:11.818 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:11.818 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 128.9974ms
2023-10-20 19:29:46.980 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:29:46.980 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:29:46.981 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:29:46.981 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:29:46.981 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:46.981 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:46.981 +02:00  DBG  The request is a preflight request.
2023-10-20 19:29:46.981 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.4187ms
2023-10-20 19:29:46.984 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:29:46.985 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:29:46.985 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:29:46.985 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:29:46.985 +02:00  DBG  Successfully validated the token.
2023-10-20 19:29:46.985 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:29:46.985 +02:00  DBG  Authorization was successful.
2023-10-20 19:29:46.985 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:46.985 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:46.986 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:29:46.986 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:29:46.986 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:29:46.986 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:29:46.986 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:29:46.986 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:29:46.986 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:29:46.986 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:29:46.986 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:29:46.986 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:29:46.986 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:29:46.986 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:29:46.987 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:29:46.987 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:29:46.987 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:29:46.987 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:29:46.987 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:46.987 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:46.987 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:46.987 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:47.004 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:29:47.005 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:29:47.005 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:29:47.005 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:47.005 +02:00  DBG  Creating DbConnection.
2023-10-20 19:29:47.005 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:29:47.005 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:47.005 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:47.005 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:47.005 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.005 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:29:47.052 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:29:47.053 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.053 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.053 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:29:47.053 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.053 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:47.053 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:29:47.054 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 48,9573 ms
2023-10-20 19:29:47.060 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.7949ms.
2023-10-20 19:29:47.061 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:29:47.065 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:29:47.065 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:29:47.065 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:29:47.065 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:29:47.065 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 78.911ms
2023-10-20 19:29:47.065 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:29:47.065 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:29:47.065 +02:00  DBG  Connection ID "18374686519936942119" disconnecting.
2023-10-20 19:29:47.065 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:47.065 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:47.066 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 81.1183ms
2023-10-20 19:29:47.198 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:29:47.198 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:47.199 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:29:47.199 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:29:47.199 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:47.199 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:47.199 +02:00  DBG  The request is a preflight request.
2023-10-20 19:29:47.199 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4158ms
2023-10-20 19:29:47.202 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:29:47.202 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:47.202 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:29:47.202 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:47.202 +02:00  DBG  Successfully validated the token.
2023-10-20 19:29:47.202 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:29:47.202 +02:00  DBG  Authorization was successful.
2023-10-20 19:29:47.202 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:29:47.202 +02:00  INF  CORS policy execution successful.
2023-10-20 19:29:47.202 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:29:47.202 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:47.203 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:29:47.203 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:29:47.203 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:29:47.203 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:29:47.203 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:29:47.203 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:29:47.203 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:29:47.203 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:29:47.203 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:29:47.203 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:29:47.203 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:47.203 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:29:47.203 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:29:47.203 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:29:47.203 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:47.204 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:29:47.204 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:29:47.218 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:29:47.218 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:29:47.218 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:29:47.220 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:47.220 +02:00  DBG  Creating DbConnection.
2023-10-20 19:29:47.220 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:29:47.220 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:47.220 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:47.220 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:47.220 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.221 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:29:47.269 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.270 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:29:47.271 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.271 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:29:47.271 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.271 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:47.274 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:29:47.274 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:47.274 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:29:47.274 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:47.274 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.274 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:29:47.321 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:29:47.321 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.321 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:29:47.321 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:29:47.321 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:47.321 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:29:47.321 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 103,4440 ms
2023-10-20 19:29:47.321 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.6351ms.
2023-10-20 19:29:47.322 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:29:47.322 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:29:47.322 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:29:47.322 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:29:47.322 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:29:47.322 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 119.3533ms
2023-10-20 19:29:47.322 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:29:47.322 +02:00  DBG  Connection ID "18158513699168452627" disconnecting.
2023-10-20 19:29:47.322 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:29:47.322 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:29:47.323 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:29:47.323 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 606 application/json;+charset=utf-8 120.6168ms
2023-10-20 19:30:34.481 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/login - -
2023-10-20 19:30:34.481 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:30:34.481 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:30:34.481 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:30:34.481 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:34.481 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:34.481 +02:00  DBG  The request is a preflight request.
2023-10-20 19:30:34.482 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/login - - - 204 - - 0.4210ms
2023-10-20 19:30:34.482 +02:00  DBG  Connection ID "17509995370006970403" disconnecting.
2023-10-20 19:30:34.486 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/login application/json 2
2023-10-20 19:30:34.486 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:30:34.486 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 19:30:34.486 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:30:34.486 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:30:34.486 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:34.487 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:34.487 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:30:34.487 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:30:34.487 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 19:30:34.487 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:30:34.487 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:30:34.487 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:30:34.487 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:30:34.487 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:30:34.487 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:30:34.488 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:30:34.488 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:34.488 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:34.488 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:34.488 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:34.500 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:30:34.503 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 19:30:34.504 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:30:34.504 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:30:34.504 +02:00  DBG  Creating DbConnection.
2023-10-20 19:30:34.504 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:30:34.504 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:34.504 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:34.504 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:34.504 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:34.506 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:30:34.552 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:30:34.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:34.552 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:34.552 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:30:34.552 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:34.552 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:34.552 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:30:34.552 +02:00  INF  Information : POST https://localhost:44375/login from '::1:58954' responded 200 in 49,4374 ms
2023-10-20 19:30:34.554 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 53.4813ms.
2023-10-20 19:30:34.554 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:30:34.554 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:30:34.554 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:30:34.554 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:30:34.554 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 19:30:34.555 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 67.6347ms
2023-10-20 19:30:34.555 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:30:34.555 +02:00  DBG  Connection ID "18302628908719144990" disconnecting.
2023-10-20 19:30:34.555 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:30:34.555 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:34.555 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:34.555 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/login application/json 2 - 200 517 application/json;+charset=utf-8 68.7757ms
2023-10-20 19:30:34.571 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:30:34.572 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:30:34.572 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:30:34.572 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:30:34.572 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:34.572 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:34.572 +02:00  DBG  The request is a preflight request.
2023-10-20 19:30:34.572 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.5523ms
2023-10-20 19:30:34.576 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:30:34.576 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:30:34.576 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:30:34.576 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:30:34.577 +02:00  DBG  Successfully validated the token.
2023-10-20 19:30:34.577 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:30:34.577 +02:00  DBG  Authorization was successful.
2023-10-20 19:30:34.577 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:34.577 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:34.577 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:30:34.577 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:30:34.577 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:30:34.577 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:30:34.577 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:30:34.577 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:30:34.577 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:30:34.577 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:30:34.577 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:30:34.577 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:30:34.577 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:30:34.578 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:30:34.578 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:30:34.578 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:30:34.578 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:30:34.578 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:30:34.578 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:34.578 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:34.578 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:34.578 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:34.593 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:30:34.593 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:30:34.593 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:30:34.594 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:30:34.594 +02:00  DBG  Creating DbConnection.
2023-10-20 19:30:34.594 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:30:34.594 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:34.594 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:34.594 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:34.594 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:34.594 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:30:34.641 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:30:34.641 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:34.641 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:34.641 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:30:34.641 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:34.641 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:34.641 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:30:34.641 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 48,4196 ms
2023-10-20 19:30:34.641 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.5598ms.
2023-10-20 19:30:34.642 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:30:34.642 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:30:34.642 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:30:34.642 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:30:34.642 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:30:34.642 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 64.6572ms
2023-10-20 19:30:34.642 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:30:34.642 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:30:34.642 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:34.642 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:34.642 +02:00  DBG  Connection ID "18230571340451020825" disconnecting.
2023-10-20 19:30:34.642 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 65.9033ms
2023-10-20 19:30:45.254 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:30:45.254 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:30:45.254 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:30:45.254 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:30:45.254 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:45.254 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:45.254 +02:00  DBG  The request is a preflight request.
2023-10-20 19:30:45.254 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.3903ms
2023-10-20 19:30:45.258 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:30:45.258 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:30:45.258 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:30:45.258 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:30:45.259 +02:00  DBG  Successfully validated the token.
2023-10-20 19:30:45.259 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:30:45.259 +02:00  DBG  Authorization was successful.
2023-10-20 19:30:45.259 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:45.259 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:45.259 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:30:45.259 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:30:45.259 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:30:45.259 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:30:45.259 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:30:45.259 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:30:45.259 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:30:45.259 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:30:45.259 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:30:45.259 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:30:45.259 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:30:45.259 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:30:45.259 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:30:45.259 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:30:45.259 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:30:45.259 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:30:45.259 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:45.260 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:45.260 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:45.260 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:45.276 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:30:45.277 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:30:45.277 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:30:45.277 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:30:45.277 +02:00  DBG  Creating DbConnection.
2023-10-20 19:30:45.277 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:30:45.277 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:45.277 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:45.277 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:45.278 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.278 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:30:45.325 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:30:45.325 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.325 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.325 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:30:45.325 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.325 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:45.325 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:30:45.325 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 48,4612 ms
2023-10-20 19:30:45.325 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.6421ms.
2023-10-20 19:30:45.325 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:30:45.325 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:30:45.325 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:30:45.325 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:30:45.325 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:30:45.326 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 66.6983ms
2023-10-20 19:30:45.326 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:30:45.326 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:30:45.326 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:45.326 +02:00  DBG  Connection ID "18158513699168452629" disconnecting.
2023-10-20 19:30:45.326 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:45.326 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 68.1080ms
2023-10-20 19:30:45.481 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:30:45.481 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:30:45.481 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:30:45.481 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:30:45.481 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:45.481 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:45.481 +02:00  DBG  The request is a preflight request.
2023-10-20 19:30:45.481 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4340ms
2023-10-20 19:30:45.485 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:30:45.485 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:30:45.485 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:30:45.485 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:30:45.485 +02:00  DBG  Successfully validated the token.
2023-10-20 19:30:45.485 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:30:45.485 +02:00  DBG  Authorization was successful.
2023-10-20 19:30:45.485 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:30:45.485 +02:00  INF  CORS policy execution successful.
2023-10-20 19:30:45.485 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:30:45.485 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:30:45.485 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:30:45.485 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:30:45.486 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:30:45.486 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:30:45.486 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:30:45.486 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:30:45.486 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:30:45.486 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:30:45.486 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:30:45.486 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:30:45.486 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:30:45.486 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:30:45.487 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:30:45.487 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:30:45.487 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:30:45.487 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:30:45.487 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:30:45.487 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:30:45.487 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:30:45.487 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:45.488 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:30:45.488 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:30:45.501 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:30:45.501 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:30:45.501 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:30:45.504 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:30:45.504 +02:00  DBG  Creating DbConnection.
2023-10-20 19:30:45.504 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:30:45.504 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:45.504 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:45.504 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:45.504 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.504 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:30:45.551 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:30:45.551 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.551 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.551 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.551 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.551 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:30:45.552 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.552 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:30:45.552 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.552 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:45.554 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:30:45.554 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:45.554 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:30:45.554 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:45.554 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.554 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:30:45.601 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:30:45.602 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.602 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:30:45.602 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:30:45.602 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:45.602 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:30:45.602 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 100,9170 ms
2023-10-20 19:30:45.602 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 101.1537ms.
2023-10-20 19:30:45.602 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:30:45.602 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:30:45.602 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:30:45.602 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:30:45.602 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:30:45.603 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 117.2677ms
2023-10-20 19:30:45.603 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:30:45.603 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:30:45.603 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:30:45.603 +02:00  DBG  Connection ID "18230571336156053580" disconnecting.
2023-10-20 19:30:45.603 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:30:45.603 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 118.6125ms
2023-10-20 19:32:44.296 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:32:44.297 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:32:44.297 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:32:44.297 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:32:44.297 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:32:44.297 +02:00  INF  CORS policy execution successful.
2023-10-20 19:32:44.298 +02:00  DBG  The request is a preflight request.
2023-10-20 19:32:44.304 +02:00  DBG  Connection ID "18374686511347007542" disconnecting.
2023-10-20 19:32:44.305 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 1.9358ms
2023-10-20 19:32:44.313 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:32:44.313 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:32:44.313 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:32:44.313 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:32:44.313 +02:00  DBG  Successfully validated the token.
2023-10-20 19:32:44.313 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:32:44.313 +02:00  DBG  Authorization was successful.
2023-10-20 19:32:44.314 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:32:44.314 +02:00  INF  CORS policy execution successful.
2023-10-20 19:32:44.314 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:32:44.314 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:32:44.314 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:32:44.314 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:32:44.314 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:32:44.314 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:32:44.314 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:32:44.314 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:32:44.314 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:32:44.314 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:32:44.314 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:32:44.314 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:32:44.314 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:32:44.314 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:32:44.314 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:32:44.314 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:32:44.314 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:32:44.314 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:32:44.314 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:32:44.314 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:32:44.330 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:32:44.331 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:32:44.331 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:32:44.331 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:32:44.331 +02:00  DBG  Creating DbConnection.
2023-10-20 19:32:44.331 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:32:44.331 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:32:44.332 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:32:44.332 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:32:44.652 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:32:44.652 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:32:44.700 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:32:44.700 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:32:44.700 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:32:44.700 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:32:44.700 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:32:44.700 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:32:44.701 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:32:44.701 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 369,9601 ms
2023-10-20 19:32:44.701 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 370.3034ms.
2023-10-20 19:32:44.701 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:32:44.701 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:32:44.701 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:32:44.701 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:32:44.701 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:32:44.702 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 387.8595ms
2023-10-20 19:32:44.702 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:32:44.702 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:32:44.702 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:32:44.702 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:32:44.702 +02:00  DBG  Connection ID "18158513699168452631" disconnecting.
2023-10-20 19:32:44.702 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 389.3719ms
2023-10-20 19:33:00.388 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:33:00.388 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:33:00.388 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:33:00.388 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:33:00.388 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:00.388 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:00.388 +02:00  DBG  The request is a preflight request.
2023-10-20 19:33:00.388 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.4323ms
2023-10-20 19:33:00.392 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:33:00.392 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:33:00.392 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:33:00.392 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:33:00.392 +02:00  DBG  Successfully validated the token.
2023-10-20 19:33:00.392 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:33:00.392 +02:00  DBG  Authorization was successful.
2023-10-20 19:33:00.392 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:00.392 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:00.393 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:33:00.393 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:33:00.393 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:33:00.394 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:33:00.394 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:33:00.394 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:33:00.394 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:33:00.394 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:33:00.394 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:33:00.394 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:33:00.394 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:33:00.394 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:33:00.394 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:33:00.394 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:33:00.394 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:33:00.394 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:33:00.394 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:00.394 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:00.394 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:00.394 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:00.414 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:33:00.414 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:33:00.415 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:33:00.415 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:00.415 +02:00  DBG  Creating DbConnection.
2023-10-20 19:33:00.415 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:33:00.415 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:00.415 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:00.415 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:00.415 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.415 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:33:00.461 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:33:00.461 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.461 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.461 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:33:00.461 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.461 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:00.461 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:33:00.461 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 47,2974 ms
2023-10-20 19:33:00.461 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.4756ms.
2023-10-20 19:33:00.461 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:33:00.461 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:33:00.461 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:33:00.461 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:33:00.462 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:33:00.462 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 68.4186ms
2023-10-20 19:33:00.462 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:33:00.463 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:33:00.463 +02:00  DBG  Connection ID "18158513699168452633" disconnecting.
2023-10-20 19:33:00.463 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:00.463 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:00.463 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 71.2868ms
2023-10-20 19:33:00.634 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:33:00.634 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:00.634 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:33:00.634 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:33:00.634 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:00.634 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:00.634 +02:00  DBG  The request is a preflight request.
2023-10-20 19:33:00.634 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.3936ms
2023-10-20 19:33:00.638 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:33:00.638 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:00.638 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:00.638 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:00.638 +02:00  DBG  Successfully validated the token.
2023-10-20 19:33:00.638 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:33:00.638 +02:00  DBG  Authorization was successful.
2023-10-20 19:33:00.638 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:00.639 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:00.639 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:33:00.639 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:00.639 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:33:00.639 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:33:00.639 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:33:00.639 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:33:00.639 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:33:00.639 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:33:00.639 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:33:00.639 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:33:00.639 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:33:00.639 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:33:00.639 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:33:00.639 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:33:00.639 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:00.639 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:00.639 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:33:00.639 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:00.639 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:00.640 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:00.640 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:00.656 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:33:00.657 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:33:00.657 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:33:00.659 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:00.659 +02:00  DBG  Creating DbConnection.
2023-10-20 19:33:00.659 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:33:00.659 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:00.659 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:00.659 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:00.659 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.659 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:33:00.711 +02:00  INF  Executed DbCommand (52ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.712 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.713 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.713 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.713 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.713 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:00.713 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.713 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:33:00.713 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.713 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:00.716 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:00.716 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:00.716 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:00.716 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:00.716 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.716 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:33:00.764 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:33:00.764 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.764 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:33:00.764 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:00.764 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:00.764 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:33:00.764 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 107,6906 ms
2023-10-20 19:33:00.764 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 107.9661ms.
2023-10-20 19:33:00.765 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:33:00.765 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:33:00.765 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:33:00.765 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:33:00.765 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:33:00.765 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 126.5864ms
2023-10-20 19:33:00.766 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:00.766 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:33:00.766 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:00.766 +02:00  DBG  Connection ID "18374686511347007544" disconnecting.
2023-10-20 19:33:00.766 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:00.766 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 128.4873ms
2023-10-20 19:33:07.193 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/login - -
2023-10-20 19:33:07.193 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:33:07.193 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:33:07.193 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:33:07.193 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.193 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.193 +02:00  DBG  The request is a preflight request.
2023-10-20 19:33:07.194 +02:00  DBG  Connection ID "18374686489872171042" disconnecting.
2023-10-20 19:33:07.194 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/login - - - 204 - - 0.3750ms
2023-10-20 19:33:07.198 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/login application/json 2
2023-10-20 19:33:07.198 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-20 19:33:07.198 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-20 19:33:07.198 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:33:07.198 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:33:07.198 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.198 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.198 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:33:07.198 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:33:07.198 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-20 19:33:07.198 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:33:07.198 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:33:07.198 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:33:07.198 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:33:07.198 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:33:07.198 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:33:07.198 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-20 19:33:07.198 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.198 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.199 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.199 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.213 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:33:07.215 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-20 19:33:07.215 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:33:07.215 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:07.215 +02:00  DBG  Creating DbConnection.
2023-10-20 19:33:07.215 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:33:07.215 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.216 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.216 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.216 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.216 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:33:07.264 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-20 19:33:07.264 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.264 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.264 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:33:07.264 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.264 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.264 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:33:07.264 +02:00  INF  Information : POST https://localhost:44375/login from '::1:58954' responded 200 in 49,8193 ms
2023-10-20 19:33:07.266 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 53.0056ms.
2023-10-20 19:33:07.266 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:33:07.266 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:33:07.266 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:33:07.266 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:33:07.266 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-20 19:33:07.267 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 68.2751ms
2023-10-20 19:33:07.267 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-20 19:33:07.267 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:33:07.267 +02:00  DBG  Connection ID "17509995370006970405" disconnecting.
2023-10-20 19:33:07.267 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.267 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.267 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/login application/json 2 - 200 517 application/json;+charset=utf-8 69.3319ms
2023-10-20 19:33:07.293 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:33:07.293 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:33:07.293 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:33:07.293 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:33:07.293 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.293 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.293 +02:00  DBG  The request is a preflight request.
2023-10-20 19:33:07.293 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.3847ms
2023-10-20 19:33:07.304 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:33:07.304 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:33:07.304 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:33:07.304 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:33:07.305 +02:00  DBG  Successfully validated the token.
2023-10-20 19:33:07.305 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:33:07.305 +02:00  DBG  Authorization was successful.
2023-10-20 19:33:07.305 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.305 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.305 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:33:07.305 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:33:07.305 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:33:07.305 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:33:07.305 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:33:07.305 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:33:07.305 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:33:07.305 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:33:07.305 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:33:07.306 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:33:07.306 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:33:07.306 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:33:07.306 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:33:07.306 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:33:07.306 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:33:07.306 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:33:07.306 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.306 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.306 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.306 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.308 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:33:07.308 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:07.323 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:33:07.323 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:33:07.323 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:33:07.323 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.323 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.323 +02:00  DBG  The request is a preflight request.
2023-10-20 19:33:07.323 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:33:07.323 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 15.1502ms
2023-10-20 19:33:07.324 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:33:07.324 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:07.325 +02:00  DBG  Creating DbConnection.
2023-10-20 19:33:07.325 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:33:07.325 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.325 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.325 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.325 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.325 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:33:07.330 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:33:07.330 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:07.330 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:07.330 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:07.331 +02:00  DBG  Successfully validated the token.
2023-10-20 19:33:07.331 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:33:07.331 +02:00  DBG  Authorization was successful.
2023-10-20 19:33:07.331 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.331 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.331 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:33:07.331 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:07.331 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:33:07.331 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:33:07.331 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:33:07.331 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:33:07.331 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:33:07.331 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:33:07.331 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:33:07.331 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:33:07.331 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:33:07.331 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:33:07.331 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:33:07.331 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:33:07.331 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.332 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.332 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.346 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:33:07.346 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:33:07.346 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:33:07.348 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:07.348 +02:00  DBG  Creating DbConnection.
2023-10-20 19:33:07.348 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:33:07.348 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.348 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.348 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.372 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:33:07.372 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.372 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.372 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:33:07.372 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.372 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.372 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:33:07.372 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:58954' responded 200 in 49,0139 ms
2023-10-20 19:33:07.372 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.1907ms.
2023-10-20 19:33:07.372 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:33:07.373 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:33:07.373 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:33:07.373 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:33:07.373 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:33:07.373 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 67.6992ms
2023-10-20 19:33:07.373 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:33:07.373 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:33:07.373 +02:00  DBG  Connection ID "18230571340451020827" disconnecting.
2023-10-20 19:33:07.373 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.373 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.373 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 69.3522ms
2023-10-20 19:33:07.396 +02:00  DBG  Connection ID "18302628921604046945" disconnecting.
2023-10-20 19:33:07.396 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:33:07.396 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:07.396 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:33:07.396 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:07.396 +02:00  DBG  Successfully validated the token.
2023-10-20 19:33:07.396 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:33:07.396 +02:00  DBG  Authorization was successful.
2023-10-20 19:33:07.396 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:33:07.396 +02:00  INF  CORS policy execution successful.
2023-10-20 19:33:07.396 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:33:07.396 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:07.397 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:33:07.397 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:33:07.397 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:33:07.397 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:33:07.397 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:33:07.397 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:33:07.397 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:33:07.397 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:33:07.397 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:33:07.397 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:33:07.397 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:33:07.397 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:33:07.398 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:33:07.398 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:33:07.399 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:33:07.399 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:07.399 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:33:07.399 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.399 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:33:07.399 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:33:07.417 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:33:07.417 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:33:07.425 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:33:07.427 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:07.427 +02:00  DBG  Creating DbConnection.
2023-10-20 19:33:07.427 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:33:07.427 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.427 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.427 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.427 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.427 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:33:07.473 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.474 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.475 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.475 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:33:07.475 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.475 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.476 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:07.476 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.476 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.477 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.477 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.477 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:33:07.521 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:33:07.521 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.521 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:33:07.522 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.522 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.522 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:33:07.522 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 104,8641 ms
2023-10-20 19:33:07.522 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 105.0373ms.
2023-10-20 19:33:07.522 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:33:07.522 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:33:07.522 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:33:07.522 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:33:07.522 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:33:07.522 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 125.5802ms
2023-10-20 19:33:07.522 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:07.523 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:33:07.523 +02:00  DBG  Connection ID "18230571318976184368" disconnecting.
2023-10-20 19:33:07.523 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.523 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.523 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 127.1037ms
2023-10-20 19:33:07.636 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.636 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:33:07.691 +02:00  INF  Executed DbCommand (55ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:33:07.691 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.691 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.691 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.691 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.692 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.693 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.693 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.693 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.693 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.693 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:33:07.693 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.693 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 19:33:07.693 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.693 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.695 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:33:07.695 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.695 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:33:07.695 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.696 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.696 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:33:07.741 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:33:07.742 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.742 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:33:07.742 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:33:07.742 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.742 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:33:07.742 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:58954' responded 200 in 396,0730 ms
2023-10-20 19:33:07.742 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 396.2173ms.
2023-10-20 19:33:07.742 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:33:07.742 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:33:07.742 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:33:07.742 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:33:07.742 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:33:07.835 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 504.0871ms
2023-10-20 19:33:07.835 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:33:07.835 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:33:07.835 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:33:07.835 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:33:07.835 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 505.9975ms
2023-10-20 19:36:30.385 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:36:30.385 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:36:30.385 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:36:30.385 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:36:30.385 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:30.385 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:30.386 +02:00  DBG  The request is a preflight request.
2023-10-20 19:36:30.386 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.6058ms
2023-10-20 19:36:30.390 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:36:30.390 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:36:30.390 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:36:30.390 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:36:30.391 +02:00  DBG  Successfully validated the token.
2023-10-20 19:36:30.391 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:36:30.391 +02:00  DBG  Authorization was successful.
2023-10-20 19:36:30.391 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:30.391 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:30.391 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:36:30.391 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:36:30.391 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:36:30.391 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:36:30.391 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:36:30.391 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:36:30.391 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:36:30.391 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:36:30.392 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:36:30.392 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:36:30.392 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:36:30.392 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:36:30.392 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:36:30.392 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:36:30.392 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:36:30.392 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:36:30.392 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:30.392 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:30.392 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:30.392 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:30.413 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:36:30.413 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:36:30.414 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:36:30.416 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:36:30.416 +02:00  DBG  Creating DbConnection.
2023-10-20 19:36:30.416 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:36:30.416 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:30.417 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:30.417 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:30.423 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.424 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:36:30.470 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:36:30.470 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.470 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.470 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:36:30.470 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.471 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:30.471 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:36:30.471 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:62624' responded 200 in 57,5781 ms
2023-10-20 19:36:30.471 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.9311ms.
2023-10-20 19:36:30.471 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:36:30.471 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:36:30.471 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:36:30.471 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:36:30.471 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:36:30.472 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 80.1927ms
2023-10-20 19:36:30.472 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:36:30.472 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:36:30.472 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:30.472 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:30.472 +02:00  DBG  Connection ID "18302628908719144992" disconnecting.
2023-10-20 19:36:30.472 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 81.8277ms
2023-10-20 19:36:30.630 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:36:30.630 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:36:30.630 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:36:30.630 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:36:30.630 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:30.630 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:30.630 +02:00  DBG  The request is a preflight request.
2023-10-20 19:36:30.631 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4207ms
2023-10-20 19:36:30.635 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:36:30.635 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:36:30.635 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:36:30.635 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:36:30.635 +02:00  DBG  Successfully validated the token.
2023-10-20 19:36:30.635 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:36:30.635 +02:00  DBG  Authorization was successful.
2023-10-20 19:36:30.635 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:30.635 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:30.635 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:36:30.636 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:36:30.636 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:36:30.636 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:36:30.636 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:36:30.636 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:36:30.636 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:36:30.636 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:36:30.636 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:36:30.636 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:36:30.636 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:36:30.636 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:36:30.636 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:36:30.636 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:36:30.637 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:36:30.637 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:36:30.638 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:36:30.638 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:36:30.638 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:36:30.638 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:36:30.638 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:36:30.638 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:36:30.638 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:30.638 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:30.638 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:30.638 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:30.657 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:36:30.657 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:36:30.658 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:36:30.661 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:36:30.661 +02:00  DBG  Creating DbConnection.
2023-10-20 19:36:30.661 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:36:30.661 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:30.661 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:30.661 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:30.661 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.661 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:36:30.707 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:36:30.708 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.708 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.708 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.708 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.708 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.708 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.708 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.709 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.710 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.710 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.710 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:30.710 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.710 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 19:36:30.710 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.710 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:30.713 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:36:30.713 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:30.713 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:30.713 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:30.713 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.713 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:36:30.758 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:36:30.759 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.759 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:36:30.759 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:30.759 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:30.759 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:36:30.759 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:62624' responded 200 in 101,8453 ms
2023-10-20 19:36:30.759 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 102.1195ms.
2023-10-20 19:36:30.759 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:36:30.759 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:36:30.760 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:36:30.760 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:36:30.760 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:36:30.760 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 124.5159ms
2023-10-20 19:36:30.761 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:36:30.761 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:36:30.761 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:30.761 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:30.761 +02:00  DBG  Connection ID "18158513699168452635" disconnecting.
2023-10-20 19:36:30.761 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 126.1656ms
2023-10-20 19:36:47.344 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:36:47.345 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:36:47.345 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:36:47.345 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:36:47.345 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:47.345 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:47.345 +02:00  DBG  The request is a preflight request.
2023-10-20 19:36:47.345 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.5944ms
2023-10-20 19:36:47.345 +02:00  DBG  Connection ID "18230571297501347851" disconnecting.
2023-10-20 19:36:47.354 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:36:47.354 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:36:47.354 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:36:47.354 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:36:47.354 +02:00  DBG  Successfully validated the token.
2023-10-20 19:36:47.354 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:36:47.355 +02:00  DBG  Authorization was successful.
2023-10-20 19:36:47.355 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:47.355 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:47.355 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:36:47.355 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:36:47.355 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:36:47.355 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:36:47.355 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:36:47.355 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:36:47.356 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:36:47.356 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:36:47.356 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:36:47.356 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:36:47.356 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:36:47.356 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:36:47.356 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:36:47.356 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:36:47.356 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:36:47.356 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:36:47.356 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:47.356 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:47.356 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:47.356 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:47.389 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:36:47.390 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:36:47.390 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:36:47.392 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:36:47.392 +02:00  DBG  Creating DbConnection.
2023-10-20 19:36:47.392 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:36:47.392 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:47.392 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:47.393 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:47.393 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.393 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:36:47.438 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:36:47.438 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.439 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.439 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:36:47.439 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.439 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:47.439 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:36:47.439 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:62624' responded 200 in 49,3514 ms
2023-10-20 19:36:47.439 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.5845ms.
2023-10-20 19:36:47.439 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:36:47.439 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:36:47.439 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:36:47.439 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:36:47.440 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:36:47.440 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 84.4386ms
2023-10-20 19:36:47.440 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:36:47.440 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:36:47.441 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:47.441 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:47.441 +02:00  DBG  Connection ID "18374686511347007548" disconnecting.
2023-10-20 19:36:47.441 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 87.1349ms
2023-10-20 19:36:47.620 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:36:47.620 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:36:47.620 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:36:47.620 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:36:47.620 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:47.620 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:47.620 +02:00  DBG  The request is a preflight request.
2023-10-20 19:36:47.621 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.8942ms
2023-10-20 19:36:47.626 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:36:47.626 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:36:47.626 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:36:47.626 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:36:47.626 +02:00  DBG  Successfully validated the token.
2023-10-20 19:36:47.626 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:36:47.626 +02:00  DBG  Authorization was successful.
2023-10-20 19:36:47.626 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:36:47.626 +02:00  INF  CORS policy execution successful.
2023-10-20 19:36:47.626 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:36:47.626 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:36:47.627 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:36:47.627 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:36:47.627 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:36:47.627 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:36:47.627 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:36:47.627 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:36:47.627 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:36:47.627 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:36:47.627 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:36:47.627 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:36:47.627 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:36:47.627 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:36:47.628 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:36:47.628 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:36:47.628 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:36:47.628 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:36:47.628 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:36:47.628 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:36:47.629 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:47.629 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:47.630 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:36:47.630 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:36:47.653 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:36:47.653 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:36:47.654 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:36:47.658 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:36:47.658 +02:00  DBG  Creating DbConnection.
2023-10-20 19:36:47.658 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:36:47.658 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:47.658 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:47.658 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:47.658 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.658 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:36:47.705 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:36:47.706 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.706 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.706 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.706 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.706 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.706 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.706 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.707 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:36:47.708 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.708 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-20 19:36:47.708 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.708 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:47.713 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:36:47.713 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:47.713 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:36:47.713 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:47.713 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.713 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:36:47.761 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:36:47.762 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.762 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:36:47.762 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:36:47.762 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:47.762 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:36:47.762 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:62624' responded 200 in 108,8515 ms
2023-10-20 19:36:47.762 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.0403ms.
2023-10-20 19:36:47.762 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:36:47.762 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:36:47.762 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:36:47.762 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:36:47.762 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:36:47.763 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 135.9561ms
2023-10-20 19:36:47.763 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:36:47.763 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:36:47.763 +02:00  DBG  Connection ID "18230571336156053584" disconnecting.
2023-10-20 19:36:47.763 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:36:47.763 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:36:47.763 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 137.6130ms
2023-10-20 19:37:16.918 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:37:16.918 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:37:16.918 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:37:16.918 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:37:16.918 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:37:16.918 +02:00  INF  CORS policy execution successful.
2023-10-20 19:37:16.918 +02:00  DBG  The request is a preflight request.
2023-10-20 19:37:16.919 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 204 - - 0.4937ms
2023-10-20 19:37:16.923 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - -
2023-10-20 19:37:16.923 +02:00  DBG  1 candidate(s) found for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:37:16.923 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)' with route pattern 'utilisateur/{mail}' is valid for the request path '/utilisateur/utilisateur@lapremiereagence.com'
2023-10-20 19:37:16.923 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:37:16.923 +02:00  DBG  Successfully validated the token.
2023-10-20 19:37:16.923 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:37:16.923 +02:00  DBG  Authorization was successful.
2023-10-20 19:37:16.923 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:37:16.923 +02:00  INF  CORS policy execution successful.
2023-10-20 19:37:16.923 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:37:16.923 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:37:16.923 +02:00  INF  Route matched with {action = "ObtenirUtilisateurEmail", controller = "Utilisateur"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModels.Habilitations.UtilisateurViewModel]] ObtenirUtilisateurEmailAsync(System.String, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api).
2023-10-20 19:37:16.923 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:37:16.923 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:37:16.923 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:37:16.923 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:37:16.923 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:37:16.923 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:37:16.924 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.UtilisateurController (Infeco.Api)
2023-10-20 19:37:16.924 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' ...
2023-10-20 19:37:16.924 +02:00  DBG  Attempting to bind parameter 'mail' of type 'System.String' using the name 'mail' in request data ...
2023-10-20 19:37:16.924 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:37:16.924 +02:00  DBG  Done attempting to bind parameter 'mail' of type 'System.String'.
2023-10-20 19:37:16.924 +02:00  DBG  Attempting to validate the bound parameter 'mail' of type 'System.String' ...
2023-10-20 19:37:16.924 +02:00  DBG  Done attempting to validate the bound parameter 'mail' of type 'System.String'.
2023-10-20 19:37:16.924 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:37:16.924 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:37:16.924 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:37:16.924 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:37:16.945 +02:00  INF  Executing action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:37:16.945 +02:00  INF  Handling ObtenirUtilisateurParEmailQuery
2023-10-20 19:37:16.946 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:37:16.946 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:37:16.946 +02:00  DBG  Creating DbConnection.
2023-10-20 19:37:16.947 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:37:16.947 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:37:16.947 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:37:16.947 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:37:16.947 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:16.947 +02:00  DBG  Executing DbCommand [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:37:16.992 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__email_0
LIMIT 1
2023-10-20 19:37:16.993 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:16.993 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:16.993 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:37:16.993 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:16.993 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:37:16.993 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-20 19:37:16.993 +02:00  INF  Information : GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com from '::1:62624' responded 200 in 47,5434 ms
2023-10-20 19:37:16.993 +02:00  INF  Executed action method Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.8849ms.
2023-10-20 19:37:16.993 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:37:16.993 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:37:16.993 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:37:16.993 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:37:16.993 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Utilisateur.DetailUtilisateurResponse'.
2023-10-20 19:37:17.001 +02:00  INF  Executed action Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api) in 77.6106ms
2023-10-20 19:37:17.001 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.UtilisateurController.ObtenirUtilisateurEmailAsync (Infeco.Api)'
2023-10-20 19:37:17.001 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:37:17.001 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:37:17.006 +02:00  DBG  Connection ID "18302628921604046947" disconnecting.
2023-10-20 19:37:17.006 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (4ms).
2023-10-20 19:37:17.006 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/utilisateur/utilisateur@lapremiereagence.com - - - 200 169 application/json;+charset=utf-8 83.0647ms
2023-10-20 19:37:17.179 +02:00  INF  Request starting HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - -
2023-10-20 19:37:17.179 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:37:17.179 +02:00  DBG  Request matched endpoint '405 HTTP Method Not Supported'
2023-10-20 19:37:17.180 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-20 19:37:17.180 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:37:17.180 +02:00  INF  CORS policy execution successful.
2023-10-20 19:37:17.180 +02:00  DBG  The request is a preflight request.
2023-10-20 19:37:17.180 +02:00  INF  Request finished HTTP/2 OPTIONS https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true - - - 204 - - 0.4819ms
2023-10-20 19:37:17.184 +02:00  INF  Request starting HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25
2023-10-20 19:37:17.184 +02:00  DBG  1 candidate(s) found for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:37:17.184 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)' with route pattern 'agenceImmobiliere/appartements/recherche' is valid for the request path '/agenceImmobiliere/appartements/recherche'
2023-10-20 19:37:17.184 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:37:17.184 +02:00  DBG  Successfully validated the token.
2023-10-20 19:37:17.184 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-20 19:37:17.184 +02:00  DBG  Authorization was successful.
2023-10-20 19:37:17.184 +02:00  DBG  The request has an origin header: 'http://localhost:4200'.
2023-10-20 19:37:17.184 +02:00  INF  CORS policy execution successful.
2023-10-20 19:37:17.184 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-20 19:37:17.184 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:37:17.184 +02:00  INF  Route matched with {action = "ObtenirAppartementParIdAgenceImmobiliere", controller = "AgenceImmobiliere"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Infeco.Api.ViewModel.AppartementViewModel]]] ObtenirAppartementParIdAgenceImmobiliereAsync(Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase, Infeco.Api.ViewModels.PaginationModel, Infeco.Api.ViewModels.TriModel, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api).
2023-10-20 19:37:17.184 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-20 19:37:17.185 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-20 19:37:17.185 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-20 19:37:17.185 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-20 19:37:17.185 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-20 19:37:17.185 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:37:17.185 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.AgenceImmobiliereController (Infeco.Api)
2023-10-20 19:37:17.185 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:37:17.185 +02:00  DBG  Attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' using the name '' in request data ...
2023-10-20 19:37:17.185 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-20 19:37:17.185 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-20 19:37:17.186 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:37:17.186 +02:00  DBG  Done attempting to bind parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:37:17.186 +02:00  DBG  Attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase' ...
2023-10-20 19:37:17.186 +02:00  DBG  Done attempting to validate the bound parameter 'request' of type 'Infeco.Api.Queries.AgenceImmobiliere.ObtenirAppartementsQueryBase'.
2023-10-20 19:37:17.186 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:37:17.186 +02:00  DBG  Attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' using the name '' in request data ...
2023-10-20 19:37:17.186 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32' using the name 'limite' in request data ...
2023-10-20 19:37:17.186 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Limite' of type 'System.Int32'.
2023-10-20 19:37:17.186 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32' using the name 'index' in request data ...
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.PaginationModel.Index' of type 'System.Int32'.
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel' ...
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to validate the bound parameter 'pagination' of type 'Infeco.Api.ViewModels.PaginationModel'.
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' using the name '' in request data ...
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String' using the name 'champ' in request data ...
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Champ' of type 'System.String'.
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean' using the name 'ascendant' in request data ...
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind property 'Infeco.Api.ViewModels.TriModel.Ascendant' of type 'System.Boolean'.
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel' ...
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to validate the bound parameter 'tri' of type 'Infeco.Api.ViewModels.TriModel'.
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:37:17.187 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:37:17.187 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-20 19:37:17.188 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-20 19:37:17.202 +02:00  INF  Executing action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) - Validation state: "Valid"
2023-10-20 19:37:17.203 +02:00  INF  Handling ObtenirAppartementsQuery
2023-10-20 19:37:17.203 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-20 19:37:17.206 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:37:17.206 +02:00  DBG  Creating DbConnection.
2023-10-20 19:37:17.206 +02:00  DBG  Created DbConnection. (0ms).
2023-10-20 19:37:17.206 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:37:17.206 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:37:17.206 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:37:17.206 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:17.206 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:37:17.252 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AppartementId", t."CreeLe", t."DateEntree", t."DateSortie", t."DepotDeGarantieRegle", t."LocataireId", t."ModifieLe", t."Id0", t."Adresse", t."AgenceImmobiliereId", t."ComplementAdresse", t."CreeLe0", t."DepotDeGarantie", t."Loyer", t."ModifieLe0", t."NombreDeMetre2", t."PrixDesCharges", t."TypeAppartementId", t."VilleId", t0."Id", t0."Nom", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone"
FROM (
    SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", a."Id" AS "Id0", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe" AS "CreeLe0", a."DepotDeGarantie", a."Loyer", a."ModifieLe" AS "ModifieLe0", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
    ORDER BY l."Id"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "TypeAppartement" AS t0 ON t."TypeAppartementId" = t0."Id"
INNER JOIN "Ville" AS v ON t."VilleId" = v."Id"
INNER JOIN "Locataire" AS l0 ON t."LocataireId" = l0."Id"
ORDER BY t."Id"
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'AppartementEntite.TypeAppartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'TypeAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'AppartementEntite.Ville' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'VilleEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.253 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-20 19:37:17.254 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:17.254 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-20 19:37:17.254 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:17.254 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:37:17.256 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-20 19:37:17.256 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:37:17.256 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-20 19:37:17.256 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-20 19:37:17.256 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:17.256 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:37:17.301 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AgenceImmobiliereId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM (
    SELECT DISTINCT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
    FROM "LocataireAppartement" AS l
    INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
    WHERE a."AgenceImmobiliereId" = @__criteres_AgenceImmobiliereId_0
) AS t
2023-10-20 19:37:17.301 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:17.301 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-20 19:37:17.301 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-20 19:37:17.301 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:37:17.301 +02:00  INF  Handled AppartementsResponse
2023-10-20 19:37:17.301 +02:00  INF  Information : POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true from '::1:62624' responded 200 in 98,5848 ms
2023-10-20 19:37:17.301 +02:00  INF  Executed action method Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 98.8662ms.
2023-10-20 19:37:17.301 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-20 19:37:17.301 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-20 19:37:17.301 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-20 19:37:17.302 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-20 19:37:17.302 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.AgenceImmobiliere.AppartementsResponse'.
2023-10-20 19:37:17.302 +02:00  INF  Executed action Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api) in 117.3826ms
2023-10-20 19:37:17.302 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.AgenceImmobiliereController.ObtenirAppartementParIdAgenceImmobiliereAsync (Infeco.Api)'
2023-10-20 19:37:17.302 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-20 19:37:17.302 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-20 19:37:17.302 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-20 19:37:17.302 +02:00  DBG  Connection ID "18302628921604046951" disconnecting.
2023-10-20 19:37:17.302 +02:00  INF  Request finished HTTP/2 POST https://localhost:44375/agenceImmobiliere/appartements/recherche?limite=20&index=0&champ=id&ascendant=true application/json 25 - 200 621 application/json;+charset=utf-8 118.5196ms
