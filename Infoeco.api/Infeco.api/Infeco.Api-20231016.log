2023-10-16 08:39:22.871 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 08:39:22.877 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 08:39:22.878 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 08:39:22.882 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:39:22.954 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '15/10/2023 17:40:07', Current time: '16/10/2023 06:39:22'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-16 08:39:22.970 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '15/10/2023 17:40:07', Current time: '16/10/2023 06:39:22'.
2023-10-16 08:39:22.972 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-16 08:39:22.981 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-16 08:39:22.983 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 401 - - 112.0867ms
2023-10-16 08:39:29.939 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 08:39:29.939 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 08:39:29.939 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 08:39:29.939 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 08:39:29.939 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 08:39:29.939 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 08:39:29.939 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 08:39:29.939 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 08:39:29.940 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 08:39:29.940 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 08:39:29.940 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 08:39:29.940 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 08:39:29.940 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 08:39:29.940 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 08:39:29.940 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 08:39:29.940 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 08:39:29.940 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 08:39:29.940 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 08:39:29.940 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 08:39:29.955 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 08:39:29.957 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 08:39:29.958 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 08:39:29.962 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:39:29.962 +02:00  DBG  Creating DbConnection.
2023-10-16 08:39:29.962 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 08:39:29.962 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:39:29.962 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:39:29.962 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:39:30.296 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:30.296 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 08:39:30.345 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 08:39:30.346 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:39:30.346 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:30.346 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 08:39:30.346 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:30.346 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:39:30.347 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 08:39:30.347 +02:00  INF  Information : POST https://localhost:44375/login from '::1:57019' responded 200 in 389,3115 ms
2023-10-16 08:39:30.348 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 393.4975ms.
2023-10-16 08:39:30.348 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 08:39:30.349 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 08:39:30.349 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 08:39:30.349 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 08:39:30.349 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 08:39:30.349 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 409.6232ms
2023-10-16 08:39:30.350 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 08:39:30.350 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 08:39:30.350 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 08:39:30.350 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:39:30.350 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 411.1179ms
2023-10-16 08:39:45.648 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 08:39:45.648 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 08:39:45.648 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 08:39:45.648 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:39:45.649 +02:00  DBG  Successfully validated the token.
2023-10-16 08:39:45.649 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 08:39:45.649 +02:00  DBG  Authorization was successful.
2023-10-16 08:39:45.649 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 08:39:45.649 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:39:45.654 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 08:39:45.655 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 08:39:45.655 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 08:39:45.655 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 08:39:45.655 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 08:39:45.655 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 08:39:45.655 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 08:39:45.655 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 08:39:45.655 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 08:39:45.656 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 08:39:45.656 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 08:39:45.656 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 08:39:45.666 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 08:39:45.666 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 08:39:45.666 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 08:39:45.669 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 08:39:45.669 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 08:39:45.669 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 08:39:45.669 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 08:39:45.669 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 08:39:45.684 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 08:39:45.690 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 08:39:45.690 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 08:39:47.778 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 08:39:47.789 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 08:39:47.791 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 08:39:47.848 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 08:39:47.849 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:39:47.849 +02:00  DBG  Creating DbConnection.
2023-10-16 08:39:47.849 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 08:39:47.849 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:39:47.849 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:39:47.849 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:39:47.849 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:47.849 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 08:39:47.916 +02:00  INF  Executed DbCommand (67ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 08:39:47.920 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:47.920 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 3ms reading results.
2023-10-16 08:39:47.920 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:47.920 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:39:52.336 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 08:39:52.340 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 08:39:52.341 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:39:52.341 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:39:52.341 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:39:52.341 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:39:52.341 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:52.341 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 08:39:52.390 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 08:39:52.391 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:39:52.391 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:52.392 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-16 08:39:52.392 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:39:52.392 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:39:57.775 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 12120.3366ms
2023-10-16 08:39:57.937 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:39:58.404 +02:00  ERR  An unhandled exception has occurred while executing the request.AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
AssignerAppartementCommand -> LocataireAppartementEntite
Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand -> Infoeco.infrastructure.Entities.LocataireAppartementEntite
   at lambda_method208(Closure, Object, LocataireAppartementEntite, ResolutionContext)
   at Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommandHandler.ExecuteCommandeAsync(AssignerAppartementCommand commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Commands\LocataireAppartement\AssignerAppartementCommandHandler.cs:line 35
   at Infeco.Api.Infrastructure.MediatR.CommandHandlerBase`1.Handle(TCommande commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\CommandHandlerBase.cs:line 41
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync(AssignerAppartementCommand command, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 44
   at lambda_method191(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 08:39:58.418 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 08:39:58.418 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 08:39:58.419 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:39:58.419 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 500 - text/plain;+charset=utf-8 12770.6924ms
2023-10-16 08:41:13.063 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 08:41:13.303 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 08:41:13.980 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 08:41:13.989 +02:00  DBG  Creating DbConnection.
2023-10-16 08:41:14.038 +02:00  DBG  Created DbConnection. (46ms).
2023-10-16 08:41:14.041 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 08:41:14.057 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:14.575 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:14.577 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:14.588 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (7ms).
2023-10-16 08:41:14.595 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 08:41:14.600 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-16 08:41:14.602 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (8ms).
2023-10-16 08:41:14.602 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:14.968 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:14.972 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:41:15.045 +02:00  INF  Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:41:15.046 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.047 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 08:41:15.048 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:15.335 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.335 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.335 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:15.336 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 08:41:15.336 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 08:41:15.336 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 08:41:15.336 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:15.336 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.337 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:41:15.381 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:41:15.382 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.382 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:15.398 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:41:15.399 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:15.399 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:15.399 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:15.399 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.399 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 08:41:15.446 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 08:41:15.450 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.452 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 08:41:15.452 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:15.452 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:15.464 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 08:41:15.466 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 08:41:15.467 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:15.468 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:15.470 +02:00  DBG  Hosting starting
2023-10-16 08:41:15.501 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 08:41:15.505 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 08:41:15.511 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 08:41:15.512 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 08:41:15.512 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 08:41:15.512 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 08:41:15.513 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 08:41:15.513 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 08:41:15.513 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 08:41:15.516 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 08:41:15.520 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 08:41:15.521 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 08:41:15.521 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 08:41:15.521 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 08:41:15.521 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 08:41:15.521 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 08:41:15.521 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 08:41:15.527 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 08:41:15.530 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 08:41:15.530 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 08:41:15.532 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 08:41:15.533 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 08:41:15.534 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 08:41:15.536 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 08:41:15.536 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 08:41:15.603 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 08:41:15.603 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 08:41:15.609 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 08:41:15.610 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 08:41:15.610 +02:00  INF  Hosting environment: Development
2023-10-16 08:41:15.610 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 08:41:15.611 +02:00  DBG  Hosting started
2023-10-16 08:41:15.645 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 08:41:15.672 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 08:41:15.707 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 08:41:15.708 +02:00  DBG  Request did not match any endpoints
2023-10-16 08:41:15.747 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 08:41:15.847 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 08:41:17.998 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 08:41:18.012 +02:00  DBG  Connection ID "18230571314681217038" disconnecting.
2023-10-16 08:41:18.013 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 08:41:18.014 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2370.4979ms
2023-10-16 08:41:18.018 +02:00  DBG  Connection ID "18158513742118125577" disconnecting.
2023-10-16 08:41:18.019 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.6463ms
2023-10-16 08:41:18.192 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 08:41:18.193 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 08:41:18.193 +02:00  DBG  Request did not match any endpoints
2023-10-16 08:41:18.196 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 08:41:18.337 +02:00  DBG  Connection ID "18158513716348321813" disconnecting.
2023-10-16 08:41:18.338 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 145.8076ms
2023-10-16 08:41:25.328 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 08:41:25.331 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 08:41:25.334 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 08:41:25.335 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:41:25.471 +02:00  DBG  Successfully validated the token.
2023-10-16 08:41:25.473 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 08:41:25.480 +02:00  DBG  Authorization was successful.
2023-10-16 08:41:25.482 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 08:41:25.482 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:41:25.507 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 08:41:25.508 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 08:41:25.509 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 08:41:25.509 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 08:41:25.509 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 08:41:25.509 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 08:41:25.511 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 08:41:25.512 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 08:41:25.516 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 08:41:25.519 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 08:41:25.520 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 08:41:25.520 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 08:41:25.587 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 08:41:25.587 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 08:41:25.587 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 08:41:25.597 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 08:41:25.598 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 08:41:25.599 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 08:41:25.599 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 08:41:25.599 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 08:41:25.659 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 08:41:25.702 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 08:41:25.713 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 08:41:27.840 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 08:41:27.911 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 08:41:27.914 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 08:41:28.085 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 08:41:28.112 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:41:28.112 +02:00  DBG  Creating DbConnection.
2023-10-16 08:41:28.112 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 08:41:28.112 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:28.114 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 08:41:28.116 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:28.117 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:28.119 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 08:41:28.179 +02:00  INF  Executed DbCommand (61ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 08:41:28.197 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:28.198 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 18ms reading results.
2023-10-16 08:41:28.200 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:28.201 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:29.830 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 08:41:29.836 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 08:41:29.837 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:41:29.837 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:29.837 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:29.837 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:29.838 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:29.838 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 08:41:29.882 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 08:41:29.912 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:41:29.949 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:29.949 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 66ms reading results.
2023-10-16 08:41:29.949 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:29.949 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:44.601 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireAppartementEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:41:44.641 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:41:44.645 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:41:44.649 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-16 08:41:44.652 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-16 08:41:44.660 +02:00  DBG  The unchanged property 'LocataireAppartementEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 08:41:44.674 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-16 08:41:44.742 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:44.742 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:44.744 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:41:44.744 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:44.744 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:41:44.744 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 08:41:44.802 +02:00  INF  Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 08:41:44.810 +02:00  DBG  The foreign key property 'LocataireAppartementEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 08:41:44.815 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:44.816 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 13ms reading results.
2023-10-16 08:41:44.816 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:41:44.816 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:41:44.825 +02:00  DBG  An entity of type 'LocataireAppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 08:41:44.827 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-16 08:41:48.685 +02:00  INF  Handled Unit
2023-10-16 08:41:48.688 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement/assignerAppartement from '::1:57222' responded 200 in 22982,8653 ms
2023-10-16 08:41:48.698 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23034.929ms.
2023-10-16 08:41:48.704 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 08:41:48.706 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 08:41:48.706 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 08:41:48.708 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 08:41:48.708 +02:00  INF  Executing OkObjectResult, writing value of type 'MediatR.Unit'.
2023-10-16 08:41:48.737 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 23224.6628ms
2023-10-16 08:41:48.738 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 08:41:48.739 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 08:41:48.741 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 08:41:48.742 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 08:41:48.743 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 200 2 application/json;+charset=utf-8 23415.0815ms
2023-10-16 08:55:09.930 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 08:55:10.166 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 08:55:10.600 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 08:55:10.699 +02:00  DBG  The property 'EtatDesLieuxEntite.LocataireAppartementAppartementId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-16 08:55:10.700 +02:00  DBG  The property 'EtatDesLieuxEntite.LocataireAppartementLocataireId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-16 08:55:10.700 +02:00  DBG  The property 'PaiementEntite.LocataireAppartementAppartementId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-16 08:55:10.700 +02:00  DBG  The property 'PaiementEntite.LocataireAppartementLocataireId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-16 08:55:10.700 +02:00  DBG  The property 'QuittanceLoyerEntite.LocataireAppartementAppartementId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-16 08:55:10.700 +02:00  DBG  The property 'QuittanceLoyerEntite.LocataireAppartementLocataireId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-16 08:55:10.850 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 08:55:10.857 +02:00  DBG  Creating DbConnection.
2023-10-16 08:55:10.898 +02:00  DBG  Created DbConnection. (39ms).
2023-10-16 08:55:10.899 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 08:55:10.914 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:11.482 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:11.483 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:11.491 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 08:55:11.496 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 08:55:11.500 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 08:55:11.501 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (5ms).
2023-10-16 08:55:11.501 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:11.864 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:11.875 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:55:11.975 +02:00  INF  Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:55:11.976 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:11.979 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-16 08:55:11.981 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:12.262 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.262 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.263 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:55:12.263 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 08:55:12.263 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 08:55:12.264 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 08:55:12.264 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:12.264 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.264 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:55:12.312 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 08:55:12.312 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.312 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:55:12.327 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 08:55:12.327 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:55:12.327 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 08:55:12.327 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:12.327 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.327 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 08:55:12.373 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 08:55:12.377 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.379 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 08:55:12.379 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.379 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:55:12.388 +02:00  INF  Applying migration '20231016065352_change_locatireAppartement_key'.
2023-10-16 08:55:12.441 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:12.441 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:12.443 +02:00  DBG  Beginning transaction with isolation level 'Unspecified'.
2023-10-16 08:55:12.446 +02:00  DBG  Began transaction with isolation level 'ReadCommitted'.
2023-10-16 08:55:12.447 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.447 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.448 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.448 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Appartement" DROP CONSTRAINT "FK_Appartement_TypeAppartement_TypeAppartementId";
2023-10-16 08:55:12.517 +02:00  INF  Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Appartement" DROP CONSTRAINT "FK_Appartement_TypeAppartement_TypeAppartementId";
2023-10-16 08:55:12.517 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.517 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.517 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.517 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementId";
2023-10-16 08:55:12.564 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementId";
2023-10-16 08:55:12.564 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.564 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.564 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.564 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementId";
2023-10-16 08:55:12.609 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementId";
2023-10-16 08:55:12.609 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.609 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.609 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.610 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementId";
2023-10-16 08:55:12.656 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementId";
2023-10-16 08:55:12.656 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.656 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.656 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.656 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_QuittanceLoyer_LocataireAppartementId";
2023-10-16 08:55:12.704 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_QuittanceLoyer_LocataireAppartementId";
2023-10-16 08:55:12.704 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.704 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.704 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.704 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_Paiement_LocataireAppartementId";
2023-10-16 08:55:12.749 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_Paiement_LocataireAppartementId";
2023-10-16 08:55:12.749 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.749 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.749 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.749 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" DROP CONSTRAINT "PK_LocataireAppartement";
2023-10-16 08:55:12.795 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" DROP CONSTRAINT "PK_LocataireAppartement";
2023-10-16 08:55:12.795 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.795 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.795 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.795 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_LocataireAppartement_LocataireId";
2023-10-16 08:55:12.839 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_LocataireAppartement_LocataireId";
2023-10-16 08:55:12.839 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.839 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.839 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.839 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_EtatDesLieux_LocataireAppartementId";
2023-10-16 08:55:12.884 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_EtatDesLieux_LocataireAppartementId";
2023-10-16 08:55:12.884 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.884 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.884 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.884 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" DROP COLUMN "Id";
2023-10-16 08:55:12.937 +02:00  INF  Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" DROP COLUMN "Id";
2023-10-16 08:55:12.937 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.937 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.937 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.937 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD "LocataireAppartementAppartementId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:12.993 +02:00  INF  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD "LocataireAppartementAppartementId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:12.993 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:12.993 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.993 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:12.993 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD "LocataireAppartementLocataireId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.036 +02:00  INF  Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD "LocataireAppartementLocataireId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.037 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.037 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.037 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.037 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD "LocataireAppartementAppartementId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.081 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD "LocataireAppartementAppartementId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.081 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.081 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.081 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.082 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD "LocataireAppartementLocataireId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.125 +02:00  INF  Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD "LocataireAppartementLocataireId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.125 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.125 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.125 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.125 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD "LocataireAppartementAppartementId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.169 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD "LocataireAppartementAppartementId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.169 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.169 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.169 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.169 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD "LocataireAppartementLocataireId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.213 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD "LocataireAppartementLocataireId" integer NOT NULL DEFAULT 0;
2023-10-16 08:55:13.213 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.213 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.213 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.213 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Appartement" ALTER COLUMN "TypeAppartementId" DROP NOT NULL;
2023-10-16 08:55:13.257 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Appartement" ALTER COLUMN "TypeAppartementId" DROP NOT NULL;
2023-10-16 08:55:13.257 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.257 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.257 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.257 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD CONSTRAINT "PK_LocataireAppartement" PRIMARY KEY ("LocataireId", "AppartementId");
2023-10-16 08:55:13.317 +02:00  INF  Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD CONSTRAINT "PK_LocataireAppartement" PRIMARY KEY ("LocataireId", "AppartementId");
2023-10-16 08:55:13.317 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.317 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.317 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.317 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuittanceLoyer_LocataireAppartementLocataireId_LocataireApp~" ON "QuittanceLoyer" ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId");
2023-10-16 08:55:13.370 +02:00  INF  Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuittanceLoyer_LocataireAppartementLocataireId_LocataireApp~" ON "QuittanceLoyer" ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId");
2023-10-16 08:55:13.370 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.370 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.370 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.370 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Paiement_LocataireAppartementLocataireId_LocataireApparteme~" ON "Paiement" ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId");
2023-10-16 08:55:13.421 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Paiement_LocataireAppartementLocataireId_LocataireApparteme~" ON "Paiement" ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId");
2023-10-16 08:55:13.421 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.421 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.421 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.421 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Locataire_Mail" ON "Locataire" ("Mail");
2023-10-16 08:55:13.470 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Locataire_Mail" ON "Locataire" ("Mail");
2023-10-16 08:55:13.470 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.470 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.470 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.470 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_EtatDesLieux_LocataireAppartementLocataireId_LocataireAppar~" ON "EtatDesLieux" ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId");
2023-10-16 08:55:13.519 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_EtatDesLieux_LocataireAppartementLocataireId_LocataireAppar~" ON "EtatDesLieux" ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId");
2023-10-16 08:55:13.519 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.519 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.519 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.519 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Appartement" ADD CONSTRAINT "FK_Appartement_TypeAppartement_TypeAppartementId" FOREIGN KEY ("TypeAppartementId") REFERENCES "TypeAppartement" ("Id");
2023-10-16 08:55:13.568 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Appartement" ADD CONSTRAINT "FK_Appartement_TypeAppartement_TypeAppartementId" FOREIGN KEY ("TypeAppartementId") REFERENCES "TypeAppartement" ("Id");
2023-10-16 08:55:13.568 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.568 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.568 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.568 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementLocat~" FOREIGN KEY ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId") REFERENCES "LocataireAppartement" ("LocataireId", "AppartementId") ON DELETE CASCADE;
2023-10-16 08:55:13.616 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementLocat~" FOREIGN KEY ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId") REFERENCES "LocataireAppartement" ("LocataireId", "AppartementId") ON DELETE CASCADE;
2023-10-16 08:55:13.617 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.617 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.617 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.617 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementLocataire~" FOREIGN KEY ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId") REFERENCES "LocataireAppartement" ("LocataireId", "AppartementId") ON DELETE CASCADE;
2023-10-16 08:55:13.663 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementLocataire~" FOREIGN KEY ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId") REFERENCES "LocataireAppartement" ("LocataireId", "AppartementId") ON DELETE CASCADE;
2023-10-16 08:55:13.663 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.664 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.664 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.664 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementLoc~" FOREIGN KEY ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId") REFERENCES "LocataireAppartement" ("LocataireId", "AppartementId") ON DELETE CASCADE;
2023-10-16 08:55:13.709 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementLoc~" FOREIGN KEY ("LocataireAppartementLocataireId", "LocataireAppartementAppartementId") REFERENCES "LocataireAppartement" ("LocataireId", "AppartementId") ON DELETE CASCADE;
2023-10-16 08:55:13.709 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 08:55:13.710 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.710 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 08:55:13.710 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231016065352_change_locatireAppartement_key', '7.0.11');
2023-10-16 08:55:13.755 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231016065352_change_locatireAppartement_key', '7.0.11');
2023-10-16 08:55:13.757 +02:00  DBG  Committing transaction.
2023-10-16 08:55:13.808 +02:00  DBG  Committed transaction.
2023-10-16 08:55:13.809 +02:00  DBG  Disposing transaction.
2023-10-16 08:55:13.809 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 08:55:13.809 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:55:13.811 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 08:55:13.812 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 08:55:13.812 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 08:55:13.815 +02:00  DBG  Hosting starting
2023-10-16 08:55:13.843 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 08:55:13.846 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 08:55:13.853 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 08:55:13.854 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 08:55:13.854 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 08:55:13.854 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 08:55:13.854 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 08:55:13.855 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 08:55:13.855 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 08:55:13.858 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 08:55:13.862 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 08:55:13.867 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 08:55:13.869 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 08:55:13.870 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 08:55:13.871 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 08:55:13.873 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 08:55:13.874 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 08:55:13.875 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 08:55:13.876 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 08:55:13.942 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 08:55:13.946 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 08:55:13.946 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 08:55:13.947 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 08:55:13.947 +02:00  INF  Hosting environment: Development
2023-10-16 08:55:13.947 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 08:55:13.947 +02:00  DBG  Hosting started
2023-10-16 08:55:13.980 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 08:55:14.005 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 08:55:14.037 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 08:55:14.037 +02:00  DBG  Request did not match any endpoints
2023-10-16 08:55:14.078 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 08:55:14.193 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 08:55:16.345 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 08:55:16.361 +02:00  DBG  Connection ID "18374686519936942097" disconnecting.
2023-10-16 08:55:16.363 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 08:55:16.365 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2385.3912ms
2023-10-16 08:55:16.370 +02:00  DBG  Connection ID "18374686481282236441" disconnecting.
2023-10-16 08:55:16.371 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.6447ms
2023-10-16 08:55:16.571 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 08:55:16.573 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 08:55:16.573 +02:00  DBG  Request did not match any endpoints
2023-10-16 08:55:16.575 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 08:55:16.796 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 223.4344ms
2023-10-16 08:55:16.802 +02:00  DBG  Connection ID "18374686481282236443" disconnecting.
2023-10-16 09:07:46.390 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 09:07:46.670 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 09:07:47.103 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 09:07:47.344 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 09:07:47.353 +02:00  DBG  Creating DbConnection.
2023-10-16 09:07:47.397 +02:00  DBG  Created DbConnection. (42ms).
2023-10-16 09:07:47.401 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 09:07:47.419 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:47.930 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:47.931 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:47.940 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-16 09:07:47.945 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 09:07:47.949 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 09:07:47.951 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 09:07:47.951 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:48.331 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.336 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 09:07:48.410 +02:00  INF  Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 09:07:48.412 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.413 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 09:07:48.415 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:48.694 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.694 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.695 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:07:48.696 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 09:07:48.696 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 09:07:48.696 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 09:07:48.696 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:48.697 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.697 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 09:07:48.745 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 09:07:48.745 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.745 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:07:48.768 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:07:48.768 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:07:48.768 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:07:48.768 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:48.769 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.769 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 09:07:48.819 +02:00  INF  Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 09:07:48.823 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.826 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-16 09:07:48.826 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.826 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:07:48.838 +02:00  INF  Applying migration '20231016070655_change_locatireAppartement_key_alternative'.
2023-10-16 09:07:48.884 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:48.884 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:48.886 +02:00  DBG  Beginning transaction with isolation level 'Unspecified'.
2023-10-16 09:07:48.889 +02:00  DBG  Began transaction with isolation level 'ReadCommitted'.
2023-10-16 09:07:48.890 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:48.890 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:48.891 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:48.891 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementLocat~";
2023-10-16 09:07:48.945 +02:00  INF  Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementLocat~";
2023-10-16 09:07:48.945 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:48.945 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:48.945 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:48.946 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementLocataire~";
2023-10-16 09:07:48.994 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementLocataire~";
2023-10-16 09:07:48.995 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:48.995 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:48.995 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:48.995 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementLoc~";
2023-10-16 09:07:49.050 +02:00  INF  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementLoc~";
2023-10-16 09:07:49.051 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.051 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.051 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.051 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_QuittanceLoyer_LocataireAppartementLocataireId_LocataireApp~";
2023-10-16 09:07:49.098 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_QuittanceLoyer_LocataireAppartementLocataireId_LocataireApp~";
2023-10-16 09:07:49.098 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.098 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.098 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.098 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_Paiement_LocataireAppartementLocataireId_LocataireApparteme~";
2023-10-16 09:07:49.145 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_Paiement_LocataireAppartementLocataireId_LocataireApparteme~";
2023-10-16 09:07:49.145 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.145 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.145 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.145 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" DROP CONSTRAINT "PK_LocataireAppartement";
2023-10-16 09:07:49.194 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" DROP CONSTRAINT "PK_LocataireAppartement";
2023-10-16 09:07:49.194 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.194 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.194 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.194 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_EtatDesLieux_LocataireAppartementLocataireId_LocataireAppar~";
2023-10-16 09:07:49.249 +02:00  INF  Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_EtatDesLieux_LocataireAppartementLocataireId_LocataireAppar~";
2023-10-16 09:07:49.250 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.250 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.250 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.250 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP COLUMN "LocataireAppartementAppartementId";
2023-10-16 09:07:49.296 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP COLUMN "LocataireAppartementAppartementId";
2023-10-16 09:07:49.296 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.296 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.296 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.296 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP COLUMN "LocataireAppartementLocataireId";
2023-10-16 09:07:49.343 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" DROP COLUMN "LocataireAppartementLocataireId";
2023-10-16 09:07:49.344 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.344 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.344 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.344 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP COLUMN "LocataireAppartementAppartementId";
2023-10-16 09:07:49.395 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP COLUMN "LocataireAppartementAppartementId";
2023-10-16 09:07:49.396 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.396 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.396 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.396 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP COLUMN "LocataireAppartementLocataireId";
2023-10-16 09:07:49.444 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" DROP COLUMN "LocataireAppartementLocataireId";
2023-10-16 09:07:49.444 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.444 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.444 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.444 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP COLUMN "LocataireAppartementAppartementId";
2023-10-16 09:07:49.494 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP COLUMN "LocataireAppartementAppartementId";
2023-10-16 09:07:49.494 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.494 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.494 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.494 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP COLUMN "LocataireAppartementLocataireId";
2023-10-16 09:07:49.543 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" DROP COLUMN "LocataireAppartementLocataireId";
2023-10-16 09:07:49.543 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.543 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.543 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.543 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD "Id" serial NOT NULL;
2023-10-16 09:07:49.609 +02:00  INF  Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD "Id" serial NOT NULL;
2023-10-16 09:07:49.609 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.609 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.609 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.609 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD CONSTRAINT "AK_LocataireAppartement_LocataireId_AppartementId" UNIQUE ("LocataireId", "AppartementId");
2023-10-16 09:07:49.661 +02:00  INF  Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD CONSTRAINT "AK_LocataireAppartement_LocataireId_AppartementId" UNIQUE ("LocataireId", "AppartementId");
2023-10-16 09:07:49.661 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.661 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.661 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.661 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD CONSTRAINT "PK_LocataireAppartement" PRIMARY KEY ("Id");
2023-10-16 09:07:49.717 +02:00  INF  Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "LocataireAppartement" ADD CONSTRAINT "PK_LocataireAppartement" PRIMARY KEY ("Id");
2023-10-16 09:07:49.717 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.717 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.717 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.717 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuittanceLoyer_LocataireAppartementId" ON "QuittanceLoyer" ("LocataireAppartementId");
2023-10-16 09:07:49.768 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuittanceLoyer_LocataireAppartementId" ON "QuittanceLoyer" ("LocataireAppartementId");
2023-10-16 09:07:49.769 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.769 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.769 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.769 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Paiement_LocataireAppartementId" ON "Paiement" ("LocataireAppartementId");
2023-10-16 09:07:49.820 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Paiement_LocataireAppartementId" ON "Paiement" ("LocataireAppartementId");
2023-10-16 09:07:49.820 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.820 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.820 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.820 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_EtatDesLieux_LocataireAppartementId" ON "EtatDesLieux" ("LocataireAppartementId");
2023-10-16 09:07:49.872 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_EtatDesLieux_LocataireAppartementId" ON "EtatDesLieux" ("LocataireAppartementId");
2023-10-16 09:07:49.872 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.872 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.872 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.872 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementId" FOREIGN KEY ("LocataireAppartementId") REFERENCES "LocataireAppartement" ("Id") ON DELETE CASCADE;
2023-10-16 09:07:49.921 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "EtatDesLieux" ADD CONSTRAINT "FK_EtatDesLieux_LocataireAppartement_LocataireAppartementId" FOREIGN KEY ("LocataireAppartementId") REFERENCES "LocataireAppartement" ("Id") ON DELETE CASCADE;
2023-10-16 09:07:49.921 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.921 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.921 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.921 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementId" FOREIGN KEY ("LocataireAppartementId") REFERENCES "LocataireAppartement" ("Id") ON DELETE CASCADE;
2023-10-16 09:07:49.973 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Paiement" ADD CONSTRAINT "FK_Paiement_LocataireAppartement_LocataireAppartementId" FOREIGN KEY ("LocataireAppartementId") REFERENCES "LocataireAppartement" ("Id") ON DELETE CASCADE;
2023-10-16 09:07:49.973 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:49.973 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.973 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:49.973 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementId" FOREIGN KEY ("LocataireAppartementId") REFERENCES "LocataireAppartement" ("Id") ON DELETE CASCADE;
2023-10-16 09:07:50.021 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "QuittanceLoyer" ADD CONSTRAINT "FK_QuittanceLoyer_LocataireAppartement_LocataireAppartementId" FOREIGN KEY ("LocataireAppartementId") REFERENCES "LocataireAppartement" ("Id") ON DELETE CASCADE;
2023-10-16 09:07:50.022 +02:00  DBG  Creating DbCommand for 'ExecuteNonQuery'.
2023-10-16 09:07:50.022 +02:00  DBG  Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:50.022 +02:00  DBG  Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-10-16 09:07:50.022 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231016070655_change_locatireAppartement_key_alternative', '7.0.11');
2023-10-16 09:07:50.068 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231016070655_change_locatireAppartement_key_alternative', '7.0.11');
2023-10-16 09:07:50.070 +02:00  DBG  Committing transaction.
2023-10-16 09:07:50.123 +02:00  DBG  Committed transaction.
2023-10-16 09:07:50.124 +02:00  DBG  Disposing transaction.
2023-10-16 09:07:50.124 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:07:50.124 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:07:50.126 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 09:07:50.127 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 09:07:50.128 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:07:50.130 +02:00  DBG  Hosting starting
2023-10-16 09:07:50.160 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 09:07:50.164 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 09:07:50.171 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 09:07:50.171 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 09:07:50.172 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 09:07:50.172 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 09:07:50.172 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 09:07:50.172 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 09:07:50.173 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 09:07:50.177 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 09:07:50.180 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 09:07:50.180 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 09:07:50.180 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 09:07:50.180 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 09:07:50.180 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 09:07:50.180 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 09:07:50.181 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 09:07:50.186 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 09:07:50.188 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 09:07:50.188 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 09:07:50.190 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 09:07:50.191 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 09:07:50.192 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 09:07:50.193 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 09:07:50.194 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 09:07:50.286 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 09:07:50.286 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 09:07:50.286 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 09:07:50.287 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 09:07:50.287 +02:00  INF  Hosting environment: Development
2023-10-16 09:07:50.287 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 09:07:50.287 +02:00  DBG  Hosting started
2023-10-16 09:07:50.334 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 09:07:50.368 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 09:07:50.406 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 09:07:50.406 +02:00  DBG  Request did not match any endpoints
2023-10-16 09:07:50.453 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 09:07:50.577 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 09:07:52.746 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 09:07:52.761 +02:00  DBG  Connection ID "18230571314681217041" disconnecting.
2023-10-16 09:07:52.762 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 09:07:52.764 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2431.2978ms
2023-10-16 09:07:52.775 +02:00  DBG  Connection ID "18374686507052040201" disconnecting.
2023-10-16 09:07:52.775 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.8218ms
2023-10-16 09:07:52.844 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 09:07:52.845 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 09:07:52.846 +02:00  DBG  Request did not match any endpoints
2023-10-16 09:07:52.847 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 09:07:53.064 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 218.9910ms
2023-10-16 09:07:53.071 +02:00  DBG  Connection ID "18374686481282236447" disconnecting.
2023-10-16 09:08:15.290 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 09:08:15.294 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 09:08:15.294 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 09:08:15.295 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:08:15.457 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 06:49:30', Current time: '16/10/2023 07:08:15'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-16 09:08:15.472 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 06:49:30', Current time: '16/10/2023 07:08:15'.
2023-10-16 09:08:15.480 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-16 09:08:15.486 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-16 09:08:15.488 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 401 - - 197.9233ms
2023-10-16 09:08:21.018 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 09:08:21.018 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 09:08:21.018 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 09:08:21.018 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 09:08:21.018 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 09:08:21.034 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 09:08:21.035 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 09:08:21.065 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 09:08:21.067 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 09:08:21.067 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 09:08:21.067 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 09:08:21.067 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 09:08:21.067 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 09:08:21.070 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 09:08:21.071 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 09:08:21.076 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 09:08:21.079 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 09:08:21.079 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 09:08:21.081 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 09:08:21.136 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 09:08:21.173 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 09:08:21.201 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 09:08:21.377 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-16 09:08:21.613 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 09:08:21.698 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:08:21.699 +02:00  DBG  Creating DbConnection.
2023-10-16 09:08:21.700 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 09:08:21.700 +02:00  DBG  Created DbCommand for 'ExecuteReader' (1ms).
2023-10-16 09:08:21.704 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (6ms).
2023-10-16 09:08:21.709 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:08:21.713 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:21.718 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 09:08:21.792 +02:00  INF  Executed DbCommand (78ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 09:08:21.843 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:08:21.890 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:21.890 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 97ms reading results.
2023-10-16 09:08:21.893 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:21.894 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:08:21.903 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 09:08:21.906 +02:00  INF  Information : POST https://localhost:44375/login from '::1:60469' responded 200 in 730,3399 ms
2023-10-16 09:08:21.950 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 809.8755ms.
2023-10-16 09:08:21.957 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 09:08:21.959 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 09:08:21.959 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 09:08:21.961 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 09:08:21.962 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 09:08:22.064 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 992.9939ms
2023-10-16 09:08:22.065 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 09:08:22.067 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 09:08:22.071 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 09:08:22.072 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 09:08:22.073 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 1055.0329ms
2023-10-16 09:08:34.861 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 09:08:34.861 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 09:08:34.861 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 09:08:34.861 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:08:34.871 +02:00  DBG  Successfully validated the token.
2023-10-16 09:08:34.873 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 09:08:34.875 +02:00  DBG  Authorization was successful.
2023-10-16 09:08:34.876 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 09:08:34.876 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:08:34.882 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 09:08:34.882 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 09:08:34.882 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 09:08:34.882 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 09:08:34.882 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 09:08:34.882 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 09:08:34.882 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 09:08:34.883 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 09:08:34.883 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 09:08:34.885 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 09:08:34.886 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 09:08:34.886 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 09:08:34.920 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 09:08:34.920 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 09:08:34.920 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 09:08:34.932 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 09:08:34.932 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 09:08:34.933 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 09:08:34.933 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 09:08:34.933 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 09:08:34.947 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 09:08:34.975 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 09:08:35.018 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 09:08:37.182 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 09:08:37.199 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 09:08:37.201 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 09:08:37.269 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 09:08:37.271 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:08:37.272 +02:00  DBG  Creating DbConnection.
2023-10-16 09:08:37.272 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 09:08:37.272 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:08:37.272 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:08:37.272 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:08:37.272 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:37.272 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 09:08:37.321 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 09:08:37.326 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:37.326 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 09:08:37.326 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:37.326 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:08:38.581 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 09:08:38.586 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 09:08:38.587 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:08:38.587 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:08:38.588 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:08:38.588 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:08:38.588 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:38.588 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 09:08:38.634 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 09:08:38.642 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:08:38.656 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:38.656 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 21ms reading results.
2023-10-16 09:08:38.656 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:38.656 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:08:40.483 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireAppartementEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:08:40.526 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:08:40.531 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:08:40.535 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-16 09:08:40.538 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-16 09:08:40.545 +02:00  DBG  The unchanged property 'LocataireAppartementEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 09:08:40.557 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-16 09:08:40.623 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:08:40.623 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:40.624 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:08:40.624 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:08:40.624 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:08:40.624 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 09:08:40.679 +02:00  INF  Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 09:08:40.687 +02:00  DBG  The foreign key property 'LocataireAppartementEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 09:08:40.691 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:40.691 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 11ms reading results.
2023-10-16 09:08:40.692 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:08:40.692 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:08:40.701 +02:00  DBG  An entity of type 'LocataireAppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:08:40.703 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-16 09:08:44.877 +02:00  INF  Handled Unit
2023-10-16 09:08:44.878 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement/assignerAppartement from '::1:60469' responded 200 in 9902,6587 ms
2023-10-16 09:08:44.882 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9934.9236ms.
2023-10-16 09:08:44.882 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 09:08:44.883 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 09:08:44.883 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 09:08:44.883 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 09:08:44.883 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.ViewModel.ResponseCreation'.
2023-10-16 09:08:44.886 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 10003.5059ms
2023-10-16 09:08:44.886 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:08:44.886 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 09:08:44.886 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 09:08:44.886 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:08:44.886 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 200 9 application/json;+charset=utf-8 10025.8949ms
2023-10-16 09:09:01.614 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 09:09:01.614 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 09:09:01.614 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 09:09:01.614 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:09:01.615 +02:00  DBG  Successfully validated the token.
2023-10-16 09:09:01.615 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 09:09:01.615 +02:00  DBG  Authorization was successful.
2023-10-16 09:09:01.616 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 09:09:01.616 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:09:01.616 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 09:09:01.616 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 09:09:01.616 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 09:09:01.616 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 09:09:01.616 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 09:09:01.616 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 09:09:01.616 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 09:09:01.617 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 09:09:01.617 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 09:09:01.617 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 09:09:01.617 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 09:09:01.617 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 09:09:01.618 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 09:09:01.618 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 09:09:01.618 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 09:09:01.618 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 09:09:01.618 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 09:09:01.619 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 09:09:01.619 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 09:09:01.619 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 09:09:01.635 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 09:09:01.637 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 09:09:01.638 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 09:09:03.432 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:09:03.432 +02:00  DBG  Creating DbConnection.
2023-10-16 09:09:03.432 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 09:09:03.432 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:09:03.433 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:09:03.433 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:09:03.433 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:03.433 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 09:09:03.482 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 09:09:03.482 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:03.482 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 09:09:03.482 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:03.482 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:09:04.633 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:09:04.633 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:09:04.633 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:09:04.633 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:09:04.633 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:04.633 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 09:09:04.680 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 09:09:04.681 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:09:04.681 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:04.681 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 09:09:04.681 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:04.681 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:09:07.071 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireAppartementEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:09:07.072 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:09:07.072 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 09:09:07.072 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-16 09:09:07.073 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-16 09:09:07.073 +02:00  DBG  The unchanged property 'LocataireAppartementEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 09:09:07.073 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-16 09:09:07.075 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 09:09:07.075 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:07.075 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 09:09:07.075 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:09:07.075 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 09:09:07.075 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 09:09:07.362 +02:00  ERR  Failed executing DbCommand (286ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 09:09:07.566 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 09:09:07.566 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:09:07.886 +02:00  ERR  An exception occurred in the database while saving changes for context type 'Infoeco.infrastructure.InfoEcoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "AK_LocataireAppartement_LocataireId_AppartementId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "AK_LocataireAppartement_LocataireId_AppartementId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: LocataireAppartement
    ConstraintName: AK_LocataireAppartement_LocataireId_AppartementId
    File: nbtinsert.c
    Line: 649
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "AK_LocataireAppartement_LocataireId_AppartementId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "AK_LocataireAppartement_LocataireId_AppartementId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: LocataireAppartement
    ConstraintName: AK_LocataireAppartement_LocataireId_AppartementId
    File: nbtinsert.c
    Line: 649
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2023-10-16 09:09:09.555 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 7938.9724ms
2023-10-16 09:09:09.744 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 09:09:10.252 +02:00  ERR  An unhandled exception has occurred while executing the request.Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "AK_LocataireAppartement_LocataireId_AppartementId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "AK_LocataireAppartement_LocataireId_AppartementId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: LocataireAppartement
    ConstraintName: AK_LocataireAppartement_LocataireId_AppartementId
    File: nbtinsert.c
    Line: 649
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infoeco.Services.Implementation.InfoEcoService.AssigneLocataireAUnAppartement(LocataireAppartementEntite locataireAppartement) in C:\Users\fdepret\source\repos\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 158
   at Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommandHandler.ExecuteCommandeAsync(AssignerAppartementCommand commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Commands\LocataireAppartement\AssignerAppartementCommandHandler.cs:line 37
   at Infeco.Api.Infrastructure.MediatR.CommandHandlerBase`1.Handle(TCommande commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\CommandHandlerBase.cs:line 41
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync(AssignerAppartementCommand command, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 44
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 09:09:10.266 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 09:09:10.267 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 09:09:10.267 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 09:09:10.267 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 500 - text/plain;+charset=utf-8 8652.6847ms
2023-10-16 12:03:58.756 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 12:03:58.756 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 12:03:58.757 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 12:03:58.757 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 12:03:58.758 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:03:58.758 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 12:03:58.758 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 12:03:58.759 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 12:03:58.759 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 12:03:58.759 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 12:03:58.759 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 12:03:58.759 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 12:03:58.759 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 12:03:58.760 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 12:03:58.760 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 12:03:58.761 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:03:58.761 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:03:58.761 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:03:58.761 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:03:58.840 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 12:03:58.843 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 12:03:58.846 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:03:58.849 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:03:58.850 +02:00  DBG  Creating DbConnection.
2023-10-16 12:03:58.850 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 12:03:58.850 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:03:58.850 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:03:58.850 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:03:59.419 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:03:59.419 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 12:03:59.467 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 12:03:59.468 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:03:59.468 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:03:59.468 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-16 12:03:59.468 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:03:59.469 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:03:59.469 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 12:03:59.469 +02:00  INF  Information : POST https://localhost:44375/login from '::1:50391' responded 200 in 625,5118 ms
2023-10-16 12:03:59.471 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 630.8993ms.
2023-10-16 12:03:59.471 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 12:03:59.471 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 12:03:59.471 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 12:03:59.471 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 12:03:59.471 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 12:03:59.473 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 713.2705ms
2023-10-16 12:03:59.473 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 12:03:59.473 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:03:59.473 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:03:59.473 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:03:59.473 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 718.7141ms
2023-10-16 12:07:48.850 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 12:07:49.067 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 12:07:49.539 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 12:07:49.767 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:07:49.775 +02:00  DBG  Creating DbConnection.
2023-10-16 12:07:49.819 +02:00  DBG  Created DbConnection. (42ms).
2023-10-16 12:07:49.822 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 12:07:49.837 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:50.323 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:50.325 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:50.333 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-16 12:07:50.338 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 12:07:50.342 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 12:07:50.343 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 12:07:50.344 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:50.685 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:50.690 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:07:50.760 +02:00  INF  Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:07:50.761 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:50.762 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 12:07:50.763 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:51.043 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.043 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.044 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:07:51.044 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 12:07:51.044 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 12:07:51.044 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 12:07:51.044 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:51.045 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.045 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:07:51.089 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:07:51.089 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.089 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:07:51.105 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:07:51.105 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:07:51.105 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:07:51.105 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:51.105 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.105 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 12:07:51.151 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 12:07:51.155 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.157 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 12:07:51.157 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:51.157 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:07:51.165 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 12:07:51.166 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:07:51.167 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:51.168 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:07:51.171 +02:00  DBG  Hosting starting
2023-10-16 12:07:51.205 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 12:07:51.209 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 12:07:51.217 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 12:07:51.218 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 12:07:51.218 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 12:07:51.219 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 12:07:51.219 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 12:07:51.220 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 12:07:51.220 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 12:07:51.224 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 12:07:51.229 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 12:07:51.235 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 12:07:51.237 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 12:07:51.237 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 12:07:51.239 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 12:07:51.240 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 12:07:51.241 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 12:07:51.243 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 12:07:51.243 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 12:07:51.312 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 12:07:51.316 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 12:07:51.316 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 12:07:51.317 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 12:07:51.317 +02:00  INF  Hosting environment: Development
2023-10-16 12:07:51.317 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 12:07:51.317 +02:00  DBG  Hosting started
2023-10-16 12:07:51.351 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 12:07:51.378 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 12:07:51.416 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 12:07:51.416 +02:00  DBG  Request did not match any endpoints
2023-10-16 12:07:51.457 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:07:51.561 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 12:07:53.709 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 12:07:53.723 +02:00  DBG  Connection ID "18374686511347007505" disconnecting.
2023-10-16 12:07:53.724 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 12:07:53.726 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2374.9896ms
2023-10-16 12:07:53.736 +02:00  DBG  Connection ID "18374686528526876687" disconnecting.
2023-10-16 12:07:53.736 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.1437ms
2023-10-16 12:07:53.794 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 12:07:53.796 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 12:07:53.796 +02:00  DBG  Request did not match any endpoints
2023-10-16 12:07:53.797 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:07:53.968 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 172.2550ms
2023-10-16 12:07:53.972 +02:00  DBG  Connection ID "17582052959749931019" disconnecting.
2023-10-16 12:07:58.451 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 12:07:58.454 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 12:07:58.455 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 12:07:58.455 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 12:07:58.458 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:07:58.462 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 12:07:58.463 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 12:07:58.489 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 12:07:58.491 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 12:07:58.492 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 12:07:58.492 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 12:07:58.492 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 12:07:58.493 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 12:07:58.495 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 12:07:58.496 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 12:07:58.501 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:07:58.505 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:07:58.505 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:07:58.507 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:07:58.575 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 12:07:58.608 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 12:07:58.620 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:07:58.751 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-16 12:07:58.900 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:07:58.928 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:07:58.928 +02:00  DBG  Creating DbConnection.
2023-10-16 12:07:58.929 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 12:07:58.929 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:07:58.931 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 12:07:58.933 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:58.934 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:58.937 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 12:07:58.996 +02:00  INF  Executed DbCommand (62ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 12:07:59.032 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:07:59.086 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:59.086 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 89ms reading results.
2023-10-16 12:07:59.089 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:07:59.090 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:07:59.101 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 12:07:59.104 +02:00  INF  Information : POST https://localhost:44375/login from '::1:50889' responded 200 in 493,5689 ms
2023-10-16 12:07:59.246 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 667.6056ms.
2023-10-16 12:07:59.251 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 12:07:59.253 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 12:07:59.253 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 12:07:59.254 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 12:07:59.255 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 12:07:59.348 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 853.2565ms
2023-10-16 12:07:59.349 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 12:07:59.350 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:07:59.352 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:07:59.353 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:07:59.353 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 901.9788ms
2023-10-16 12:08:13.735 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 12:08:13.736 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 12:08:13.736 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 12:08:13.736 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:08:13.771 +02:00  DBG  Successfully validated the token.
2023-10-16 12:08:13.773 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 12:08:13.779 +02:00  DBG  Authorization was successful.
2023-10-16 12:08:13.779 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 12:08:13.779 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:08:13.784 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 12:08:13.784 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 12:08:13.784 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 12:08:13.784 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 12:08:13.784 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 12:08:13.784 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 12:08:13.784 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 12:08:13.785 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 12:08:13.786 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 12:08:13.788 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 12:08:13.789 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 12:08:13.789 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 12:08:13.824 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:08:13.824 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:08:13.824 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 12:08:13.834 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:08:13.834 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:08:13.834 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:08:13.834 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:08:13.834 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:08:13.854 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 12:08:13.883 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 12:08:13.928 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:08:16.389 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 12:08:16.405 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 12:08:16.408 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 12:08:16.481 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:08:16.485 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:08:16.485 +02:00  DBG  Creating DbConnection.
2023-10-16 12:08:16.485 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 12:08:16.485 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:08:16.485 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:08:16.485 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:08:16.486 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:16.486 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 12:08:16.535 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 12:08:16.540 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:16.540 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 12:08:16.540 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:16.540 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:08:18.138 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 12:08:18.143 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:08:18.145 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:08:18.145 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:08:18.145 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:08:18.145 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:08:18.145 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:18.145 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 12:08:18.204 +02:00  INF  Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 12:08:18.214 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:08:18.229 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:18.229 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 25ms reading results.
2023-10-16 12:08:18.229 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:18.229 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:08:27.731 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .FirstOrDefault(u => u.LocataireId == __locataireAppartement_LocataireId_0 && u.AppartementId == __locataireAppartement_AppartementId_1)'
2023-10-16 12:08:27.736 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
        SELECT TOP(1) l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe
        FROM LocataireAppartement AS l
        WHERE (l.LocataireId == @__locataireAppartement_LocataireId_0) && (l.AppartementId == @__locataireAppartement_AppartementId_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-10-16 12:08:27.740 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:08:27.740 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:08:27.740 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:08:27.740 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:08:27.740 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:27.740 +02:00  DBG  Executing DbCommand [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 12:08:27.783 +02:00  INF  Executed DbCommand (43ms) [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 12:08:27.810 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:08:27.820 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:27.820 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 36ms reading results.
2023-10-16 12:08:27.820 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:08:27.820 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:08:33.580 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 19795.7277ms
2023-10-16 12:08:33.830 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:08:34.437 +02:00  ERR  An unhandled exception has occurred while executing the request.System.Exception: Ce locatairer est déjà assigné à cet appartement
   at Infoeco.Services.Implementation.InfoEcoService.AssigneLocataireAUnAppartement(LocataireAppartementEntite locataireAppartement) in C:\Users\fdepret\source\repos\Infeco.api\Infoeco.Services.Implementation\InfoEcoService.cs:line 163
   at Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommandHandler.ExecuteCommandeAsync(AssignerAppartementCommand commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Commands\LocataireAppartement\AssignerAppartementCommandHandler.cs:line 37
   at Infeco.Api.Infrastructure.MediatR.CommandHandlerBase`1.Handle(TCommande commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\CommandHandlerBase.cs:line 41
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync(AssignerAppartementCommand command, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 44
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 12:08:34.464 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:08:34.465 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:08:34.465 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:08:34.465 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 500 - text/plain;+charset=utf-8 20729.6712ms
2023-10-16 12:11:06.423 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 12:11:06.704 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 12:11:07.160 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 12:11:07.416 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:11:07.427 +02:00  DBG  Creating DbConnection.
2023-10-16 12:11:07.475 +02:00  DBG  Created DbConnection. (46ms).
2023-10-16 12:11:07.479 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 12:11:07.496 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:08.040 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.041 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.049 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 12:11:08.054 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 12:11:08.058 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 12:11:08.059 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 12:11:08.059 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:08.401 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.406 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:11:08.477 +02:00  INF  Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:11:08.478 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.479 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 12:11:08.480 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:08.768 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.768 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.769 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:08.769 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 12:11:08.769 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 12:11:08.769 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 12:11:08.769 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:08.770 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.770 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:11:08.818 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:11:08.818 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.818 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:08.832 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:11:08.832 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:08.832 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:08.832 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:08.832 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.833 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 12:11:08.880 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 12:11:08.884 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.886 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 12:11:08.886 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:08.886 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:08.894 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 12:11:08.895 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:11:08.897 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:08.897 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:08.900 +02:00  DBG  Hosting starting
2023-10-16 12:11:08.931 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 12:11:08.935 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 12:11:08.941 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 12:11:08.941 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 12:11:08.942 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 12:11:08.942 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 12:11:08.942 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 12:11:08.942 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 12:11:08.942 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 12:11:08.945 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 12:11:08.949 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 12:11:08.954 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 12:11:08.956 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 12:11:08.957 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 12:11:08.958 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 12:11:08.960 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 12:11:08.961 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 12:11:08.962 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 12:11:08.962 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 12:11:09.030 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 12:11:09.034 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 12:11:09.034 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 12:11:09.035 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 12:11:09.035 +02:00  INF  Hosting environment: Development
2023-10-16 12:11:09.035 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 12:11:09.035 +02:00  DBG  Hosting started
2023-10-16 12:11:09.067 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 12:11:09.093 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 12:11:09.124 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 12:11:09.125 +02:00  DBG  Request did not match any endpoints
2023-10-16 12:11:09.167 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:11:09.269 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 12:11:11.424 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 12:11:11.444 +02:00  DBG  Connection ID "18158513742118125579" disconnecting.
2023-10-16 12:11:11.445 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 12:11:11.448 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2380.7194ms
2023-10-16 12:11:11.461 +02:00  DBG  Connection ID "17509995365712003079" disconnecting.
2023-10-16 12:11:11.462 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 8.0951ms
2023-10-16 12:11:11.538 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 12:11:11.540 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 12:11:11.540 +02:00  DBG  Request did not match any endpoints
2023-10-16 12:11:11.542 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:11:11.733 +02:00  DBG  Connection ID "18374686489872171037" disconnecting.
2023-10-16 12:11:11.734 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 195.2549ms
2023-10-16 12:11:13.257 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 12:11:13.260 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 12:11:13.261 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 12:11:13.261 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:11:13.487 +02:00  DBG  Successfully validated the token.
2023-10-16 12:11:13.493 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 12:11:13.511 +02:00  DBG  Authorization was successful.
2023-10-16 12:11:13.516 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 12:11:13.518 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:11:13.627 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 12:11:13.632 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 12:11:13.632 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 12:11:13.633 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 12:11:13.633 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 12:11:13.634 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 12:11:13.638 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 12:11:13.640 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 12:11:13.653 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 12:11:13.659 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 12:11:13.661 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 12:11:13.661 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 12:11:13.779 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:11:13.779 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:11:13.779 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 12:11:13.795 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:11:13.797 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:11:13.798 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:11:13.798 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:11:13.798 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:11:13.868 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 12:11:13.913 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 12:11:13.928 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:11:21.400 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 12:11:21.489 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 12:11:21.492 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 12:11:21.662 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:11:21.691 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:11:21.691 +02:00  DBG  Creating DbConnection.
2023-10-16 12:11:21.691 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 12:11:21.691 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:21.693 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 12:11:21.696 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:21.698 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:21.702 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 12:11:21.764 +02:00  INF  Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 12:11:21.781 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:21.781 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 17ms reading results.
2023-10-16 12:11:21.784 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:21.785 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:21.788 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 12:11:21.795 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:11:21.797 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:11:21.797 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:21.797 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:21.797 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:21.797 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:21.797 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 12:11:21.843 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 12:11:21.869 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:11:21.894 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:21.894 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 50ms reading results.
2023-10-16 12:11:21.894 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:21.894 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:23.557 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .FirstOrDefault(u => u.LocataireId == __locataireAppartement_LocataireId_0 && u.AppartementId == __locataireAppartement_AppartementId_1)'
2023-10-16 12:11:23.564 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
        SELECT TOP(1) l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe
        FROM LocataireAppartement AS l
        WHERE (l.LocataireId == @__locataireAppartement_LocataireId_0) && (l.AppartementId == @__locataireAppartement_AppartementId_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-10-16 12:11:23.571 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:11:23.571 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:23.571 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:11:23.572 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:23.572 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:23.572 +02:00  DBG  Executing DbCommand [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 12:11:23.618 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 12:11:23.668 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:11:23.684 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:23.684 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 65ms reading results.
2023-10-16 12:11:23.684 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:11:23.684 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:11:29.769 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 16132.1861ms
2023-10-16 12:11:29.954 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:11:30.432 +02:00  ERR  An unhandled exception has occurred while executing the request.System.Exception: Ce locatairer est déjà assigné à cet appartement
   at Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommandHandler.ExecuteCommandeAsync(AssignerAppartementCommand commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Commands\LocataireAppartement\AssignerAppartementCommandHandler.cs:line 47
   at Infeco.Api.Infrastructure.MediatR.CommandHandlerBase`1.Handle(TCommande commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\CommandHandlerBase.cs:line 41
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync(AssignerAppartementCommand command, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 44
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 12:11:30.458 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:11:30.461 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:11:30.462 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 12:11:30.463 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 500 - text/plain;+charset=utf-8 17206.1613ms
2023-10-16 12:16:09.565 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 12:16:09.795 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 12:16:10.250 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 12:16:10.522 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:16:10.533 +02:00  DBG  Creating DbConnection.
2023-10-16 12:16:10.589 +02:00  DBG  Created DbConnection. (51ms).
2023-10-16 12:16:10.595 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 12:16:10.616 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:11.221 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:11.225 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:11.245 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (13ms).
2023-10-16 12:16:11.253 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 12:16:11.262 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (5ms).
2023-10-16 12:16:11.265 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (12ms).
2023-10-16 12:16:11.265 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:11.639 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:11.649 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:16:11.758 +02:00  INF  Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:16:11.760 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:11.764 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (3ms).
2023-10-16 12:16:11.766 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:12.059 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.060 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.060 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:16:12.061 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 12:16:12.061 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 12:16:12.061 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 12:16:12.061 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:12.062 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.062 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:16:12.106 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 12:16:12.107 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.107 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:16:12.129 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:16:12.129 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:12.129 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:12.129 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:12.130 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.130 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 12:16:12.175 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 12:16:12.180 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.182 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-16 12:16:12.182 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:12.182 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:16:12.195 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 12:16:12.197 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:16:12.199 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:12.200 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 12:16:12.203 +02:00  DBG  Hosting starting
2023-10-16 12:16:12.238 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 12:16:12.242 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 12:16:12.248 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 12:16:12.248 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 12:16:12.249 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 12:16:12.249 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 12:16:12.249 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 12:16:12.249 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 12:16:12.249 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 12:16:12.253 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 12:16:12.257 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 12:16:12.258 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 12:16:12.258 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 12:16:12.258 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 12:16:12.258 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 12:16:12.258 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 12:16:12.258 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 12:16:12.265 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 12:16:12.267 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 12:16:12.268 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 12:16:12.270 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 12:16:12.272 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 12:16:12.273 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 12:16:12.277 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 12:16:12.278 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 12:16:12.348 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 12:16:12.348 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 12:16:12.348 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 12:16:12.348 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 12:16:12.348 +02:00  INF  Hosting environment: Development
2023-10-16 12:16:12.348 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 12:16:12.348 +02:00  DBG  Hosting started
2023-10-16 12:16:12.382 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 12:16:12.409 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 12:16:12.447 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 12:16:12.448 +02:00  DBG  Request did not match any endpoints
2023-10-16 12:16:12.492 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:16:12.637 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 12:16:14.802 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 12:16:14.813 +02:00  DBG  Connection ID "18302628917309079557" disconnecting.
2023-10-16 12:16:14.822 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 12:16:14.823 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2434.0054ms
2023-10-16 12:16:14.836 +02:00  DBG  Connection ID "18158513742118125581" disconnecting.
2023-10-16 12:16:14.837 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 7.0099ms
2023-10-16 12:16:14.923 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 12:16:14.925 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 12:16:14.925 +02:00  DBG  Request did not match any endpoints
2023-10-16 12:16:14.927 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 12:16:15.179 +02:00  DBG  Connection ID "18302628921604046850" disconnecting.
2023-10-16 12:16:15.180 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 256.7784ms
2023-10-16 12:16:22.171 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 12:16:22.174 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 12:16:22.175 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 12:16:22.175 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:16:22.315 +02:00  DBG  Successfully validated the token.
2023-10-16 12:16:22.317 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 12:16:22.324 +02:00  DBG  Authorization was successful.
2023-10-16 12:16:22.326 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 12:16:22.327 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:16:22.358 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 12:16:22.360 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 12:16:22.360 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 12:16:22.361 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 12:16:22.361 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 12:16:22.361 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 12:16:22.364 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 12:16:22.365 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 12:16:22.372 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 12:16:22.375 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 12:16:22.376 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 12:16:22.376 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 12:16:22.455 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:16:22.455 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:16:22.455 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 12:16:22.464 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 12:16:22.465 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:16:22.465 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:16:22.465 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 12:16:22.466 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 12:16:22.543 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 12:16:22.581 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 12:16:22.593 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 12:16:22.739 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 12:16:22.789 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 12:16:22.791 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 12:16:22.952 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:16:22.983 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:16:22.983 +02:00  DBG  Creating DbConnection.
2023-10-16 12:16:22.983 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 12:16:22.983 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:22.985 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 12:16:22.988 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:22.990 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:22.992 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 12:16:23.051 +02:00  INF  Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 12:16:23.063 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:23.063 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 11ms reading results.
2023-10-16 12:16:23.066 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:23.066 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:16:23.069 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 12:16:23.075 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 12:16:23.076 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:16:23.076 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:23.077 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:23.077 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:23.077 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:23.077 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 12:16:23.122 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 12:16:23.151 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:16:23.189 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:23.189 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 67ms reading results.
2023-10-16 12:16:23.189 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:23.189 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:16:26.818 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .FirstOrDefault(u => u.LocataireId == __locataireAppartement_LocataireId_0 && u.AppartementId == __locataireAppartement_AppartementId_1)'
2023-10-16 12:16:26.825 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
        SELECT TOP(1) l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe
        FROM LocataireAppartement AS l
        WHERE (l.LocataireId == @__locataireAppartement_LocataireId_0) && (l.AppartementId == @__locataireAppartement_AppartementId_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-10-16 12:16:26.830 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 12:16:26.830 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:26.830 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 12:16:26.830 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:26.830 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:26.830 +02:00  DBG  Executing DbCommand [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 12:16:26.875 +02:00  INF  Executed DbCommand (44ms) [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 12:16:26.917 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 12:16:26.931 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:26.931 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 56ms reading results.
2023-10-16 12:16:26.931 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 12:16:26.931 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 12:16:28.673 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 6309.5655ms
2023-10-16 12:16:28.838 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 12:16:29.375 +02:00  ERR  An unhandled exception has occurred while executing the request.InfoEco.Domain.Exceptions.GlobalException: Ce locatairer est déjà assigné à cet appartement
   at Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommandHandler.ExecuteCommandeAsync(AssignerAppartementCommand commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Commands\LocataireAppartement\AssignerAppartementCommandHandler.cs:line 48
   at Infeco.Api.Infrastructure.MediatR.CommandHandlerBase`1.Handle(TCommande commande, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\CommandHandlerBase.cs:line 41
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync(AssignerAppartementCommand command, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 44
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 12:16:29.399 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 12:16:29.402 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 12:16:29.403 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 12:16:29.404 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 500 - text/plain;+charset=utf-8 7232.3331ms
2023-10-16 15:00:54.895 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 15:00:55.145 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 15:00:55.561 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 15:00:55.847 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:00:55.856 +02:00  DBG  Creating DbConnection.
2023-10-16 15:00:55.903 +02:00  DBG  Created DbConnection. (44ms).
2023-10-16 15:00:55.907 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 15:00:55.922 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:00:56.460 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:56.462 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:56.470 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 15:00:56.475 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:00:56.479 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 15:00:56.480 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 15:00:56.481 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:00:56.837 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:56.849 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:00:56.950 +02:00  INF  Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:00:56.951 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:56.953 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-16 15:00:56.954 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:00:57.241 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.241 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.242 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:00:57.242 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:00:57.242 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:00:57.243 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:00:57.243 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:00:57.244 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.244 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:00:57.289 +02:00  INF  Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:00:57.289 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.289 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:00:57.309 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:00:57.309 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:00:57.309 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:00:57.309 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:00:57.309 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.309 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:00:57.355 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:00:57.358 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.360 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 15:00:57.360 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:00:57.360 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:00:57.370 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 15:00:57.371 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:00:57.372 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:00:57.373 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:00:57.375 +02:00  DBG  Hosting starting
2023-10-16 15:00:57.405 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 15:00:57.409 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 15:00:57.416 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 15:00:57.416 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 15:00:57.417 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 15:00:57.417 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 15:00:57.417 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 15:00:57.418 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 15:00:57.418 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 15:00:57.422 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 15:00:57.426 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 15:00:57.432 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 15:00:57.434 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:00:57.434 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 15:00:57.436 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:00:57.437 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 15:00:57.438 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 15:00:57.440 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 15:00:57.440 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 15:00:57.506 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 15:00:57.506 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 15:00:57.506 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 15:00:57.512 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 15:00:57.512 +02:00  INF  Hosting environment: Development
2023-10-16 15:00:57.512 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 15:00:57.512 +02:00  DBG  Hosting started
2023-10-16 15:00:57.546 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 15:00:57.571 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 15:00:57.603 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 15:00:57.603 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:00:57.638 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:00:57.751 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 15:00:59.896 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 15:00:59.913 +02:00  DBG  Connection ID "18374686528526876691" disconnecting.
2023-10-16 15:00:59.914 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 15:00:59.916 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2369.9258ms
2023-10-16 15:00:59.920 +02:00  DBG  Connection ID "18374686481282236459" disconnecting.
2023-10-16 15:00:59.920 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 5.7543ms
2023-10-16 15:01:00.001 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 15:01:00.004 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 15:01:00.004 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:01:00.007 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:01:00.220 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 217.5226ms
2023-10-16 15:01:11.645 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 15:01:11.648 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 15:01:11.648 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 15:01:11.649 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:01:11.651 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:01:11.654 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:01:11.655 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:01:11.679 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 15:01:11.681 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:01:11.681 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:01:11.681 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:01:11.681 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:01:11.681 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:01:11.683 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 15:01:11.684 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 15:01:11.688 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:01:11.690 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:01:11.691 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:01:11.692 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:01:11.747 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:01:11.781 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 15:01:11.804 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:01:11.931 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-16 15:01:12.070 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 15:01:12.099 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:01:12.099 +02:00  DBG  Creating DbConnection.
2023-10-16 15:01:12.099 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:01:12.099 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:01:12.101 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 15:01:12.103 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:01:12.104 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:01:12.107 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 15:01:12.163 +02:00  INF  Executed DbCommand (58ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 15:01:12.195 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:01:12.230 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:01:12.231 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 67ms reading results.
2023-10-16 15:01:12.233 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:01:12.234 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:01:12.241 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 15:01:12.244 +02:00  INF  Information : POST https://localhost:44375/login from '::1:50177' responded 200 in 460,0473 ms
2023-10-16 15:01:12.350 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 600.5697ms.
2023-10-16 15:01:12.354 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:01:12.355 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:01:12.356 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:01:12.358 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:01:12.358 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 15:01:12.425 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 741.465ms
2023-10-16 15:01:12.426 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:01:12.427 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:01:12.429 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:01:12.430 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:01:12.430 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 785.0491ms
2023-10-16 15:01:28.047 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:01:28.047 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:01:28.047 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:01:28.048 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:01:28.082 +02:00  DBG  Successfully validated the token.
2023-10-16 15:01:28.084 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:01:28.090 +02:00  DBG  Authorization was successful.
2023-10-16 15:01:28.091 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:01:28.091 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:01:28.095 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:01:28.095 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:01:28.095 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:01:28.095 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:01:28.095 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:01:28.095 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:01:28.096 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:01:28.096 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:01:28.097 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:01:28.098 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:01:28.099 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:01:28.099 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:01:28.126 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:01:28.126 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:01:28.126 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:01:28.136 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:01:28.136 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:01:28.136 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:01:28.136 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:01:28.136 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:01:28.149 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:01:28.152 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:01:28.194 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:01:28.213 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Locataire)
    .Include(u => u.Appartement)
    .Where(demande => True && False || (int?)demande.AppartementId == __criteres_AppartementId_0 && True)'
2023-10-16 15:01:28.225 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-16 15:01:28.227 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-16 15:01:28.278 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: LocataireEntite.CreeLe (DateTime) Required, 9], [Property: LocataireEntite.DateNaissance (DateTime?), 10], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 11], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 12], [Property: LocataireEntite.ModifieLe (DateTime?), 13], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 14], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 15], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 16] }
            2 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: AppartementEntite.Adresse (string), 18], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 19], [Property: AppartementEntite.ComplementAdresse (string), 20], [Property: AppartementEntite.CreeLe (DateTime) Required, 21], [Property: AppartementEntite.DepotDeGarantie (double) Required, 22], [Property: AppartementEntite.Loyer (double) Required, 23], [Property: AppartementEntite.ModifieLe (DateTime?), 24], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 25], [Property: AppartementEntite.PrixDesCharges (double) Required, 26], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 27], [Property: AppartementEntite.VilleId (int) Required FK Index, 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
        FROM LocataireAppartement AS l
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        WHERE (TRUE && (FALSE || (l.AppartementId == @__criteres_AppartementId_0))) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-16 15:01:28.280 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:01:28.280 +02:00  DBG  Creating DbConnection.
2023-10-16 15:01:28.280 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:01:28.280 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:01:28.280 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:01:28.281 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:01:28.281 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:01:28.281 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:01:28.330 +02:00  INF  Executed DbCommand (49ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:01:28.353 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:01:28.375 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:01:28.376 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:01:28.393 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:01:28.393 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:01:28.421 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:01:28.421 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 90ms reading results.
2023-10-16 15:01:28.421 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:01:28.421 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:01:29.529 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 1433.3112ms
2023-10-16 15:01:29.684 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:01:30.129 +02:00  ERR  An unhandled exception has occurred while executing the request.AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
List`1 -> LocataireAppartementViewModel
System.Collections.Generic.List`1[[Infoeco.infrastructure.Entities.LocataireAppartementEntite, Infoeco.infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> Infeco.Api.ViewModel.LocataireAppartementViewModel
   at lambda_method279(Closure, Object, LocataireAppartementViewModel, ResolutionContext)
   at Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQueryHandler.Handle(RechercheLocataireAppartementQuery request, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Queries\LocataireAppartement\RechercheLocataireAppartementQueryHandler.cs:line 32
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync(RechercheLocataireAppartementQuery recherche, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 31
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 15:01:30.155 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:01:30.156 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:01:30.156 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:01:30.156 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 500 - text/plain;+charset=utf-8 2108.8882ms
2023-10-16 15:07:40.230 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 15:07:40.436 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 15:07:40.875 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 15:07:41.110 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:07:41.118 +02:00  DBG  Creating DbConnection.
2023-10-16 15:07:41.160 +02:00  DBG  Created DbConnection. (39ms).
2023-10-16 15:07:41.163 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 15:07:41.179 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:41.720 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:41.722 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:41.733 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 15:07:41.739 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:07:41.744 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 15:07:41.745 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 15:07:41.745 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:42.123 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.131 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:07:42.203 +02:00  INF  Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:07:42.204 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.206 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 15:07:42.207 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:42.531 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.531 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.532 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:07:42.532 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:07:42.533 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:07:42.533 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:07:42.533 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:42.533 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.533 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:07:42.579 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:07:42.579 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.579 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:07:42.594 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:07:42.594 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:07:42.594 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:07:42.594 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:42.595 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.595 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:07:42.641 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:07:42.645 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.647 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-16 15:07:42.647 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:42.647 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:07:42.656 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 15:07:42.657 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:07:42.658 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:42.659 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:07:42.662 +02:00  DBG  Hosting starting
2023-10-16 15:07:42.692 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 15:07:42.697 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 15:07:42.703 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 15:07:42.703 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 15:07:42.704 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 15:07:42.704 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 15:07:42.704 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 15:07:42.704 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 15:07:42.705 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 15:07:42.708 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 15:07:42.713 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 15:07:42.713 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 15:07:42.713 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 15:07:42.714 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 15:07:42.714 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 15:07:42.714 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 15:07:42.714 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 15:07:42.720 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 15:07:42.723 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:07:42.724 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 15:07:42.726 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:07:42.727 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 15:07:42.728 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 15:07:42.730 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 15:07:42.731 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 15:07:42.800 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 15:07:42.805 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 15:07:42.805 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 15:07:42.806 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 15:07:42.806 +02:00  INF  Hosting environment: Development
2023-10-16 15:07:42.806 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 15:07:42.806 +02:00  DBG  Hosting started
2023-10-16 15:07:42.839 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 15:07:42.868 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 15:07:42.906 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 15:07:42.906 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:07:42.948 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:07:43.050 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 15:07:45.208 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 15:07:45.227 +02:00  DBG  Connection ID "18230571331861086209" disconnecting.
2023-10-16 15:07:45.229 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 15:07:45.231 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2392.6925ms
2023-10-16 15:07:45.250 +02:00  DBG  Connection ID "18086456148080197639" disconnecting.
2023-10-16 15:07:45.250 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 10.3673ms
2023-10-16 15:07:45.345 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 15:07:45.346 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 15:07:45.346 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:07:45.348 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:07:45.532 +02:00  DBG  Connection ID "18374686515641974820" disconnecting.
2023-10-16 15:07:45.532 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.7277ms
2023-10-16 15:07:48.051 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:07:48.054 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:07:48.055 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:07:48.056 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:07:48.177 +02:00  DBG  Successfully validated the token.
2023-10-16 15:07:48.178 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:07:48.183 +02:00  DBG  Authorization was successful.
2023-10-16 15:07:48.185 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:07:48.185 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:07:48.213 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:07:48.214 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:07:48.215 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:07:48.215 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:07:48.215 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:07:48.215 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:07:48.218 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:07:48.219 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:07:48.223 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:07:48.226 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:07:48.227 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:07:48.227 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:07:48.298 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:07:48.298 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:07:48.298 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:07:48.306 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:07:48.307 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:07:48.308 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:07:48.308 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:07:48.308 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:07:48.362 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:07:48.389 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:07:48.401 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:07:48.528 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Locataire)
    .Include(u => u.Appartement)
    .Where(demande => True && False || (int?)demande.AppartementId == __criteres_AppartementId_0 && True)'
2023-10-16 15:07:48.607 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-16 15:07:48.608 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-16 15:07:48.767 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: LocataireEntite.CreeLe (DateTime) Required, 9], [Property: LocataireEntite.DateNaissance (DateTime?), 10], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 11], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 12], [Property: LocataireEntite.ModifieLe (DateTime?), 13], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 14], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 15], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 16] }
            2 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: AppartementEntite.Adresse (string), 18], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 19], [Property: AppartementEntite.ComplementAdresse (string), 20], [Property: AppartementEntite.CreeLe (DateTime) Required, 21], [Property: AppartementEntite.DepotDeGarantie (double) Required, 22], [Property: AppartementEntite.Loyer (double) Required, 23], [Property: AppartementEntite.ModifieLe (DateTime?), 24], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 25], [Property: AppartementEntite.PrixDesCharges (double) Required, 26], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 27], [Property: AppartementEntite.VilleId (int) Required FK Index, 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
        FROM LocataireAppartement AS l
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        WHERE (TRUE && (FALSE || (l.AppartementId == @__criteres_AppartementId_0))) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-16 15:07:48.795 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:07:48.795 +02:00  DBG  Creating DbConnection.
2023-10-16 15:07:48.796 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:07:48.796 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:07:48.797 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 15:07:48.799 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:48.801 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:48.803 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:07:48.861 +02:00  INF  Executed DbCommand (60ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:07:48.908 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:07:48.941 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:07:48.942 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:07:48.963 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:07:48.963 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:07:48.987 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:48.987 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 125ms reading results.
2023-10-16 15:07:48.989 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:07:48.990 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:07:50.315 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 2097.0944ms
2023-10-16 15:07:50.478 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:07:50.944 +02:00  ERR  An unhandled exception has occurred while executing the request.AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> IReadOnlyCollection`1
System.Collections.Generic.List`1[[Infoeco.infrastructure.Entities.LocataireAppartementEntite, Infoeco.infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IReadOnlyCollection`1[[Infeco.Api.ViewModel.LocataireAppartementViewModel, Infeco.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
LocataireAppartementEntite -> LocataireAppartementViewModel
Infoeco.infrastructure.Entities.LocataireAppartementEntite -> Infeco.Api.ViewModel.LocataireAppartementViewModel

Type Map configuration:
LocataireAppartementEntite -> LocataireAppartementViewModel
Infoeco.infrastructure.Entities.LocataireAppartementEntite -> Infeco.Api.ViewModel.LocataireAppartementViewModel

Destination Member:
Locataire

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
LocataireEntite -> LocataireViewModel
Infoeco.infrastructure.Entities.LocataireEntite -> Infeco.Api.ViewModel.LocataireViewModel

Destination Member:
Locataire

   at lambda_method219(Closure, LocataireEntite, LocataireViewModel, ResolutionContext)
   at lambda_method218(Closure, Object, IReadOnlyCollection`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method218(Closure, Object, IReadOnlyCollection`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method218(Closure, Object, IReadOnlyCollection`1, ResolutionContext)
   at Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQueryHandler.Handle(RechercheLocataireAppartementQuery request, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Queries\LocataireAppartement\RechercheLocataireAppartementQueryHandler.cs:line 32
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync(RechercheLocataireAppartementQuery recherche, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 31
   at lambda_method21(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 15:07:50.969 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:07:50.971 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:07:50.972 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 15:07:50.973 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 500 - text/plain;+charset=utf-8 2922.5666ms
2023-10-16 15:08:02.359 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:08:02.360 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:08:02.360 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:08:02.360 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:08:02.360 +02:00  DBG  Successfully validated the token.
2023-10-16 15:08:02.361 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:08:02.362 +02:00  DBG  Authorization was successful.
2023-10-16 15:08:02.363 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:08:02.363 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:08:02.363 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:08:02.363 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:08:02.363 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:08:02.363 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:08:02.363 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:08:02.363 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:08:02.364 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:08:02.364 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:08:02.364 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:08:02.364 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:08:02.365 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:08:02.365 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:08:02.365 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:08:02.365 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:08:02.365 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:08:02.366 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:08:02.366 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:08:02.366 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:08:02.366 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:08:02.366 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:08:02.379 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:08:02.381 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:08:02.424 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:08:02.429 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:08:02.430 +02:00  DBG  Creating DbConnection.
2023-10-16 15:08:02.430 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:08:02.430 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:08:02.430 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:08:02.430 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:08:02.430 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:08:02.430 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:08:02.477 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:08:02.477 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:08:02.477 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:08:02.477 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:08:02.477 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:08:02.477 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:08:02.478 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:08:02.478 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:08:02.478 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:08:02.478 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:21:52.813 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 15:21:53.052 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 15:21:53.501 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 15:21:53.744 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:21:53.753 +02:00  DBG  Creating DbConnection.
2023-10-16 15:21:53.797 +02:00  DBG  Created DbConnection. (41ms).
2023-10-16 15:21:53.800 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 15:21:53.817 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:21:54.372 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:54.373 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:54.382 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-16 15:21:54.387 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:21:54.392 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 15:21:54.393 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 15:21:54.393 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:21:54.737 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:54.746 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:21:54.818 +02:00  INF  Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:21:54.819 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:54.820 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 15:21:54.821 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:21:55.100 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.100 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.100 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:21:55.101 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:21:55.101 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:21:55.101 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:21:55.101 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:21:55.101 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.101 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:21:55.150 +02:00  INF  Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:21:55.150 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.150 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:21:55.164 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:21:55.165 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:21:55.165 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:21:55.165 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:21:55.165 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.165 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:21:55.212 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:21:55.217 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.219 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-16 15:21:55.219 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:21:55.219 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:21:55.229 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 15:21:55.231 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:21:55.232 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:21:55.233 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:21:55.235 +02:00  DBG  Hosting starting
2023-10-16 15:21:55.275 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 15:21:55.278 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 15:21:55.285 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 15:21:55.285 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 15:21:55.285 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 15:21:55.285 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 15:21:55.286 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 15:21:55.286 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 15:21:55.286 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 15:21:55.289 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 15:21:55.293 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 15:21:55.293 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 15:21:55.293 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 15:21:55.293 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 15:21:55.293 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 15:21:55.294 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 15:21:55.294 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 15:21:55.299 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 15:21:55.301 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:21:55.303 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 15:21:55.304 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:21:55.306 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 15:21:55.307 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 15:21:55.308 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 15:21:55.309 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 15:21:55.385 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 15:21:55.385 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 15:21:55.385 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 15:21:55.392 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 15:21:55.393 +02:00  INF  Hosting environment: Development
2023-10-16 15:21:55.393 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 15:21:55.393 +02:00  DBG  Hosting started
2023-10-16 15:21:55.434 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 15:21:55.461 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 15:21:55.495 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 15:21:55.496 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:21:55.549 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:21:55.658 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 15:21:57.804 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 15:21:57.812 +02:00  DBG  Connection ID "18374686489872171041" disconnecting.
2023-10-16 15:21:57.814 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 15:21:57.815 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2382.4711ms
2023-10-16 15:21:57.820 +02:00  DBG  Connection ID "18374686528526876694" disconnecting.
2023-10-16 15:21:57.821 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.3058ms
2023-10-16 15:21:57.902 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 15:21:57.904 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 15:21:57.904 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:21:57.906 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:21:58.087 +02:00  DBG  Connection ID "18230571297501347841" disconnecting.
2023-10-16 15:21:58.087 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 185.3101ms
2023-10-16 15:22:10.981 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:22:10.983 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:22:10.984 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:22:10.985 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:22:11.134 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 13:11:12', Current time: '16/10/2023 13:22:11'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-16 15:22:11.147 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 13:11:12', Current time: '16/10/2023 13:22:11'.
2023-10-16 15:22:11.153 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-16 15:22:11.157 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-16 15:22:11.159 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 401 - - 178.1696ms
2023-10-16 15:22:17.111 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 15:22:17.111 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 15:22:17.111 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 15:22:17.111 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:22:17.111 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:22:17.115 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:22:17.116 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:22:17.145 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 15:22:17.147 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:22:17.147 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:22:17.147 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:22:17.148 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:22:17.148 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:22:17.150 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 15:22:17.151 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 15:22:17.157 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:22:17.159 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:22:17.160 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:22:17.162 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:22:17.210 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:22:17.244 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 15:22:17.256 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:22:22.192 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-16 15:22:22.364 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 15:22:22.397 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:22:22.397 +02:00  DBG  Creating DbConnection.
2023-10-16 15:22:22.397 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:22:22.397 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:22:22.399 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 15:22:22.402 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:22:22.404 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:22:22.406 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 15:22:22.467 +02:00  INF  Executed DbCommand (63ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 15:22:22.503 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:22:22.545 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:22:22.546 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 78ms reading results.
2023-10-16 15:22:22.549 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:22:22.550 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:22:22.560 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 15:22:22.563 +02:00  INF  Information : POST https://localhost:44375/login from '::1:51907' responded 200 in 5315,7705 ms
2023-10-16 15:22:22.595 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5382.0092ms.
2023-10-16 15:22:22.600 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:22:22.601 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:22:22.602 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:22:22.603 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:22:22.603 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 15:22:22.677 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 5527.1144ms
2023-10-16 15:22:22.678 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:22:22.678 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:22:22.681 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:22:22.682 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 15:22:22.683 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 5571.6749ms
2023-10-16 15:22:40.698 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:22:40.698 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:22:40.698 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:22:40.698 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:22:40.705 +02:00  DBG  Successfully validated the token.
2023-10-16 15:22:40.707 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:22:40.710 +02:00  DBG  Authorization was successful.
2023-10-16 15:22:40.710 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:22:40.710 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:22:40.715 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:22:40.715 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:22:40.715 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:22:40.715 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:22:40.715 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:22:40.715 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:22:40.716 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:22:40.716 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:22:40.717 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:22:40.719 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:22:40.721 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:22:40.721 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:22:40.752 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:22:40.752 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:22:40.752 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:22:40.761 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:22:40.761 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:22:40.761 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:22:40.761 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:22:40.761 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:22:40.775 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:22:40.777 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:22:40.818 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:22:40.833 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Locataire)
    .Include(u => u.Appartement)
    .Where(demande => True && False || (int?)demande.AppartementId == __criteres_AppartementId_0 && True)'
2023-10-16 15:22:40.845 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-16 15:22:40.847 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-16 15:22:40.901 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: LocataireEntite.CreeLe (DateTime) Required, 9], [Property: LocataireEntite.DateNaissance (DateTime?), 10], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 11], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 12], [Property: LocataireEntite.ModifieLe (DateTime?), 13], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 14], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 15], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 16] }
            2 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: AppartementEntite.Adresse (string), 18], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 19], [Property: AppartementEntite.ComplementAdresse (string), 20], [Property: AppartementEntite.CreeLe (DateTime) Required, 21], [Property: AppartementEntite.DepotDeGarantie (double) Required, 22], [Property: AppartementEntite.Loyer (double) Required, 23], [Property: AppartementEntite.ModifieLe (DateTime?), 24], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 25], [Property: AppartementEntite.PrixDesCharges (double) Required, 26], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 27], [Property: AppartementEntite.VilleId (int) Required FK Index, 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
        FROM LocataireAppartement AS l
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        WHERE (TRUE && (FALSE || (l.AppartementId == @__criteres_AppartementId_0))) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-16 15:22:40.903 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:22:40.903 +02:00  DBG  Creating DbConnection.
2023-10-16 15:22:40.903 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:22:40.903 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:22:40.903 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:22:40.903 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:22:40.903 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:22:40.904 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:22:40.956 +02:00  INF  Executed DbCommand (53ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:22:40.977 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:22:40.999 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:22:41.001 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:22:41.016 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:22:41.017 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:22:41.037 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:22:41.037 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 80ms reading results.
2023-10-16 15:22:41.037 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:22:41.037 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:22:50.744 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 10029.1348ms
2023-10-16 15:22:50.901 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:22:51.356 +02:00  ERR  An unhandled exception has occurred while executing the request.AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
LocataireEntite -> LocataireViewModel
Infoeco.infrastructure.Entities.LocataireEntite -> Infeco.Api.ViewModel.LocataireViewModel
   at lambda_method280(Closure, Object, LocataireViewModel, ResolutionContext)
   at Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQueryHandler.Handle(RechercheLocataireAppartementQuery request, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Queries\LocataireAppartement\RechercheLocataireAppartementQueryHandler.cs:line 43
   at Infeco.api.Infrastructure.MediatR.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Infrastructure\MediatR\LoggingBehavior.cs:line 27
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync(RechercheLocataireAppartementQuery recherche, CancellationToken cancellationToken) in C:\Users\fdepret\source\repos\Infeco.api\Infeco.api\Controllers\LocataireAppartementController.cs:line 31
   at lambda_method82(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2023-10-16 15:22:51.369 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:22:51.369 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:22:51.370 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:22:51.370 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 500 - text/plain;+charset=utf-8 10672.0997ms
2023-10-16 15:23:54.808 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 15:23:55.035 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 15:23:55.493 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 15:23:55.703 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:23:55.714 +02:00  DBG  Creating DbConnection.
2023-10-16 15:23:55.762 +02:00  DBG  Created DbConnection. (45ms).
2023-10-16 15:23:55.765 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 15:23:55.780 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:23:56.267 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:56.269 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:56.277 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 15:23:56.282 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:23:56.287 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (2ms).
2023-10-16 15:23:56.288 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 15:23:56.288 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:23:56.635 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:56.643 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:23:56.721 +02:00  INF  Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:23:56.721 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:56.723 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 15:23:56.724 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:23:57.010 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.010 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.010 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:23:57.011 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 15:23:57.012 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:23:57.012 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 15:23:57.012 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:23:57.012 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.012 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:23:57.059 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 15:23:57.059 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.059 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:23:57.078 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:23:57.078 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:23:57.078 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:23:57.078 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:23:57.078 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.079 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:23:57.133 +02:00  INF  Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 15:23:57.137 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.139 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 15:23:57.139 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:23:57.139 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:23:57.150 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 15:23:57.151 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:23:57.153 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:23:57.153 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:23:57.156 +02:00  DBG  Hosting starting
2023-10-16 15:23:57.185 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 15:23:57.190 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 15:23:57.196 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 15:23:57.197 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 15:23:57.197 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 15:23:57.197 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 15:23:57.197 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 15:23:57.198 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 15:23:57.198 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 15:23:57.201 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 15:23:57.205 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 15:23:57.211 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 15:23:57.213 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:23:57.214 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 15:23:57.216 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 15:23:57.217 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 15:23:57.218 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 15:23:57.219 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 15:23:57.220 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 15:23:57.281 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 15:23:57.281 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 15:23:57.281 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 15:23:57.287 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 15:23:57.287 +02:00  INF  Hosting environment: Development
2023-10-16 15:23:57.287 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 15:23:57.287 +02:00  DBG  Hosting started
2023-10-16 15:23:57.321 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 15:23:57.347 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 15:23:57.380 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 15:23:57.380 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:23:57.417 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:23:57.542 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 15:23:59.672 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 15:23:59.685 +02:00  DBG  Connection ID "18230571314681217044" disconnecting.
2023-10-16 15:23:59.686 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 15:23:59.687 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2366.5999ms
2023-10-16 15:23:59.698 +02:00  DBG  Connection ID "18302628913014112295" disconnecting.
2023-10-16 15:23:59.698 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 11.2007ms
2023-10-16 15:23:59.757 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 15:23:59.758 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 15:23:59.758 +02:00  DBG  Request did not match any endpoints
2023-10-16 15:23:59.760 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:23:59.924 +02:00  DBG  Connection ID "18374686489872171043" disconnecting.
2023-10-16 15:23:59.924 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 167.3959ms
2023-10-16 15:24:01.704 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:24:01.712 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:24:01.713 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:24:01.715 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:24:01.870 +02:00  DBG  Successfully validated the token.
2023-10-16 15:24:01.871 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:24:01.878 +02:00  DBG  Authorization was successful.
2023-10-16 15:24:01.880 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:24:01.881 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:24:01.905 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:24:01.906 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:24:01.907 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:24:01.907 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:24:01.907 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:24:01.907 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:24:01.909 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:24:01.910 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:24:01.914 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:24:01.916 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:24:01.917 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:24:01.917 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:24:01.979 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:24:01.979 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:24:01.979 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:24:01.990 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:24:01.991 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:24:01.991 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:24:01.991 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:24:01.992 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:24:02.050 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:24:02.072 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:24:02.098 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:24:02.222 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Locataire)
    .Include(u => u.Appartement)
    .Where(demande => True && False || (int?)demande.AppartementId == __criteres_AppartementId_0 && True)'
2023-10-16 15:24:02.282 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-16 15:24:02.284 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-16 15:24:02.439 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: LocataireEntite.CreeLe (DateTime) Required, 9], [Property: LocataireEntite.DateNaissance (DateTime?), 10], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 11], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 12], [Property: LocataireEntite.ModifieLe (DateTime?), 13], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 14], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 15], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 16] }
            2 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: AppartementEntite.Adresse (string), 18], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 19], [Property: AppartementEntite.ComplementAdresse (string), 20], [Property: AppartementEntite.CreeLe (DateTime) Required, 21], [Property: AppartementEntite.DepotDeGarantie (double) Required, 22], [Property: AppartementEntite.Loyer (double) Required, 23], [Property: AppartementEntite.ModifieLe (DateTime?), 24], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 25], [Property: AppartementEntite.PrixDesCharges (double) Required, 26], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 27], [Property: AppartementEntite.VilleId (int) Required FK Index, 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
        FROM LocataireAppartement AS l
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        WHERE (TRUE && (FALSE || (l.AppartementId == @__criteres_AppartementId_0))) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-16 15:24:02.467 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:24:02.467 +02:00  DBG  Creating DbConnection.
2023-10-16 15:24:02.467 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:24:02.467 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:24:02.469 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-16 15:24:02.471 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:24:02.472 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:24:02.474 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:24:02.532 +02:00  INF  Executed DbCommand (59ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:24:02.574 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:24:02.607 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:24:02.609 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:24:02.629 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:24:02.629 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:24:02.656 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:24:02.656 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 124ms reading results.
2023-10-16 15:24:02.659 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:24:02.660 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:24:17.981 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:24:17.984 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52085' responded 200 in 15909,1027 ms
2023-10-16 15:24:17.992 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15939.1366ms.
2023-10-16 15:24:17.996 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:24:17.998 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:24:17.998 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:24:18.000 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:24:18.000 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:24:18.058 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 16147.7944ms
2023-10-16 15:24:18.059 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:24:18.060 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:24:18.062 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:24:18.063 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:24:18.063 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 200 604 application/json;+charset=utf-8 16358.7532ms
2023-10-16 15:26:36.686 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/locataires application/json 232
2023-10-16 15:26:36.686 +02:00  DBG  1 candidate(s) found for the request path '/locataires'
2023-10-16 15:26:36.686 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)' with route pattern 'Locataires' is valid for the request path '/locataires'
2023-10-16 15:26:36.686 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-16 15:26:36.720 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '15/10/2023 17:40:07', Current time: '16/10/2023 13:26:36'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-16 15:26:36.734 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '15/10/2023 17:40:07', Current time: '16/10/2023 13:26:36'.
2023-10-16 15:26:36.745 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-16 15:26:36.752 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-16 15:26:36.753 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/locataires application/json 232 - 401 - - 67.4920ms
2023-10-16 15:26:43.798 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/login - 0
2023-10-16 15:26:43.798 +02:00  DBG  1 candidate(s) found for the request path '/login'
2023-10-16 15:26:43.798 +02:00  DBG  Endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)' with route pattern 'login' is valid for the request path '/login'
2023-10-16 15:26:43.798 +02:00  DBG  Request matched endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:26:43.798 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 15:26:43.799 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:26:43.799 +02:00  INF  Executing endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:26:43.805 +02:00  INF  Route matched with {action = "Login", controller = "Connexion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(System.Threading.CancellationToken) on controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api).
2023-10-16 15:26:43.805 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:26:43.805 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:26:43.805 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:26:43.805 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:26:43.805 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:26:43.805 +02:00  DBG  Executing controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 15:26:43.806 +02:00  DBG  Executed controller factory for controller IDSoft.CrmWelcome.Api.Controllers.ConnexionController (Infeco.Api)
2023-10-16 15:26:43.807 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:26:43.807 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:26:43.807 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:26:43.807 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:26:43.819 +02:00  INF  Executing action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:26:43.831 +02:00  INF  Handling ObtenirUtilisateurParIdentifiantEtMotDePasseQuery
2023-10-16 15:26:43.874 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:26:43.880 +02:00  DBG  Compiling query expression: 
'DbSet<UtilisateurEntite>()
    .FirstOrDefault(u => u.Courriel == __identifiant_0 && u.Passe == __motDePasse_1)'
2023-10-16 15:26:43.887 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UtilisateurEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<UtilisateurEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UtilisateurEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UtilisateurEntite.AgenceImmobiliereId (int) Required FK Index, 1], [Property: UtilisateurEntite.Courriel (string) Required Index MaxLength(255), 2], [Property: UtilisateurEntite.CreeLe (DateTime) Required, 3], [Property: UtilisateurEntite.EstActif (bool) Required, 4], [Property: UtilisateurEntite.ModifieLe (DateTime?), 5], [Property: UtilisateurEntite.Nom (string) Required MaxLength(255), 6], [Property: UtilisateurEntite.Passe (string) Required MaxLength(255), 7], [Property: UtilisateurEntite.Prenom (string) Required MaxLength(255), 8] }
            SELECT TOP(1) u.Id, u.AgenceImmobiliereId, u.Courriel, u.CreeLe, u.EstActif, u.ModifieLe, u.Nom, u.Passe, u.Prenom
            FROM Utilisateur AS u
            WHERE (u.Courriel == @__identifiant_0) && (u.Passe == @__motDePasse_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UtilisateurEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 15:26:43.891 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:26:43.891 +02:00  DBG  Creating DbConnection.
2023-10-16 15:26:43.891 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:26:43.891 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:26:43.891 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:26:43.892 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:26:43.892 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:26:43.892 +02:00  DBG  Executing DbCommand [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 15:26:43.947 +02:00  INF  Executed DbCommand (55ms) [Parameters=[@__identifiant_0='?', @__motDePasse_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AgenceImmobiliereId", u."Courriel", u."CreeLe", u."EstActif", u."ModifieLe", u."Nom", u."Passe", u."Prenom"
FROM "Utilisateur" AS u
WHERE u."Courriel" = @__identifiant_0 AND u."Passe" = @__motDePasse_1
LIMIT 1
2023-10-16 15:26:43.950 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'UtilisateurEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:26:43.964 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:26:43.964 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 16ms reading results.
2023-10-16 15:26:43.964 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:26:43.965 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:26:43.968 +02:00  INF  Handled DetailUtilisateurResponse
2023-10-16 15:26:43.968 +02:00  INF  Information : POST https://localhost:44375/login from '::1:52279' responded 200 in 137,3095 ms
2023-10-16 15:26:43.981 +02:00  INF  Executed action method IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 161.7921ms.
2023-10-16 15:26:43.982 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:26:43.982 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:26:43.982 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:26:43.982 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:26:43.982 +02:00  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=7.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-10-16 15:26:43.987 +02:00  INF  Executed action IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api) in 181.7223ms
2023-10-16 15:26:43.987 +02:00  INF  Executed endpoint 'IDSoft.CrmWelcome.Api.Controllers.ConnexionController.LoginAsync (Infeco.Api)'
2023-10-16 15:26:43.987 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:26:43.987 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:26:43.987 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:26:43.987 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/login - 0 - 200 517 application/json;+charset=utf-8 189.5587ms
2023-10-16 15:27:02.026 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/locataires application/json 232
2023-10-16 15:27:02.026 +02:00  DBG  1 candidate(s) found for the request path '/locataires'
2023-10-16 15:27:02.026 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)' with route pattern 'Locataires' is valid for the request path '/locataires'
2023-10-16 15:27:02.026 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-16 15:27:02.026 +02:00  DBG  Successfully validated the token.
2023-10-16 15:27:02.026 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:27:02.027 +02:00  DBG  Authorization was successful.
2023-10-16 15:27:02.028 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:27:02.028 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-16 15:27:02.034 +02:00  INF  Route matched with {action = "CreerUnLocataire", controller = "Locataire"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.ResponseCreation]] CreerUnLocataireAsync(Infeco.Api.Commands.Locataire.CreerLocataireCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireController (Infeco.Api).
2023-10-16 15:27:02.034 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:27:02.034 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:27:02.034 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:27:02.034 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:27:02.034 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:27:02.034 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireController (Infeco.Api)
2023-10-16 15:27:02.035 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireController (Infeco.Api)
2023-10-16 15:27:02.035 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand' ...
2023-10-16 15:27:02.035 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand' using the name '' in request data ...
2023-10-16 15:27:02.036 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:27:02.036 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:27:02.048 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand'.
2023-10-16 15:27:02.048 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand'.
2023-10-16 15:27:02.048 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand' ...
2023-10-16 15:27:02.055 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.Locataire.CreerLocataireCommand'.
2023-10-16 15:27:02.055 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:02.055 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:02.055 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:02.055 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:02.079 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:27:02.120 +02:00  INF  Handling CreerLocataireCommand
2023-10-16 15:27:02.122 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:27:02.157 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:02.164 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:02.168 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-16 15:27:02.171 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-16 15:27:02.178 +02:00  DBG  The unchanged property 'LocataireEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 15:27:02.186 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-16 15:27:02.266 +02:00  DBG  Creating DbConnection.
2023-10-16 15:27:02.266 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:27:02.266 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:02.266 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:02.268 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:27:02.268 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:02.269 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:02.269 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Locataire" ("CreeLe", "DateNaissance", "IBAN", "Mail", "ModifieLe", "Nom", "Prenom", "Telephone")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2023-10-16 15:27:02.324 +02:00  INF  Executed DbCommand (55ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?', @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Locataire" ("CreeLe", "DateNaissance", "IBAN", "Mail", "ModifieLe", "Nom", "Prenom", "Telephone")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2023-10-16 15:27:02.335 +02:00  DBG  The foreign key property 'LocataireEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 15:27:02.339 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:02.340 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 15ms reading results.
2023-10-16 15:27:02.340 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:02.341 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:27:02.351 +02:00  DBG  An entity of type 'LocataireEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:02.353 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-16 15:27:02.358 +02:00  INF  Handled Unit
2023-10-16 15:27:02.358 +02:00  INF  Information : POST https://localhost:44375/locataires from '::1:52279' responded 200 in 237,3198 ms
2023-10-16 15:27:02.361 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 281.9858ms.
2023-10-16 15:27:02.361 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:27:02.361 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:27:02.361 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:27:02.361 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:27:02.361 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.ViewModel.ResponseCreation'.
2023-10-16 15:27:02.363 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api) in 328.9445ms
2023-10-16 15:27:02.363 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireController.CreerUnLocataireAsync (Infeco.Api)'
2023-10-16 15:27:02.363 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:27:02.363 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:02.363 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:27:02.363 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/locataires application/json 232 - 200 8 application/json;+charset=utf-8 337.7513ms
2023-10-16 15:27:08.003 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:27:08.003 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:27:08.004 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:27:08.004 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:08.004 +02:00  DBG  Successfully validated the token.
2023-10-16 15:27:08.004 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:27:08.004 +02:00  DBG  Authorization was successful.
2023-10-16 15:27:08.004 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:27:08.004 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:08.005 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:27:08.005 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:27:08.005 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:27:08.005 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:27:08.005 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:27:08.005 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:27:08.005 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:27:08.005 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:27:08.005 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:27:08.005 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:27:08.005 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:27:08.005 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:27:08.005 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:08.005 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:08.005 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:27:08.006 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:08.006 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:08.006 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:08.006 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:08.006 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:08.022 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:27:08.024 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:27:08.025 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:27:08.030 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:27:08.030 +02:00  DBG  Creating DbConnection.
2023-10-16 15:27:08.030 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:27:08.030 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:08.030 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:08.030 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:08.030 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:08.030 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:27:08.077 +02:00  INF  Executed DbCommand (47ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:27:08.078 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:08.078 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:08.078 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:08.078 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:08.078 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:08.078 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:08.079 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 1ms reading results.
2023-10-16 15:27:08.079 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:08.079 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:27:08.079 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:27:08.079 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52279' responded 200 in 55,2245 ms
2023-10-16 15:27:08.079 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.243ms.
2023-10-16 15:27:08.079 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:27:08.079 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:27:08.080 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:27:08.080 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:27:08.080 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:27:08.080 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 75.3928ms
2023-10-16 15:27:08.080 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:08.080 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:27:08.080 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:08.080 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:27:08.081 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 200 604 application/json;+charset=utf-8 77.9827ms
2023-10-16 15:27:14.626 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:27:14.627 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:27:14.627 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:27:14.627 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:14.627 +02:00  DBG  Successfully validated the token.
2023-10-16 15:27:14.627 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:27:14.627 +02:00  DBG  Authorization was successful.
2023-10-16 15:27:14.627 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:27:14.627 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:14.627 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:27:14.627 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:27:14.628 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:27:14.628 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:27:14.628 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:27:14.628 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:27:14.628 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:27:14.628 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:27:14.628 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:27:14.628 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:27:14.628 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:27:14.628 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:27:14.628 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:14.628 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:14.628 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:27:14.628 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:14.628 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:14.628 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:14.628 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:14.628 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:14.641 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:27:14.642 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:27:14.644 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:27:14.646 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:27:14.646 +02:00  DBG  Creating DbConnection.
2023-10-16 15:27:14.646 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:27:14.646 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:14.646 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:14.646 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:14.647 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:14.647 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:27:14.692 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:27:14.693 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:14.693 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:14.693 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:14.693 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:14.693 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:14.693 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:14.693 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:27:14.693 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:14.693 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:27:14.694 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:27:14.694 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52279' responded 200 in 51,3585 ms
2023-10-16 15:27:14.694 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.2299ms.
2023-10-16 15:27:14.694 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:27:14.694 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:27:14.694 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:27:14.694 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:27:14.694 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:27:14.695 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 67.0286ms
2023-10-16 15:27:14.695 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:14.695 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:27:14.695 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:14.695 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:27:14.695 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 200 604 application/json;+charset=utf-8 68.7148ms
2023-10-16 15:27:31.838 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:27:31.838 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:27:31.838 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:27:31.838 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:31.839 +02:00  DBG  Successfully validated the token.
2023-10-16 15:27:31.839 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:27:31.839 +02:00  DBG  Authorization was successful.
2023-10-16 15:27:31.839 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:27:31.839 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:27:31.839 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:27:31.839 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:27:31.839 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:27:31.839 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:27:31.839 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:27:31.839 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:27:31.839 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:27:31.839 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:27:31.839 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:27:31.840 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:27:31.840 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:27:31.840 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:27:31.840 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:31.840 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:31.840 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:27:31.840 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:27:31.840 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:31.840 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:31.840 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:27:31.840 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:27:31.857 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:27:31.857 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:27:31.858 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:27:31.859 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:27:31.859 +02:00  DBG  Creating DbConnection.
2023-10-16 15:27:31.859 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:27:31.859 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:31.859 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:27:31.859 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:27:31.859 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:31.859 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:27:31.905 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:27:31.905 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:31.905 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:31.905 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:31.905 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:31.906 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:27:31.906 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:31.906 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:27:31.906 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:27:31.906 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:17.159 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:28:17.159 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52279' responded 200 in 45302,3651 ms
2023-10-16 15:28:17.160 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45302.8871ms.
2023-10-16 15:28:17.160 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:28:17.160 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:28:17.160 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:28:17.160 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:28:17.160 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:28:17.162 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 15:28:17.167 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 15:28:17.167 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 45327.6119ms
2023-10-16 15:28:17.168 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 15:28:17.168 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:28:17.168 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 15:28:17.170 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:28:17.171 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:17.172 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:17.184 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 200 604 application/json;+charset=utf-8 45334.8999ms
2023-10-16 15:28:17.195 +02:00  INF  Failed to validate the token.Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 10:17:59', Current time: '16/10/2023 13:28:17'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()

2023-10-16 15:28:17.195 +02:00  INF  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '16/10/2023 10:17:59', Current time: '16/10/2023 13:28:17'.
2023-10-16 15:28:17.195 +02:00  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-16 15:28:17.196 +02:00  INF  AuthenticationScheme: Bearer was challenged.
2023-10-16 15:28:17.197 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 401 - - 35.6886ms
2023-10-16 15:28:25.513 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126
2023-10-16 15:28:25.514 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 15:28:25.514 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)' with route pattern 'LocatairesAppartement/assignerAppartement' is valid for the request path '/LocatairesAppartement/assignerAppartement'
2023-10-16 15:28:25.514 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 15:28:25.514 +02:00  DBG  Successfully validated the token.
2023-10-16 15:28:25.514 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:28:25.514 +02:00  DBG  Authorization was successful.
2023-10-16 15:28:25.514 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:28:25.514 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 15:28:25.517 +02:00  INF  Route matched with {action = "AssignerLocataireAUnAppartement", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] AssignerLocataireAUnAppartementAsync(Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:28:25.517 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:28:25.517 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:28:25.517 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:28:25.517 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:28:25.517 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:28:25.517 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:28:25.517 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:28:25.517 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 15:28:25.517 +02:00  DBG  Attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' using the name '' in request data ...
2023-10-16 15:28:25.517 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:28:25.517 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:28:25.521 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 15:28:25.521 +02:00  DBG  Done attempting to bind parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 15:28:25.521 +02:00  DBG  Attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand' ...
2023-10-16 15:28:25.523 +02:00  DBG  Done attempting to validate the bound parameter 'command' of type 'Infeco.Api.Commands.LocataireAppartement.AssignerAppartementCommand'.
2023-10-16 15:28:25.523 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:28:25.523 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:28:25.523 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:28:25.523 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:28:25.535 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:28:25.541 +02:00  INF  Handling AssignerAppartementCommand
2023-10-16 15:28:25.542 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:28:25.547 +02:00  DBG  Compiling query expression: 
'DbSet<AppartementEntite>()
    .Include(u => u.Ville)
    .Include(u => u.TypeAppartement)
    .AsNoTracking()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 15:28:25.548 +02:00  DBG  Including navigation: 'AppartementEntite.Ville'.
2023-10-16 15:28:25.549 +02:00  DBG  Including navigation: 'AppartementEntite.TypeAppartement'.
2023-10-16 15:28:25.561 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppartementEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<AppartementEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppartementEntite.Adresse (string), 1], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 2], [Property: AppartementEntite.ComplementAdresse (string), 3], [Property: AppartementEntite.CreeLe (DateTime) Required, 4], [Property: AppartementEntite.DepotDeGarantie (double) Required, 5], [Property: AppartementEntite.Loyer (double) Required, 6], [Property: AppartementEntite.ModifieLe (DateTime?), 7], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 8], [Property: AppartementEntite.PrixDesCharges (double) Required, 9], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 10], [Property: AppartementEntite.VilleId (int) Required FK Index, 11] }
                1 -> Dictionary<IProperty, int> { [Property: VilleEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: VilleEntite.CodePostal (string) Required, 13], [Property: VilleEntite.CreeLe (DateTime) Required, 14], [Property: VilleEntite.ModifieLe (DateTime?), 15], [Property: VilleEntite.Nom (string) Required MaxLength(255), 16] }
                2 -> Dictionary<IProperty, int> { [Property: TypeAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: TypeAppartementEntite.Nom (string) Required MaxLength(255), 18] }
            SELECT TOP(1) a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId, v.Id, v.CodePostal, v.CreeLe, v.ModifieLe, v.Nom, t.Id, t.Nom
            FROM Appartement AS a
            INNER JOIN Ville AS v ON a.VilleId == v.Id
            LEFT JOIN TypeAppartement AS t ON a.TypeAppartementId == t.Id
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppartementEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 15:28:25.563 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:28:25.563 +02:00  DBG  Creating DbConnection.
2023-10-16 15:28:25.563 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:28:25.563 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.563 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.563 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:25.563 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.563 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 15:28:25.613 +02:00  INF  Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId", v."Id", v."CodePostal", v."CreeLe", v."ModifieLe", v."Nom", t."Id", t."Nom"
FROM "Appartement" AS a
INNER JOIN "Ville" AS v ON a."VilleId" = v."Id"
LEFT JOIN "TypeAppartement" AS t ON a."TypeAppartementId" = t."Id"
WHERE a."Id" = @__id_0
LIMIT 1
2023-10-16 15:28:25.616 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.616 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 2ms reading results.
2023-10-16 15:28:25.616 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.616 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:25.618 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireEntite>()
    .FirstOrDefault(u => u.Id == __id_0)'
2023-10-16 15:28:25.622 +02:00  DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<LocataireEntite>(
    asyncEnumerable: new SingleQueryingEnumerable<LocataireEntite>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireEntite.CreeLe (DateTime) Required, 1], [Property: LocataireEntite.DateNaissance (DateTime?), 2], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 3], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 4], [Property: LocataireEntite.ModifieLe (DateTime?), 5], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 6], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 7], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 8] }
            SELECT TOP(1) l.Id, l.CreeLe, l.DateNaissance, l.IBAN, l.Mail, l.ModifieLe, l.Nom, l.Prenom, l.Telephone
            FROM Locataire AS l
            WHERE l.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireEntite>, 
        Infoeco.infrastructure.InfoEcoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-16 15:28:25.623 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:28:25.623 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.623 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.623 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:25.623 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.623 +02:00  DBG  Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 15:28:25.669 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."CreeLe", l."DateNaissance", l."IBAN", l."Mail", l."ModifieLe", l."Nom", l."Prenom", l."Telephone"
FROM "Locataire" AS l
WHERE l."Id" = @__id_0
LIMIT 1
2023-10-16 15:28:25.669 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:25.670 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.670 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:28:25.670 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.670 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:25.677 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .FirstOrDefault(u => u.LocataireId == __locataireAppartement_LocataireId_0 && u.AppartementId == __locataireAppartement_AppartementId_1)'
2023-10-16 15:28:25.682 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
        SELECT TOP(1) l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe
        FROM LocataireAppartement AS l
        WHERE (l.LocataireId == @__locataireAppartement_LocataireId_0) && (l.AppartementId == @__locataireAppartement_AppartementId_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-10-16 15:28:25.685 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:28:25.685 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.685 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.685 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:25.685 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.686 +02:00  DBG  Executing DbCommand [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 15:28:25.731 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__locataireAppartement_LocataireId_0='?' (DbType = Int32), @__locataireAppartement_AppartementId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe"
FROM "LocataireAppartement" AS l
WHERE l."LocataireId" = @__locataireAppartement_LocataireId_0 AND l."AppartementId" = @__locataireAppartement_AppartementId_1
LIMIT 1
2023-10-16 15:28:25.732 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.732 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:28:25.732 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.732 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:25.735 +02:00  DBG  'InfoEcoDbContext' generated a temporary value for the property 'Id.LocataireAppartementEntite'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:25.740 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:25.742 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:25.744 +02:00  DBG  SaveChanges starting for 'InfoEcoDbContext'.
2023-10-16 15:28:25.744 +02:00  DBG  DetectChanges starting for 'InfoEcoDbContext'.
2023-10-16 15:28:25.749 +02:00  DBG  The unchanged property 'LocataireAppartementEntite.CreeLe' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 15:28:25.755 +02:00  DBG  DetectChanges completed for 'InfoEcoDbContext'.
2023-10-16 15:28:25.767 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:25.767 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.767 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:28:25.767 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.767 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:25.767 +02:00  DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 15:28:25.821 +02:00  INF  Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LocataireAppartement" ("AppartementId", "CreeLe", "DateEntree", "DateSortie", "DepotDeGarantieRegle", "LocataireId", "ModifieLe")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2023-10-16 15:28:25.823 +02:00  DBG  The foreign key property 'LocataireAppartementEntite.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-16 15:28:25.828 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.828 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 7ms reading results.
2023-10-16 15:28:25.828 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:25.828 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:25.830 +02:00  DBG  An entity of type 'LocataireAppartementEntite' tracked by 'InfoEcoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:25.830 +02:00  DBG  SaveChanges completed for 'InfoEcoDbContext' with 1 entities written to the database.
2023-10-16 15:28:25.830 +02:00  INF  Handled Unit
2023-10-16 15:28:25.830 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement/assignerAppartement from '::1:52449' responded 200 in 289,0103 ms
2023-10-16 15:28:25.831 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 295.3735ms.
2023-10-16 15:28:25.831 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:28:25.831 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:28:25.831 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:28:25.831 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:28:25.831 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.ViewModel.ResponseCreation'.
2023-10-16 15:28:25.832 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api) in 314.5283ms
2023-10-16 15:28:25.832 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.AssignerLocataireAUnAppartementAsync (Infeco.Api)'
2023-10-16 15:28:25.832 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:28:25.832 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:25.832 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:25.832 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement/assignerAppartement application/json 126 - 200 9 application/json;+charset=utf-8 318.7031ms
2023-10-16 15:28:30.016 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27
2023-10-16 15:28:30.016 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:28:30.016 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:28:30.016 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:28:30.016 +02:00  DBG  Successfully validated the token.
2023-10-16 15:28:30.016 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:28:30.016 +02:00  DBG  Authorization was successful.
2023-10-16 15:28:30.016 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:28:30.016 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:28:30.016 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:28:30.016 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:28:30.016 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:28:30.016 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:28:30.017 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:28:30.017 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:28:30.017 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:28:30.017 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:28:30.017 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:28:30.017 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:28:30.017 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:28:30.017 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:28:30.017 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:28:30.017 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:28:30.017 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:28:30.017 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:28:30.017 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:28:30.017 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:28:30.017 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:28:30.017 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:28:30.034 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:28:30.034 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:28:30.035 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:28:30.037 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:28:30.037 +02:00  DBG  Creating DbConnection.
2023-10-16 15:28:30.037 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:28:30.037 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:30.037 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:28:30.037 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:30.037 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:30.037 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:28:30.083 +02:00  INF  Executed DbCommand (46ms) [Parameters=[@__criteres_AppartementId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."AppartementId" = @__criteres_AppartementId_0
2023-10-16 15:28:30.084 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:28:30.084 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:30.084 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:28:30.084 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:28:30.084 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:39.367 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:28:39.367 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52449' responded 200 in 9332,7016 ms
2023-10-16 15:28:39.367 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9333.0266ms.
2023-10-16 15:28:39.367 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:28:39.368 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:28:39.368 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:28:39.368 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:28:39.368 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:28:39.369 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 9351.9595ms
2023-10-16 15:28:39.369 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:28:39.369 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:28:39.369 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:28:39.369 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:28:39.369 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 27 - 200 812 application/json;+charset=utf-8 9353.3748ms
2023-10-16 15:29:54.596 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 24
2023-10-16 15:29:54.596 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:29:54.596 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:29:54.596 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:29:54.596 +02:00  DBG  Successfully validated the token.
2023-10-16 15:29:54.596 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:29:54.597 +02:00  DBG  Authorization was successful.
2023-10-16 15:29:54.597 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:29:54.597 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:29:54.597 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:29:54.597 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:29:54.597 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:29:54.597 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:29:54.597 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:29:54.597 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:29:54.597 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:29:54.597 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:29:54.597 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:29:54.597 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:29:54.597 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:29:54.597 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:29:54.598 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:29:54.598 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:29:54.598 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:29:54.598 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:29:54.598 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:29:54.598 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:29:54.598 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:29:54.598 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:29:54.614 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:29:54.614 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:29:54.614 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:29:54.628 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Locataire)
    .Include(u => u.Appartement)
    .Where(demande => True && True && False || (int?)demande.LocataireId == __criteres_LocataireId_0)'
2023-10-16 15:29:54.629 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-16 15:29:54.630 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-16 15:29:54.636 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: LocataireEntite.CreeLe (DateTime) Required, 9], [Property: LocataireEntite.DateNaissance (DateTime?), 10], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 11], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 12], [Property: LocataireEntite.ModifieLe (DateTime?), 13], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 14], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 15], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 16] }
            2 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: AppartementEntite.Adresse (string), 18], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 19], [Property: AppartementEntite.ComplementAdresse (string), 20], [Property: AppartementEntite.CreeLe (DateTime) Required, 21], [Property: AppartementEntite.DepotDeGarantie (double) Required, 22], [Property: AppartementEntite.Loyer (double) Required, 23], [Property: AppartementEntite.ModifieLe (DateTime?), 24], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 25], [Property: AppartementEntite.PrixDesCharges (double) Required, 26], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 27], [Property: AppartementEntite.VilleId (int) Required FK Index, 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
        FROM LocataireAppartement AS l
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        WHERE (TRUE && TRUE) && (FALSE || (l.LocataireId == @__criteres_LocataireId_0))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-16 15:29:54.637 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:29:54.637 +02:00  DBG  Creating DbConnection.
2023-10-16 15:29:54.637 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:29:54.637 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:29:54.637 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:29:54.637 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:29:54.980 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:29:54.980 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_LocataireId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."LocataireId" = @__criteres_LocataireId_0
2023-10-16 15:29:55.028 +02:00  INF  Executed DbCommand (48ms) [Parameters=[@__criteres_LocataireId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."LocataireId" = @__criteres_LocataireId_0
2023-10-16 15:29:55.028 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:29:55.028 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:29:55.029 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:29:55.029 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:29:55.029 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:29:55.029 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:29:55.029 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:29:55.029 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:29:55.029 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:29:58.913 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:29:58.913 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52449' responded 200 in 4298,9532 ms
2023-10-16 15:29:58.913 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4299.5219ms.
2023-10-16 15:29:58.914 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:29:58.914 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:29:58.914 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:29:58.914 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:29:58.914 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:29:58.915 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 4318.2516ms
2023-10-16 15:29:58.915 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:29:58.915 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:29:58.915 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:29:58.916 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:29:58.916 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 24 - 200 609 application/json;+charset=utf-8 4320.2096ms
2023-10-16 15:30:32.129 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 32
2023-10-16 15:30:32.129 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:30:32.129 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:30:32.129 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:30:32.129 +02:00  DBG  Successfully validated the token.
2023-10-16 15:30:32.130 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:30:32.130 +02:00  DBG  Authorization was successful.
2023-10-16 15:30:32.130 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:30:32.130 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:30:32.130 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:30:32.130 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:30:32.130 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:30:32.130 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:30:32.130 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:30:32.130 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:30:32.130 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:30:32.130 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:30:32.130 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:30:32.131 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:30:32.131 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:30:32.131 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:30:32.131 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:30:32.131 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:30:32.131 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:30:32.131 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:30:32.131 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:30:32.132 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:30:32.132 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:30:32.132 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:30:32.144 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:30:32.145 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:30:32.145 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:30:32.146 +02:00  DBG  Compiling query expression: 
'DbSet<LocataireAppartementEntite>()
    .Include(u => u.Locataire)
    .Include(u => u.Appartement)
    .Where(demande => True && True && True)'
2023-10-16 15:30:32.147 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Locataire'.
2023-10-16 15:30:32.147 +02:00  DBG  Including navigation: 'LocataireAppartementEntite.Appartement'.
2023-10-16 15:30:32.153 +02:00  DBG  Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocataireAppartementEntite>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: LocataireAppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocataireAppartementEntite.AppartementId (int) Required FK AlternateKey Index AfterSave:Throw, 1], [Property: LocataireAppartementEntite.CreeLe (DateTime) Required, 2], [Property: LocataireAppartementEntite.DateEntree (DateTime) Required, 3], [Property: LocataireAppartementEntite.DateSortie (DateTime?), 4], [Property: LocataireAppartementEntite.DepotDeGarantieRegle (bool) Required, 5], [Property: LocataireAppartementEntite.LocataireId (int) Required FK AlternateKey AfterSave:Throw, 6], [Property: LocataireAppartementEntite.ModifieLe (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: LocataireEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: LocataireEntite.CreeLe (DateTime) Required, 9], [Property: LocataireEntite.DateNaissance (DateTime?), 10], [Property: LocataireEntite.IBAN (string) Required MaxLength(255), 11], [Property: LocataireEntite.Mail (string) Required Index MaxLength(255), 12], [Property: LocataireEntite.ModifieLe (DateTime?), 13], [Property: LocataireEntite.Nom (string) Required MaxLength(255), 14], [Property: LocataireEntite.Prenom (string) Required MaxLength(255), 15], [Property: LocataireEntite.Telephone (string) Required MaxLength(32), 16] }
            2 -> Dictionary<IProperty, int> { [Property: AppartementEntite.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: AppartementEntite.Adresse (string), 18], [Property: AppartementEntite.AgenceImmobiliereId (int) Required FK Index, 19], [Property: AppartementEntite.ComplementAdresse (string), 20], [Property: AppartementEntite.CreeLe (DateTime) Required, 21], [Property: AppartementEntite.DepotDeGarantie (double) Required, 22], [Property: AppartementEntite.Loyer (double) Required, 23], [Property: AppartementEntite.ModifieLe (DateTime?), 24], [Property: AppartementEntite.NombreDeMetre2 (double) Required, 25], [Property: AppartementEntite.PrixDesCharges (double) Required, 26], [Property: AppartementEntite.TypeAppartementId (int?) FK Index, 27], [Property: AppartementEntite.VilleId (int) Required FK Index, 28] }
        SELECT l.Id, l.AppartementId, l.CreeLe, l.DateEntree, l.DateSortie, l.DepotDeGarantieRegle, l.LocataireId, l.ModifieLe, l0.Id, l0.CreeLe, l0.DateNaissance, l0.IBAN, l0.Mail, l0.ModifieLe, l0.Nom, l0.Prenom, l0.Telephone, a.Id, a.Adresse, a.AgenceImmobiliereId, a.ComplementAdresse, a.CreeLe, a.DepotDeGarantie, a.Loyer, a.ModifieLe, a.NombreDeMetre2, a.PrixDesCharges, a.TypeAppartementId, a.VilleId
        FROM LocataireAppartement AS l
        INNER JOIN Locataire AS l0 ON l.LocataireId == l0.Id
        INNER JOIN Appartement AS a ON l.AppartementId == a.Id
        WHERE (TRUE && TRUE) && TRUE), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocataireAppartementEntite>, 
    Infoeco.infrastructure.InfoEcoDbContext, 
    False, 
    False, 
    True
)'
2023-10-16 15:30:32.153 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:30:32.153 +02:00  DBG  Creating DbConnection.
2023-10-16 15:30:32.153 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:30:32.153 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:30:32.153 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:30:32.153 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:30:32.153 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:30:32.153 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
2023-10-16 15:30:32.199 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
2023-10-16 15:30:32.199 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.199 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.199 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.199 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.199 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.199 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.200 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.200 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:30:32.200 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:30:32.200 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:30:32.200 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:30:32.200 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:30:36.467 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:30:36.467 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52449' responded 200 in 4319,9486 ms
2023-10-16 15:30:36.467 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4322.4712ms.
2023-10-16 15:30:36.467 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:30:36.467 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:30:36.467 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:30:36.467 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:30:36.467 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:30:36.468 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 4337.8584ms
2023-10-16 15:30:36.468 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:30:36.468 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:30:36.468 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:30:36.468 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:30:36.468 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 32 - 200 812 application/json;+charset=utf-8 4340.1447ms
2023-10-16 15:31:32.566 +02:00  INF  Request starting HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 24
2023-10-16 15:31:32.566 +02:00  DBG  1 candidate(s) found for the request path '/LocatairesAppartement'
2023-10-16 15:31:32.566 +02:00  DBG  Endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)' with route pattern 'LocatairesAppartement' is valid for the request path '/LocatairesAppartement'
2023-10-16 15:31:32.566 +02:00  DBG  Request matched endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:31:32.566 +02:00  DBG  Successfully validated the token.
2023-10-16 15:31:32.566 +02:00  DBG  AuthenticationScheme: Bearer was successfully authenticated.
2023-10-16 15:31:32.566 +02:00  DBG  Authorization was successful.
2023-10-16 15:31:32.566 +02:00  DBG  Static files was skipped as the request already matched an endpoint.
2023-10-16 15:31:32.566 +02:00  INF  Executing endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:31:32.567 +02:00  INF  Route matched with {action = "ObtenirLocataireAppartementParLocataireId", controller = "LocataireAppartement"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Infeco.Api.ViewModel.LocataireAppartementViewModel]] ObtenirLocataireAppartementParLocataireIdAsync(Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery, System.Threading.CancellationToken) on controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api).
2023-10-16 15:31:32.567 +02:00  DBG  Execution plan of authorization filters (in the following order): ["None"]
2023-10-16 15:31:32.567 +02:00  DBG  Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2023-10-16 15:31:32.567 +02:00  DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-16 15:31:32.567 +02:00  DBG  Execution plan of exception filters (in the following order): ["None"]
2023-10-16 15:31:32.567 +02:00  DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2023-10-16 15:31:32.567 +02:00  DBG  Executing controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:31:32.567 +02:00  DBG  Executed controller factory for controller Infeco.Api.Controllers.LocataireAppartementController (Infeco.Api)
2023-10-16 15:31:32.567 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:31:32.567 +02:00  DBG  Attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' using the name '' in request data ...
2023-10-16 15:31:32.567 +02:00  DBG  Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-10-16 15:31:32.567 +02:00  DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-10-16 15:31:32.568 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:31:32.568 +02:00  DBG  Done attempting to bind parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:31:32.568 +02:00  DBG  Attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery' ...
2023-10-16 15:31:32.568 +02:00  DBG  Done attempting to validate the bound parameter 'recherche' of type 'Infeco.Api.Queries.LocataireAppartement.RechercheLocataireAppartementQuery'.
2023-10-16 15:31:32.568 +02:00  DBG  Attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:31:32.568 +02:00  DBG  Done attempting to bind parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:31:32.568 +02:00  DBG  Attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken' ...
2023-10-16 15:31:32.568 +02:00  DBG  Done attempting to validate the bound parameter 'cancellationToken' of type 'System.Threading.CancellationToken'.
2023-10-16 15:31:32.583 +02:00  INF  Executing action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) - Validation state: "Valid"
2023-10-16 15:31:32.583 +02:00  INF  Handling RechercheLocataireAppartementQuery
2023-10-16 15:31:32.584 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 15:31:32.596 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 15:31:32.596 +02:00  DBG  Creating DbConnection.
2023-10-16 15:31:32.596 +02:00  DBG  Created DbConnection. (0ms).
2023-10-16 15:31:32.596 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:31:32.596 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 15:31:32.596 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 15:31:32.596 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:31:32.597 +02:00  DBG  Executing DbCommand [Parameters=[@__criteres_LocataireId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."LocataireId" = @__criteres_LocataireId_0
2023-10-16 15:31:32.642 +02:00  INF  Executed DbCommand (45ms) [Parameters=[@__criteres_LocataireId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT l."Id", l."AppartementId", l."CreeLe", l."DateEntree", l."DateSortie", l."DepotDeGarantieRegle", l."LocataireId", l."ModifieLe", l0."Id", l0."CreeLe", l0."DateNaissance", l0."IBAN", l0."Mail", l0."ModifieLe", l0."Nom", l0."Prenom", l0."Telephone", a."Id", a."Adresse", a."AgenceImmobiliereId", a."ComplementAdresse", a."CreeLe", a."DepotDeGarantie", a."Loyer", a."ModifieLe", a."NombreDeMetre2", a."PrixDesCharges", a."TypeAppartementId", a."VilleId"
FROM "LocataireAppartement" AS l
INNER JOIN "Locataire" AS l0 ON l."LocataireId" = l0."Id"
INNER JOIN "Appartement" AS a ON l."AppartementId" = a."Id"
WHERE l."LocataireId" = @__criteres_LocataireId_0
2023-10-16 15:31:32.642 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireAppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:31:32.642 +02:00  DBG  The navigation 'LocataireAppartementEntite.Locataire' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:31:32.642 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'LocataireEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:31:32.642 +02:00  DBG  The navigation 'LocataireAppartementEntite.Appartement' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:31:32.642 +02:00  DBG  Context 'InfoEcoDbContext' started tracking 'AppartementEntite' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-16 15:31:32.643 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:31:32.643 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 0ms reading results.
2023-10-16 15:31:32.643 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 15:31:32.643 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:31:37.292 +02:00  INF  Handled DetailLocataireAppartementResponse
2023-10-16 15:31:37.292 +02:00  INF  Information : POST https://localhost:44375/LocatairesAppartement from '::1:52449' responded 200 in 4708,8253 ms
2023-10-16 15:31:37.292 +02:00  INF  Executed action method Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4709.116ms.
2023-10-16 15:31:37.293 +02:00  DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter"]
2023-10-16 15:31:37.293 +02:00  DBG  No information found on request to perform content negotiation.
2023-10-16 15:31:37.293 +02:00  DBG  Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2023-10-16 15:31:37.293 +02:00  DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-16 15:31:37.293 +02:00  INF  Executing OkObjectResult, writing value of type 'Infeco.Api.Queries.Locataire.DetailLocataireAppartementResponse'.
2023-10-16 15:31:37.294 +02:00  INF  Executed action Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api) in 4726.9031ms
2023-10-16 15:31:37.294 +02:00  INF  Executed endpoint 'Infeco.Api.Controllers.LocataireAppartementController.ObtenirLocataireAppartementParLocataireIdAsync (Infeco.Api)'
2023-10-16 15:31:37.294 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 15:31:37.294 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 15:31:37.294 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 15:31:37.295 +02:00  INF  Request finished HTTP/1.1 POST https://localhost:44375/LocatairesAppartement application/json 24 - 200 609 application/json;+charset=utf-8 4728.6298ms
2023-10-16 16:18:24.503 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 16:18:24.763 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 16:18:25.249 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 16:18:25.539 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 16:18:25.550 +02:00  DBG  Creating DbConnection.
2023-10-16 16:18:25.610 +02:00  DBG  Created DbConnection. (57ms).
2023-10-16 16:18:25.614 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 16:18:25.634 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 16:18:26.157 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.158 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.166 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 16:18:26.171 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 16:18:26.175 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-16 16:18:26.176 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (6ms).
2023-10-16 16:18:26.176 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 16:18:26.530 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.536 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 16:18:26.620 +02:00  INF  Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 16:18:26.621 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.624 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-16 16:18:26.625 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 16:18:26.905 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.906 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.906 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 16:18:26.907 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 16:18:26.907 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 16:18:26.907 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 16:18:26.908 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 16:18:26.908 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.908 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 16:18:26.959 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 16:18:26.959 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.959 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 16:18:26.979 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 16:18:26.979 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 16:18:26.979 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 16:18:26.979 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 16:18:26.979 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:26.979 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 16:18:27.027 +02:00  INF  Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 16:18:27.031 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:27.034 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 5ms reading results.
2023-10-16 16:18:27.035 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 16:18:27.035 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 16:18:27.048 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 16:18:27.050 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 16:18:27.051 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 16:18:27.052 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 16:18:27.056 +02:00  DBG  Hosting starting
2023-10-16 16:18:27.090 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 16:18:27.094 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 16:18:27.100 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 16:18:27.101 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 16:18:27.101 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 16:18:27.101 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 16:18:27.101 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 16:18:27.102 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 16:18:27.102 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 16:18:27.107 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 16:18:27.111 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 16:18:27.111 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 16:18:27.111 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 16:18:27.112 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 16:18:27.112 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 16:18:27.112 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 16:18:27.112 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 16:18:27.117 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 16:18:27.119 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 16:18:27.120 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 16:18:27.122 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 16:18:27.124 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 16:18:27.125 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 16:18:27.126 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 16:18:27.127 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 16:18:27.202 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 16:18:27.207 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 16:18:27.207 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 16:18:27.208 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 16:18:27.208 +02:00  INF  Hosting environment: Development
2023-10-16 16:18:27.208 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 16:18:27.208 +02:00  DBG  Hosting started
2023-10-16 16:18:27.246 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 16:18:27.277 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 16:18:27.317 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 16:18:27.318 +02:00  DBG  Request did not match any endpoints
2023-10-16 16:18:27.361 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 16:18:27.471 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 16:18:29.622 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 16:18:29.640 +02:00  DBG  Connection ID "18230571314681217046" disconnecting.
2023-10-16 16:18:29.641 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 16:18:29.643 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2398.1111ms
2023-10-16 16:18:29.655 +02:00  DBG  Connection ID "18230571314681217048" disconnecting.
2023-10-16 16:18:29.656 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.7476ms
2023-10-16 16:18:29.743 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 16:18:29.745 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 16:18:29.745 +02:00  DBG  Request did not match any endpoints
2023-10-16 16:18:29.747 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 16:18:29.936 +02:00  DBG  Connection ID "18374686515641974826" disconnecting.
2023-10-16 16:18:29.936 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.6134ms
2023-10-16 17:55:56.925 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 17:57:06.854 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 18:00:26.724 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 18:00:26.960 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 18:00:27.399 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 18:00:27.634 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 18:00:27.644 +02:00  DBG  Creating DbConnection.
2023-10-16 18:00:27.691 +02:00  DBG  Created DbConnection. (45ms).
2023-10-16 18:00:27.695 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 18:00:27.710 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:00:28.320 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:28.323 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:28.334 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (6ms).
2023-10-16 18:00:28.341 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:00:28.347 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-16 18:00:28.349 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (8ms).
2023-10-16 18:00:28.349 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:00:28.728 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:28.740 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:00:28.860 +02:00  INF  Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:00:28.862 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:28.865 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (3ms).
2023-10-16 18:00:28.867 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:00:29.155 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.155 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.156 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:00:29.157 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:00:29.157 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:00:29.158 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (1ms).
2023-10-16 18:00:29.158 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:00:29.159 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.159 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:00:29.208 +02:00  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:00:29.208 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.208 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:00:29.233 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 18:00:29.233 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:00:29.233 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:00:29.233 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:00:29.233 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.234 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:00:29.285 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:00:29.289 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.292 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 18:00:29.292 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:00:29.292 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:00:29.302 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 18:00:29.303 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 18:00:29.305 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 18:00:29.305 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:00:29.309 +02:00  DBG  Hosting starting
2023-10-16 18:00:29.346 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 18:00:29.351 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 18:00:29.360 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 18:00:29.361 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 18:00:29.361 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 18:00:29.362 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 18:00:29.362 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 18:00:29.362 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 18:00:29.363 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 18:00:29.368 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 18:00:29.374 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 18:00:29.374 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 18:00:29.375 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 18:00:29.375 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 18:00:29.375 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 18:00:29.375 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 18:00:29.375 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 18:00:29.382 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 18:00:29.386 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:00:29.387 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 18:00:29.389 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:00:29.391 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 18:00:29.392 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 18:00:29.395 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 18:00:29.395 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 18:00:29.495 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 18:00:29.495 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 18:00:29.496 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 18:00:29.496 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 18:00:29.496 +02:00  INF  Hosting environment: Development
2023-10-16 18:00:29.496 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 18:00:29.496 +02:00  DBG  Hosting started
2023-10-16 18:00:29.538 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 18:00:29.565 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 18:00:29.599 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 18:00:29.600 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:00:29.638 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:00:29.743 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 18:00:31.893 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 18:00:31.902 +02:00  DBG  Connection ID "18086456148080197641" disconnecting.
2023-10-16 18:00:31.903 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2366.6202ms
2023-10-16 18:00:31.904 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 18:00:31.916 +02:00  DBG  Connection ID "18374686515641974828" disconnecting.
2023-10-16 18:00:31.916 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 4.9292ms
2023-10-16 18:00:31.986 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 18:00:31.988 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 18:00:31.988 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:00:31.990 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:00:32.178 +02:00  DBG  Connection ID "18374686524231909399" disconnecting.
2023-10-16 18:00:32.178 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 191.9760ms
2023-10-16 18:01:38.280 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 18:01:38.567 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 18:01:39.016 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 18:01:39.280 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 18:01:39.287 +02:00  DBG  Creating DbConnection.
2023-10-16 18:01:39.326 +02:00  DBG  Created DbConnection. (37ms).
2023-10-16 18:01:39.329 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 18:01:39.343 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:01:39.833 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:39.835 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:39.843 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 18:01:39.849 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:01:39.855 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-16 18:01:39.856 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (8ms).
2023-10-16 18:01:39.856 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:01:40.207 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.211 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:01:40.283 +02:00  INF  Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:01:40.284 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.286 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (2ms).
2023-10-16 18:01:40.288 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:01:40.570 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.570 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.571 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:01:40.572 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:01:40.572 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:01:40.572 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:01:40.572 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:01:40.572 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.572 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:01:40.618 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:01:40.618 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.618 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:01:40.637 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 18:01:40.637 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:01:40.637 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:01:40.637 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:01:40.637 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.637 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:01:40.682 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:01:40.688 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.690 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 6ms reading results.
2023-10-16 18:01:40.690 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:01:40.690 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:01:40.700 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 18:01:40.701 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 18:01:40.702 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 18:01:40.703 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:01:40.705 +02:00  DBG  Hosting starting
2023-10-16 18:01:40.735 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 18:01:40.739 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 18:01:40.744 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 18:01:40.745 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 18:01:40.745 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 18:01:40.745 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 18:01:40.746 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 18:01:40.746 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 18:01:40.746 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 18:01:40.750 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 18:01:40.753 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 18:01:40.758 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 18:01:40.760 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:01:40.761 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 18:01:40.763 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:01:40.764 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 18:01:40.765 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 18:01:40.766 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 18:01:40.767 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 18:01:40.827 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 18:01:40.827 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 18:01:40.827 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 18:01:40.833 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 18:01:40.833 +02:00  INF  Hosting environment: Development
2023-10-16 18:01:40.833 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 18:01:40.833 +02:00  DBG  Hosting started
2023-10-16 18:01:40.868 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 18:01:40.893 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 18:01:40.926 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 18:01:40.926 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:01:41.015 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:01:41.120 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 18:01:43.257 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 18:01:43.273 +02:00  DBG  Connection ID "18230571314681217050" disconnecting.
2023-10-16 18:01:43.274 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 18:01:43.276 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2408.7461ms
2023-10-16 18:01:43.287 +02:00  DBG  Connection ID "18230571318976184321" disconnecting.
2023-10-16 18:01:43.287 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.5993ms
2023-10-16 18:01:43.363 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 18:01:43.364 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 18:01:43.365 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:01:43.367 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:01:43.571 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 207.0814ms
2023-10-16 18:01:43.576 +02:00  DBG  Connection ID "18374686524231909403" disconnecting.
2023-10-16 18:04:56.521 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 18:04:56.769 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 18:04:57.178 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 18:04:57.423 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 18:04:57.433 +02:00  DBG  Creating DbConnection.
2023-10-16 18:04:57.476 +02:00  DBG  Created DbConnection. (40ms).
2023-10-16 18:04:57.479 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 18:04:57.494 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:04:57.979 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:57.982 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:57.989 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 18:04:57.994 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:04:57.999 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (3ms).
2023-10-16 18:04:58.000 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (7ms).
2023-10-16 18:04:58.000 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:04:58.358 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.363 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:04:58.439 +02:00  INF  Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:04:58.439 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.441 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 18:04:58.442 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:04:58.732 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.732 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.732 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:04:58.733 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:04:58.733 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:04:58.733 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:04:58.733 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:04:58.733 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.733 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:04:58.779 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:04:58.779 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.779 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:04:58.805 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 18:04:58.805 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:04:58.805 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:04:58.805 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:04:58.805 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.806 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:04:58.850 +02:00  INF  Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:04:58.854 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.856 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 18:04:58.856 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:04:58.856 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:04:58.864 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 18:04:58.865 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 18:04:58.866 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 18:04:58.867 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:04:58.870 +02:00  DBG  Hosting starting
2023-10-16 18:04:58.899 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 18:04:58.902 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 18:04:58.908 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 18:04:58.909 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 18:04:58.910 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 18:04:58.910 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 18:04:58.910 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 18:04:58.910 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 18:04:58.910 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 18:04:58.914 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 18:04:58.917 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 18:04:58.917 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 18:04:58.917 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 18:04:58.917 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 18:04:58.918 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 18:04:58.918 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 18:04:58.918 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 18:04:58.923 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 18:04:58.925 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:04:58.926 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 18:04:58.927 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:04:58.928 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 18:04:58.929 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 18:04:58.931 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 18:04:58.931 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 18:04:58.994 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 18:04:58.999 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 18:04:58.999 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 18:04:59.000 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 18:04:59.000 +02:00  INF  Hosting environment: Development
2023-10-16 18:04:59.000 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 18:04:59.000 +02:00  DBG  Hosting started
2023-10-16 18:04:59.035 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 18:04:59.062 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 18:04:59.098 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 18:04:59.099 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:04:59.136 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:04:59.249 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 18:05:01.404 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 18:05:01.418 +02:00  DBG  Connection ID "17582052959749931023" disconnecting.
2023-10-16 18:05:01.419 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 18:05:01.420 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2386.7340ms
2023-10-16 18:05:01.431 +02:00  DBG  Connection ID "18374686528526876699" disconnecting.
2023-10-16 18:05:01.432 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.8153ms
2023-10-16 18:05:01.501 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 18:05:01.503 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 18:05:01.503 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:05:01.505 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:05:01.732 +02:00  DBG  Connection ID "18374686515641974830" disconnecting.
2023-10-16 18:05:01.733 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 232.0018ms
2023-10-16 18:06:10.248 +02:00  DBG  Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-16 18:06:10.454 +02:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2023-10-16 18:06:10.897 +02:00  DBG  The index {'LocataireId'} was not created on entity type 'LocataireAppartementEntite' as the properties are already covered by the index {'LocataireId', 'AppartementId'}.
2023-10-16 18:06:11.173 +02:00  DBG  Entity Framework Core 7.0.11 initialized 'InfoEcoDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:7.0.11+c25a0d7b68d66c6ab3849a3b4333964faea6adc9' with options: None
2023-10-16 18:06:11.182 +02:00  DBG  Creating DbConnection.
2023-10-16 18:06:11.229 +02:00  DBG  Created DbConnection. (44ms).
2023-10-16 18:06:11.233 +02:00  DBG  Migrating using database 'pmjmvgha' on server ''.
2023-10-16 18:06:11.252 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:06:11.775 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:11.777 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:11.785 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (5ms).
2023-10-16 18:06:11.791 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:06:11.797 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (4ms).
2023-10-16 18:06:11.799 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (9ms).
2023-10-16 18:06:11.799 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:06:12.157 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.162 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:06:12.246 +02:00  INF  Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:06:12.247 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.249 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (1ms).
2023-10-16 18:06:12.250 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:06:12.549 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.550 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.550 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:06:12.551 +02:00  DBG  Creating DbCommand for 'ExecuteScalar'.
2023-10-16 18:06:12.551 +02:00  DBG  Created DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:06:12.551 +02:00  DBG  Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-10-16 18:06:12.551 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:06:12.552 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.552 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:06:12.603 +02:00  INF  Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2023-10-16 18:06:12.603 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.603 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:06:12.618 +02:00  DBG  Creating DbCommand for 'ExecuteReader'.
2023-10-16 18:06:12.619 +02:00  DBG  Created DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:06:12.619 +02:00  DBG  Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-16 18:06:12.619 +02:00  DBG  Opening connection to database 'pmjmvgha' on server ''.
2023-10-16 18:06:12.619 +02:00  DBG  Opened connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.619 +02:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:06:12.666 +02:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-10-16 18:06:12.670 +02:00  DBG  Closing data reader to 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.671 +02:00  DBG  A data reader for 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432' is being disposed after spending 4ms reading results.
2023-10-16 18:06:12.671 +02:00  DBG  Closing connection to database 'pmjmvgha' on server 'tcp://snuffleupagus.db.elephantsql.com:5432'.
2023-10-16 18:06:12.672 +02:00  DBG  Closed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:06:12.681 +02:00  INF  No migrations were applied. The database is already up to date.
2023-10-16 18:06:12.683 +02:00  DBG  'InfoEcoDbContext' disposed.
2023-10-16 18:06:12.684 +02:00  DBG  Disposing connection to database 'pmjmvgha' on server ''.
2023-10-16 18:06:12.685 +02:00  DBG  Disposed connection to database 'pmjmvgha' on server '' (0ms).
2023-10-16 18:06:12.687 +02:00  DBG  Hosting starting
2023-10-16 18:06:12.721 +02:00  INF  User profile is available. Using 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-16 18:06:12.727 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-2ce4c23f-757b-4029-95d3-9c9820e6de80.xml'.
2023-10-16 18:06:12.734 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-6921759b-a9f9-48ea-a379-13505875271d.xml'.
2023-10-16 18:06:12.735 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f.xml'.
2023-10-16 18:06:12.735 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a038200a-44f7-48da-9d2b-5646ef68d51f.xml'.
2023-10-16 18:06:12.735 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-a642139e-629a-42ab-b89a-38ed4778f2e0.xml'.
2023-10-16 18:06:12.736 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b1a02c3b-a417-45ff-ac5c-986fca4cdd22.xml'.
2023-10-16 18:06:12.736 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b5a22f60-a6fe-488b-8048-b8d1034bef7d.xml'.
2023-10-16 18:06:12.737 +02:00  DBG  Reading data from file 'C:\Users\fdepret\AppData\Local\ASP.NET\DataProtection-Keys\key-b8996f88-e69f-41d1-b4d3-e7b15b37a5e2.xml'.
2023-10-16 18:06:12.741 +02:00  DBG  Found key {2ce4c23f-757b-4029-95d3-9c9820e6de80}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {6921759b-a9f9-48ea-a379-13505875271d}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {7c4081c7-f341-4ce9-ad03-d3ea3cf1c21f}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {a038200a-44f7-48da-9d2b-5646ef68d51f}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {a642139e-629a-42ab-b89a-38ed4778f2e0}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {b1a02c3b-a417-45ff-ac5c-986fca4cdd22}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {b5a22f60-a6fe-488b-8048-b8d1034bef7d}.
2023-10-16 18:06:12.746 +02:00  DBG  Found key {b8996f88-e69f-41d1-b4d3-e7b15b37a5e2}.
2023-10-16 18:06:12.753 +02:00  DBG  Considering key {6921759b-a9f9-48ea-a379-13505875271d} with expiration date 2023-11-22 12:55:42Z as default key.
2023-10-16 18:06:12.756 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:06:12.756 +02:00  DBG  Decrypting secret element using Windows DPAPI.
2023-10-16 18:06:12.758 +02:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-16 18:06:12.759 +02:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-16 18:06:12.760 +02:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-16 18:06:12.762 +02:00  DBG  Using key {6921759b-a9f9-48ea-a379-13505875271d} as the default key.
2023-10-16 18:06:12.763 +02:00  DBG  Key ring with default key {6921759b-a9f9-48ea-a379-13505875271d} was loaded during application startup.
2023-10-16 18:06:12.835 +02:00  DBG  Loaded hosting startup assembly Infeco.Api
2023-10-16 18:06:12.840 +02:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-16 18:06:12.840 +02:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-16 18:06:12.840 +02:00  INF  Application started. Press Ctrl+C to shut down.
2023-10-16 18:06:12.841 +02:00  INF  Hosting environment: Development
2023-10-16 18:06:12.841 +02:00  INF  Content root path: C:\Users\fdepret\source\repos\Infeco.api\Infeco.api
2023-10-16 18:06:12.841 +02:00  DBG  Hosting started
2023-10-16 18:06:12.878 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/index.html - -
2023-10-16 18:06:12.905 +02:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2023-10-16 18:06:12.943 +02:00  DBG  No candidates found for the request path '/index.html'
2023-10-16 18:06:12.943 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:06:12.980 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:06:13.082 +02:00  DBG  Response markup is scheduled to include browser refresh script injection.
2023-10-16 18:06:15.228 +02:00  DBG  Response markup was updated to include browser refresh script injection.
2023-10-16 18:06:15.242 +02:00  DBG  Connection ID "18302628925899014158" disconnecting.
2023-10-16 18:06:15.243 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2023-10-16 18:06:15.245 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 2367.7700ms
2023-10-16 18:06:15.254 +02:00  DBG  Connection ID "18374686515641974832" disconnecting.
2023-10-16 18:06:15.255 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 6.0387ms
2023-10-16 18:06:15.315 +02:00  INF  Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2023-10-16 18:06:15.317 +02:00  DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-16 18:06:15.317 +02:00  DBG  Request did not match any endpoints
2023-10-16 18:06:15.319 +02:00  DBG  AuthenticationScheme: Bearer was not authenticated.
2023-10-16 18:06:15.501 +02:00  DBG  Connection ID "18158513742118125584" disconnecting.
2023-10-16 18:06:15.501 +02:00  INF  Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 185.8910ms
